<popup-msg ng-show="flashMessage" ng-controller="popUpMsgCtr"
           ng-init="init('flashMessage','reportEditFailed')"></popup-msg>

<div class="report_generator_and_response">
    <div class="report_builder_container">
        <div class="container">
        <div class="row">
        <div class="col-md-12" id="dynamicHeader">
            <!-- this will be hidden until fold happens -->
            <a class="collapseIcon iconPlusMinus" role="button" id="{{$index+1}}" href=""> 
                <span class="icon-plus" ng-click="ToggleAdGroups(this)"></span> 
            </a>
            <!-- -->
            <span class="heading" style="float:left;"><h1 ng-bind-html="textConstants.REPORT_BUILDER"></h1></span>
            <!-- this will be hidden after fold-->
            <span class="heading subTitle"><h6 ng-bind-html="textConstants.REPORT_BUILDER_SUBTITLE"></h6></span>
            <!-- -->
            <!-- his will be hidden until fold happens -->
            <span class="heading savedSubTitle"><span>{{reports.name}}</span></span>
            <span class="heading savedSubTitle"><span ng-if="reports.name">|</span> {{reports.reportDefinition.timeframe.start_date}}</span>
            <span class="heading savedSubTitle">- {{reports.reportDefinition.timeframe.end_date}}</span>
            <span class="heading downReport">
                <span class="icon-download zeroPadding pull-left" style="margin-right:9px;"></span>
                <a ng-click="downloadCreateRepBuilder()" class="pull-left">Download Report</a></span>
            </span>
        </div>
        </div>
        </div>

        <div class="container" id="reportBuilderForm">
            <div class="row">

            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="each_section_custom_report dimensionKeywordSection">
                        <div class="create_report_title create_report_title_label" ng-bind-html="textConstants.SELECT_DIMENTION" ></div>
                        <div ng-show="showPrimaryTxtBox" class="create_report_title create_report_title_label filter_input_txtbox" ng-bind-html="textConstants.ADD_KEYWORDS"  ></div>
                        <div>
                            <!-- Primary Dimension start -->
                            <div class="clearfix title_row_separator breakdown_div dimension_block">
                                <div class="pull-left custom_report_filter custom_report_breakdown">
                                    <div class="common_dropdown">
                                        <div class="dropdown">
                                                <span class="dropdown_ul_text" data-toggle="dropdown" title="{{reports.reportDefinition.dimensions.primary.name ?
                                                          reports.reportDefinition.dimensions.primary.name :
                                                          textConstants.REPORT_CHOOSE_BREAKDOWN}}">
                                                    <span class="dd_txt"
                                                          data-template_id = "{{showDefaultDimension.template_id}}"
                                                          id="{{showDefaultDimension.key}}"
                                                          ng-bind-html="reports.reportDefinition.dimensions.primary.name ?
                                                          reports.reportDefinition.dimensions.primary.name :
                                                          textConstants.REPORT_CHOOSE_BREAKDOWN">
                                                    </span>
                                                    <span class="arrow_img"></span>
                                                </span>
                                            <ul class="dropdown-menu" ng-click="enable_generate_btn();">
                                                <li ng-click="select_dropdown_option($event)"
                                                    ng-bind-html="textConstants.REPORT_CHOOSE_BREAKDOWN">
                                                </li>
                                                <li ng-repeat="dimension in customeDimensionData[0].dimensions"
                                                    id="{{dimension}}"
                                                    ng-click="selectPriSecDimension(dimension, 'Primary')" ng-if="checkDimension(dimension)"
                                                    ng-bind-html="displayName[dimension]">
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="pull-left filter_input_txtbox" ng-show="showPrimaryTxtBox">
                                    <input type="text" name="filter" class ="reportFilter"
                                           ng-model='reports.reportDefinition.dimensions.primary.value'
                                           data-reportType = "Primary" autofocus placeholder="Contains keywords ...">
                                </div>
                            </div>
                            <!-- Second Dimension start -->
                            <div id="breakdown_row" ng-show="showSecondDimensionBlock">
                                <div class="clearfix title_row_separator breakdown_div">
                                    <div class="pull-left custom_report_filter custom_report_breakdown">
                                        <div class="common_dropdown">
                                            <div class="dropdown">
                                                    <span class="dropdown_ul_text" data-toggle="dropdown" title="{{reports.reportDefinition.dimensions.secondary.name ?
                                                              reports.reportDefinition.dimensions.secondary.name :
                                                              textConstants.REPORT_CHOOSE_BREAKDOWN}}">
                                                        <span class="dd_txt"
                                                              data-template_id="{{showDefaultDimension.template_id}}"
                                                              id="{{showDefaultDimension.key}}"
                                                              ng-bind-html="reports.reportDefinition.dimensions.secondary.name ?
                                                              reports.reportDefinition.dimensions.secondary.name :
                                                              textConstants.REPORT_CHOOSE_BREAKDOWN">
                                                        </span>
                                                        <span class="arrow_img"></span>
                                                    </span>
                                                <ul class="dropdown-menu">
                                                    <li ng-click="select_dropdown_option($event)"
                                                        ng-bind-html="textConstants.REPORT_CHOOSE_BREAKDOWN">
                                                    </li>
                                                    <li ng-repeat="dimension in secondaryDimensionArr"
                                                        id="{{dimension}}"
                                                        ng-click="selectPriSecDimension(dimension,'Secondary')"
                                                        ng-bind-html="displayName[dimension]">
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="pull-left filter_input_txtbox" ng-show="showSecondaryTxtBox">
                                        <input type="text"
                                               name="filter"
                                               class="reportFilter"
                                               ng-model='reports.reportDefinition.dimensions.secondary.value'
                                               data-reportType="Secondary"
                                               autofocus
                                               placeholder="Contains keywords ...">
                                    </div>
                                    <div class="pull-left delete_row" ng-click="deleteSecondDimensionBlock();"></div>
                                </div>
                            </div>
                            <!-- Second Dimension end -->
                            <div class="row" ng-show="showAddBreakdownButton">
                                <div class="add_breakdown_line"></div>
                                <div class="clearfix add_breakdown_btn">
                                    <div class="pull-left add_circle_symbol" ng-click="showSecondDimension()"></div>
                                    <div class="pull-left"
                                         ng-click="showSecondDimension()"
                                         ng-bind-html="textConstants.ADD_BREAKDOWN_LABEL">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- div class 1st column over -->
                <div class="col-md-6 left_border">
                     <div class="each_section_custom_report" style="min-width: 566px;">
                        <div class="create_report_title" ng-bind-html="textConstants.REPORT_BUILDER_TIMEFRAME"></div>
                        <div>
                            <div class="clearfix title_row_separator customDatesTimeframe">
                                <div class="pull-left col-md-4 timeframe_selector">
                                    <div class="common_dropdown">
                                        <div class="dropdown">
                                                <span class="dropdown_ul_text" data-toggle="dropdown">
                                                    <span class="dd_txt"
                                                          id="date-selected-txt"
                                                          ng-bind-html="reports.reportDefinition.timeframe.type ?
                                                          reports.reportDefinition.timeframe.type :
                                                          textConstants.YESTERDAY">
                                                    </span>
                                                    <span class="arrow_img"></span>
                                                </span>
                                            <ul class="dropdown-menu">
                                                <li ng-model="reports.reportDefinition.timeframe.type"
                                                    ng-repeat="timeframe in textConstants.REPORT_BUILDER_TIMEFRAME_LIST"
                                                    ng-click="reports.reportDefinition.timeframe.type = timeframe;
                                                        select_dropdown_option($event , timeframe)"
                                                    ng-bind-html="timeframe">
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="pull-left col-md-8">
                                    <div class="col-md-12 input-daterange input-group date pull-left">
                                        <div class="col-md-12 dateWrapper ">
                                            <div class="col-md-6">
                                                <input type="text"
                                                       id="startDateInput"
                                                       class="input-sm form-control timeframe"
                                                       ng-model="reports.reportDefinition.timeframe.start_date"
                                                       required>
                                                <i class="icon-calendar glyphicon pull-right"></i>
                                                <label ng-if="!reports.reportDefinition.timeframe.start_date" style="display:block"
                                                       class="errorLabel" ng-bind="textConstants.SELECT_DATE_LABEL"></label>
                                            </div>
                                            <div class="col-md-6">
                                                <input type="text"
                                                       id="endDateInput"
                                                       class="input-sm form-control timeframe"
                                                       ng-model="reports.reportDefinition.timeframe.end_date"
                                                       required>
                                                <i class="icon-calendar glyphicon pull-right"></i>
                                                <label ng-if="!reports.reportDefinition.timeframe.end_date"
                                                       style="display:block"
                                                       class="errorLabel" ng-bind="textConstants.SELECT_DATE_LABEL"></label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- div class 2nd column over -->
                <!-- 3rd column Metrics -->
                <div class="col-md-2 left_border_metrics">
                    <div class="each_section_custom_report metrics_section">
                        <div class="create_report_title" ng-bind="textConstants.SELECTED_METRICS"></div>
                        <div class="metrics_btns">
                            <div class="clearfix title_row_separator">
                                <div class="pull-left metrics_edit_container">
                                    <a class="blue_txt" href="#" data-toggle="modal" data-target=".metric_popup">
					<span class="dashed_txt" ng-click="refreshMetriPopUp()" ng-bind="metrics_text"></span>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="metric_popup modal fade"
                             tabindex="-1"
                             role="dialog"
                             aria-labelledby="myModalLabel"
                             aria-hidden="true">
                            <div class="about_popup">
                                <span class="close unselectable" data-dismiss="modal" aria-hidden="true">×</span>
                                <div class="col-md-12 each_section_custom_report">
                                    <div class="total_metrics_container">
                                        <input style="display:none" type="text" placeHolder="Search" class="search_input">
                                        
                                        <div class="clearfix">
                                            <div class="pull-left popup_heading">Metrics</div>
                                            <div class="pull-right select_all_measures_holder">
                                                <div class="clearfix custom_report_col_title">
                                                    <div class="pull-right external_chkbox">
                                                        <div class="squaredFour">
                                                            <input ng-click="OnSelectUnselectAllMetrics();"
                                                                   type="checkbox"
                                                                   ng-model="allMetrics"
                                                                   class="squaredFourChkbox"
                                                                   id="selectAll_chkbox">
                                                            <label for="selectAll_chkbox"></label>
                                                        </div>
                                                        <span class="squaredFourTxt">Select All</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="measurable_col_holder">
                                            <!-- Delivery Metrics -->
                                            <div  class="col-md-3 each_measurable_col" ng-if="deliveryMetrics.length">
                                                <div class="custom_report_col_title">
                                                    <div class="external_chkbox clearfix">
                                                        <div class="squaredFour"
                                                             ng-class="{not_all_selected:deliveryMetrics.minOneSelected}">
                                                            <input type="checkbox"
                                                                   class="squaredFourChkbox"
                                                                   id="delivery_chkbox"
                                                                   ng-model="deliveryMetrics.isAllSelected"
                                                                   ng-click="onDeliveryMetrClick()">
                                                            <label for="delivery_chkbox"></label>
                                                        </div>
                                                        <span class="squaredFourTxt">Delivery</span>
                                                    </div>
                                                </div>
                                                <div class="custom_report_col">
                                                    <div class="each_option"
                                                         relationIds='Delivery'
                                                         ng-repeat="delivery_metric in deliveryMetrics track by $index"
                                                         id="{{delivery_metric.key}}"
                                                         ng-class="{active:delivery_metric.selected}"
                                                         ng-click="onDeliveryMetrClick($index)"
                                                         ng-bind-html="delivery_metric.value">
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Cost Metrics -->
                                            <div  class="col-md-3 each_measurable_col" ng-if="showCost && costMetrics.length">
                                                <div class="custom_report_col_title">
                                                    <div class="external_chkbox clearfix">
                                                        <div class="squaredFour"
                                                             ng-class="{not_all_selected:costMetrics.minOneSelected}">
                                                            <input type="checkbox"
                                                                   class="squaredFourChkbox"
                                                                   id="cost_chkbox"
                                                                   ng-model="costMetrics.isAllSelected"
                                                                   ng-click="onCostMetrClick()">
                                                            <label for="cost_chkbox"></label>
                                                        </div>
                                                        <span class="squaredFourTxt">Cost</span>
                                                    </div>
                                                </div>
                                                <div class="custom_report_col">
                                                    <div class="each_option"
                                                         relationIds='Cost'
                                                         ng-repeat="cost_metric in costMetrics track by $index"
                                                         id="{{cost_metric.key}}"
                                                         ng-class="{active:cost_metric.selected}"
                                                         ng-click="onCostMetrClick($index)"
                                                         ng-bind-html="cost_metric.value">
                                                    </div>
                                                </div>
                                            </div>

                                            <!--div  class="col-md-3 each_measurable_col">
                                                <div class="custom_report_col_title">
                                                    <div class="external_chkbox clearfix">
                                                      <div class="squaredFour">
                                                        <input type="checkbox" class="squaredFourChkbox"
                                                        id="booked_chkbox" ng-click="select_unselect_metrics($event)">
                                                        <label for="booked_chkbox"></label>
                                                      </div>
                                                      <span class="squaredFourTxt">Booked</span>
                                                    </div>
                                                </div>
                                                <div class="custom_report_col">
                                                    <div class="each_option" ng-repeat="booked_metric in
                                                    customeDimensionData[0].booked_metrics" id="{{booked_metric.key}}"
                                                    ng-click="select_option($event , 'booked_chkd')">
                                                        {{booked_metric.value}}
                                                    </div>
                                                </div>
                                            </div-->
                                            <!-- Engagement Metrics -->
                                            <!--	<div  class="col-md-3 each_measurable_col">
                                                     <div class="custom_report_col_title">
                                                <div class="external_chkbox clearfix">
                                             <div class="squaredFour" ng-class="{not_all_selected:engagementMetrics.minOneSelected}">
                                             <input type="checkbox" class="squaredFourChkbox" id="engagement_chkbox"
                                             ng-model="engagementMetrics.isAllSelected" ng-click="onEngagementMetrClick()">
                                               <label for="engagement_chkbox"></label>
                                              </div>
                                             <span class="squaredFourTxt">Engagement</span>
                                             </div>
                                            </div>
                                              <div class="custom_report_col">
                                            <div class="each_option" relationIds='Engagement' ng-repeat="engagement_metric in
                                            engagementMetrics track by $index" id="{{engagement_metric.key}}"
                                            ng-class="{active:engagement_metric.selected}" ng-click="onEngagementMetrClick($index)">
                                             {{engagement_metric.value}}
                                            </div>
                                             </div>
                                             </div>-->

                                            <!-- Video Metrics -->
                                            <div  class="col-md-3 each_measurable_col" ng-if="videoMetrics.length">
                                                <div class="custom_report_col_title">
                                                    <div class="external_chkbox clearfix">
                                                        <div class="squaredFour"
                                                             ng-class="{not_all_selected:videoMetrics.minOneSelected}">
                                                            <input type="checkbox"
                                                                   class="squaredFourChkbox"
                                                                   id="video_chkbox"
                                                                   ng-model="videoMetrics.isAllSelected"
                                                                   ng-click="onVedioMetrClick()">
                                                            <label for="video_chkbox"></label>
                                                        </div>
                                                        <span class="squaredFourTxt">Video</span>
                                                    </div>
                                                </div>
                                                <div class="custom_report_col">
                                                    <div class="each_option"
                                                         relationIds='Video'
                                                         ng-repeat="video_metric in videoMetrics track by $index "
                                                         id="{{video_metric.key}}"
                                                         ng-class="{active:video_metric.selected}"
                                                         ng-click="onVedioMetrClick($index)"
                                                         ng-bind-html="video_metric.value">
                                                    </div>
                                                </div>
                                            </div>

                                            <!--  Quality Metrics -->
                                            <div  class="col-md-3 each_measurable_col" ng-if="showQuality && displayQltyMetrics.length">
                                                <div class="custom_report_col_title">
                                                    <div class="external_chkbox clearfix">
                                                        <div class="squaredFour"
                                                             ng-class="{not_all_selected:displayQltyMetrics.minOneSelected}">
                                                            <input type="checkbox"
                                                                   class="squaredFourChkbox"
                                                                   id="display_quality_chkbox"
                                                                   ng-model="displayQltyMetrics.isAllSelected"
                                                                   ng-click="onQltyDisplayClick()">
                                                            <label for="display_quality_chkbox"></label>
                                                        </div>
                                                        <span class="squaredFourTxt">Quality Display</span>
                                                    </div>
                                                </div>
                                                <div class="custom_report_col">
                                                    <div class="each_option"
                                                         relationIds='Quality Display'
                                                         ng-repeat="display_quality_metrics in displayQltyMetrics track by $index"
                                                         id="{{display_quality_metrics.key}}"
                                                         ng-class="{active:display_quality_metrics.selected}"
                                                         ng-click="onQltyDisplayClick($index)"
                                                         ng-bind-html="display_quality_metrics.value">
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- video quality metrics -->
                                            <div  class="col-md-3 each_measurable_col" ng-if="showQuality && videoQltyMetrics.length">
                                                <div class="custom_report_col_title">
                                                    <div class="external_chkbox clearfix">
                                                        <div class="squaredFour"
                                                             ng-class="{not_all_selected:videoQltyMetrics.minOneSelected}">
                                                            <input type="checkbox"
                                                                   class="squaredFourChkbox"
                                                                   id="video_quality_chkbox"
                                                                   ng-model="videoQltyMetrics.isAllSelected"
                                                                   ng-click="onQltyVdoMetrClick()">
                                                            <label for="video_quality_chkbox"></label>
                                                        </div>
                                                        <span class="squaredFourTxt">Quality Video</span>
                                                    </div>
                                                </div>
                                                <div class="custom_report_col">
                                                    <div class="each_option"
                                                         relationIds='Quality Video'
                                                         ng-repeat="video_quality_metrics in videoQltyMetrics track by $index "
                                                         id="{{video_quality_metrics.key}}"
                                                         ng-class="{active:video_quality_metrics.selected}"
                                                         ng-click="onQltyVdoMetrClick($index)"
                                                         ng-bind-html="video_quality_metrics.value">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="clearfix">
                                            <div class="pull-right common_primary_btn"
                                                 ng-click="saveMetrics()"
                                                 ng-bind-html="textConstants.MP_SAVE">
                                            </div>
                                            <div class="pull-right secondary_txt"
                                                 data-dismiss="modal" aria-hidden="true"
                                                 ng-bind-html="textConstants.MP_CANCEL">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- div class 3rd col over -->



            </div>
            <!-- first row over -->

            <!-- Start 2nd Row Additional Filters -->
            <div class="container">
            <div class="row">
            <div class="col-md-12">
                <div class="each_section_custom_report">
                    <div class="create_report_title" ng-bind-html="textConstants.REPORT_ADDITIONAL_FILTERS"></div>
                    <div class="additional_filters_holder">
                        <div id="filter_breakdown_row" ng-repeat="addFilts in additionalFilters track by $index"
                             data-ng-init="filterIndex=$index"
                            <!-- sapna -->
                            <div class="clearfix custom_filter_breakdown breakdown_div">
                                <div class="pull-left custom_filter_dropdown custom_report_breakdown">
                                    <div class="common_dropdown">
                                        <div class="dropdown">
													<span class="dropdown_ul_text" data-toggle="dropdown">
                                                        <span class="dd_txt"
                                                              ng-bind-html="addFilts.name ?
                                                              addFilts.name :
                                                              textConstants.CHOOSE_FILTER">
                                                        </span>
                                                        <span class="arrow_img"></span>
                                                    </span>
                                            <ul class="dropdown-menu">
                                                <div class="dropdown_autoselect_box">
                                                    <input ng-click="addSearch($event)"
                                                           type="text"
                                                           ng-model="dimensionQuery"
                                                           placeHolder="Search">
                                                </div>
                                                <li ng-repeat="filters in filterList
														    | filter:dimensionQuery"
                                                    id="{{filters}}"
                                                    ng-click="onChoosingAditFlts(filterIndex,
                                                            filters);"
                                                    ng-model="addFilts.key"
                                                    ng-bind-html="displayName[filters]" ng-if="checkDimension(filters)">
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="pull-left filter_input_txtbox">
                                    <input type="text"
                                           name="filter"
                                           class="reportFilter"
                                           ng-model="addFilts.value"
                                           ng-hide="addFilts.hide"
                                           autofocus
                                           placeholder="Contains keywords ...">
                                </div>
                                <div class="pull-left delete_row" ng-click="delAditFlt($index);"></div>
                            </div>
                            <!-- sapna -->
                        </div>
                        <div class="clearfix title_row_separator">
                            <div class="pull-left additional_filters_label">
                                <div class="pull-left add_circle_symbol" ng-click="addAdditionalFilters()"></div>
                                <div ng-click="addAdditionalFilters()"
                                     class="pull-left blue_txt"
                                     ng-bind-html="textConstants.REPORT_ADD_FILTERS">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
                </div>
                </div>
            <!-- End 2nd Row Additional Filters -->
            
            <!--Selected Metrics-->
            <div class="col-md-12 zeroPadding">
                <span class="pull-left">Metrics</span>
                <div class="pull-left clearLeft">
                    <a href="#" class="pull-left" ng-click="refreshMetriPopUp()">
                        <span class="pull-left" ng-bind="metrics_text"></span>
                        <span class="pull-left icon-inline-edit"></span>
                    </a>
                </div>
                
                <!--Metric Data Toggle-->
                <div class="col-md-12 zeroPadding metricDataView">
                    <!--Header-->
                    <div class="col-md-12 zeroPadding">
                        <span class="pull-left">Select Metrics</span>
                        <input ng-click="OnSelectUnselectAllMetrics();" type="checkbox" ng-model="allMetrics" class="pull-left" id="selectAll_chkbox">
                        <span class="pull-left">Select All</span>
                        
                        <a class="btn btn-default pull-right">Save & Close</a>
                        <a class="btn btn-link pull-right">Cancel</a>
                    </div>
                    
                    <!--Body-->
                    <div class="col-md-12 zeroPadding">
                        <!--Delivery-->
                        <div class="col-md-2 zeroPadding">
                            <span class="col-md-12 zeroPadding">
                                <input type="checkbox"
                                    class="squaredFourChkbox"
                                    id="delivery_chkbox"
                                    ng-model="deliveryMetrics.isAllSelected"
                                    ng-click="onDeliveryMetrClick()">
                                    Delivery
                            </span>
                            
                            <div class="col-md-12 zeroPadding"
                                relationIds='Delivery'
                                ng-repeat="delivery_metric in deliveryMetrics track by $index"
                                id="{{delivery_metric.key}}"
                                ng-class="{active:delivery_metric.selected}"
                                ng-click="onDeliveryMetrClick($index)"
                                ng-bind-html="delivery_metric.value">
                            </div>
                            
                        </div>
                        
                        <!--Pacing-->
                        <div class="col-md-2 zeroPadding">
                            <span class="col-md-12 zeroPadding">Pacing</span>
                            <div class="col-md-12 zeroPadding"></div>
                        </div>
                        
                        <!--Cost-->
                        <div class="col-md-3 zeroPadding">
                            <span class="col-md-12 zeroPadding">
                                <input type="checkbox"
                                    class="squaredFourChkbox"
                                    id="cost_chkbox"
                                    ng-model="costMetrics.isAllSelected"
                                    ng-click="onCostMetrClick()">
                                    Cost
                            </span>
                            
                            <div class="col-md-6 zeroPadding"
                                relationIds='Cost'
                                ng-repeat="cost_metric in costMetrics track by $index"
                                id="{{cost_metric.key}}"
                                ng-class="{active:cost_metric.selected}"
                                ng-click="onCostMetrClick($index)"
                                ng-bind-html="cost_metric.value">
                            </div>
                        </div>
                        
                        <!--Video-->
                        <div class="col-md-2 zeroPadding">
                            <span class="col-md-12 zeroPadding">
                                <input type="checkbox"
                                    class="squaredFourChkbox"
                                    id="video_chkbox"
                                    ng-model="videoMetrics.isAllSelected"
                                    ng-click="onVedioMetrClick()">
                                    Video
                            </span>
                            
                            <div class="col-md-12 zeroPadding"
                                relationIds='Video'
                                ng-repeat="video_metric in videoMetrics track by $index "
                                id="{{video_metric.key}}"
                                ng-class="{active:video_metric.selected}"
                                ng-click="onVedioMetrClick($index)"
                                ng-bind-html="video_metric.value">
                            </div>
                        </div>
                        
                        <!--Quality-->
                        <div class="col-md-3 zeroPadding">
                            <span class="col-md-12 zeroPadding">
                                <input type="checkbox"
                                    class="squaredFourChkbox"
                                    id="display_quality_chkbox"
                                    ng-model="displayQltyMetrics.isAllSelected"
                                    ng-click="onQltyDisplayClick()">
                                    Quality
                            </span>
                            
                            <div class="col-md-6 zeroPadding"
                                relationIds='Quality Display'
                                ng-repeat="display_quality_metrics in displayQltyMetrics track by $index"
                                id="{{display_quality_metrics.key}}"
                                ng-class="{active:display_quality_metrics.selected}"
                                ng-click="onQltyDisplayClick($index)"
                                ng-bind-html="display_quality_metrics.value">
                            </div>
                            
                            <!--Video Quality-->
                            <div class="col-md-6 zeroPadding"
                                relationIds='Quality Video'
                                ng-repeat="video_quality_metrics in videoQltyMetrics track by $index "
                                id="{{video_quality_metrics.key}}"
                                ng-class="{active:video_quality_metrics.selected}"
                                ng-click="onQltyVdoMetrClick($index)"
                                ng-bind-html="video_quality_metrics.value">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3rd Row Save/Schedule -->
            <div class="row create_scheduled_report">
                <div class="col-md-12 zeroPadding each_section_custom_report">
                    <div class="create_report_title">
                        <div class="clearfix scheduled_report_fields">
                            <div class="each-col" id="schedule-btn">
                                <div class="label-txt" ng-bind-html="textConstants.SAVE_SCHEDULE"></div>
                                <div class="schedule-on-off-btn">
                                    <input type="checkbox"
                                           ng-model="scheduleReportActive"
                                           checked data-toggle="toggle"
                                           id="toggle"
                                           data-on=" "
                                           data-off=" ">
                                </div>
                            </div>
                            <!-- SAVE/SCHEDULE TOGGELE BUTTON MARK UP -->
                            <div class="each-col default-schedule-col radioBtnToggle">
                                <div class="label-txt">Select Save or Schedule</div>
                                <div class="btn-group miniToggle">
                                    <label class="btn btn-default whitelist " style="width: auto;" ng-class="reportTypeSelect === 'Save' ? 'active' : ''" data-ng-click="scheduleReportActive=false">
                                        <span>Save As</span>
                                        <input type="radio" name="saveSchedule" group="budgetGroup" value="Save" ng-click = "saveSchedule('Save')" ng-model="reportTypeSelect" ng-checked="reportTypeSelect === 'Save' ? true : false" hidden="hidden" class=""  >
                                    </label>
                                    <label class="btn btn-default blacklist" style="width: auto;" ng-class="reportTypeSelect === 'Schedule As' ? 'active' : ''" data-ng-click="scheduleReportActive=true">
                                        <span>Schedule As</span>
                                        <input type="radio" name="saveSchedule" group="budgetGroup" ng-click = "saveSchedule('Schedule As')" value="Schedule As" ng-model="reportTypeSelect" ng-checked="reportTypeSelect === 'Schedule As' ? true : false" hidden="hidden" class=""  checked="checked">
                                    </label>
                                </div>
                            </div>

                            <div class="each-col default-schedule-col report-name-col">
                                <div class="label-txt">{{textConstants.REPORT_NAME}}</div>
                                <div class="col-md-12 zeroPadding">
                                    <input type="text" ng-model="reports.name" maxlength="256" placeholder="Enter a Report Name, no punctuation or special characters.">
                                </div>
                            </div>
                            <div class="each-col default-schedule-col" ng-show="reportTypeSelect !== 'Save'" >
                                <div class="label-txt" ng-bind-html="textConstants.WF_FREQUENCY"></div>
                                <div>
                                    <div class="common_dropdown">
                                        <div class="dropdown">
											<span class="dropdown_ul_text" data-toggle="dropdown">
												<span class="dd_txt frequency"
                                                      id="date-selected-txt"
                                                      ng-bind-html="reports.schedule.frequency ?
                                                        reports.schedule.frequency :
                                                        textConstants.SELECT">
                                                </span>
												<span class="arrow_img"></span>
											</span>
                                            <ul class="dropdown-menu">
                                                <li ng-repeat="frequency in textConstants.WF_FREQUENCY_LIST"
                                                    ng-model="reports.schedule.frequency"
                                                    ng-click="reports.schedule.frequency = frequency;
                                                        select_schedule_option(frequency)"
                                                    ng-bind-html="frequency">
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="each-col scheduling-options schedule-once" ng-show="reportTypeSelect !== 'Save'" >
                                <div class="label-txt" ng-bind-html="textConstants.SCHEDULE_DELIVER_ON"></div>
                                <div>
                                    <div class="input-daterange input-group date pull-left">
                                        <div class="dateWrapper">
                                            <input type="text"
                                                   id="deliverOn"
                                                   name="scheduleReportStartDate"
                                                   ng-model="reports.schedule.startDate"
                                                   class="input-sm form-control timeframe"
                                                   required="">
                                            <i class="icon-calendar glyphicon pull-right"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="each-col scheduling-options schedule-weekly" ng-show="reportTypeSelect !== 'Save'" >
                                <div class="label-txt" ng-bind-html="textConstants.SCHEDULE_OCCURS_ON"></div>
                                <div>
                                    <div class="common_dropdown">
                                        <div class="dropdown">
											<span class="dropdown_ul_text" data-toggle="dropdown">
												<span class="dd_txt"
                                                      id="date-selected-txt"
                                                      ng-bind-html="reports.schedule.occurance ?
                                                        reports.schedule.occurance :
                                                        textConstants.SELECT">
                                                </span>
												<span class="arrow_img"></span>
											</span>
                                            <ul class="dropdown-menu">
                                                <li ng-repeat="week in textConstants.WEEKNAME"
                                                    ng-model="reports.schedule.occurance"
                                                    ng-click="reports.schedule.occurance = week;
                                                        select_dropdown_option($event);" ng-bind-html="week">
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="each-col scheduling-options schedule-monthly" ng-show="reportTypeSelect !== 'Save'" >
                                <div class="label-txt" ng-bind-html="textConstants.SCHEDULE_OCCURS_ON"></div>
                                <div>
                                    <div class="common_dropdown">
                                        <div class="dropdown">
                                            <span class="dropdown_ul_text" data-toggle="dropdown">
                                                <span class="dd_txt"
                                                    id="date-selected-txt"
                                                    ng-bind-html="reports.schedule.occurance ?
                                                        reports.schedule.occurance :
                                                        textConstants.SELECT">
                                                </span>
                                                <span class="arrow_img"></span>
                                            </span>
                                            <ul class="dropdown-menu">
                                                <li ng-repeat="schedule_occur in textConstants.SCHEDULE_REPORT_OCCURS_ON_LIST"
                                                    ng-model="reports.schedule.occurance"
                                                    ng-click="select_schedule_occurs_option($event, schedule_occur);"
                                                    ng-bind-html="schedule_occur">
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="each-col scheduling-options schedule-occurs-custom" ng-show="reportTypeSelect !== 'Save'" >
                                <div class="label-txt" ng-bind-html="textConstants.SELECT_DATE_LABEL"></div>
                                <div>
                                    <div class="common_dropdown">
                                        <div class="dropdown">
											<span class="dropdown_ul_text" data-toggle="dropdown">
												<span class="dd_txt"
                                                      id="date-selected-txt"
                                                      ng-bind-html="textConstants.SELECT">
                                                </span>
												<span class="arrow_img"></span>
											</span>
                                            <ul class="dropdown-menu">
                                                <li ng-repeat="counter in getNumberDate"
                                                    ng-model="reports.schedule.customOccuranceDate"
                                                    ng-click="reports.schedule.customOccuranceDate = counter;
                                                        select_dropdown_option($event);" ng-bind="counter">
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="each-col scheduling-options schedule-date"  ng-show="reportTypeSelect !== 'Save'" >
                                <div class="input-daterange-scheduled">
                                    <div class="input-daterange input-group date pull-left">
                                        <div class="dateWrapper" style="width:258px;">
                                            <div class="pull-left" style="width:124px;">
                                                <div class="label-txt"
                                                     ng-bind-html="textConstants.SCHEDULE_START_DATE_LABEL">
                                                </div>
                                                <div>
                                                    <input type="text"
                                                           id="startOn"
                                                           ng-model="reports.schedule.startDate"
                                                           class="input-sm form-control timeframe"
                                                           ng-disabled="reports.schedule.frequency === 'Once'"
                                                           required>
                                                    <i class="icon-calendar glyphicon pull-right"></i>
                                                </div>
                                            </div>
                                            <div class="pull-left endScheduledDate" style="width:124px;">
                                                <div class="label-txt"
                                                     ng-bind-html="textConstants.SCHEDULE_END_DATE_LABEL">
                                                </div>
                                                <div>
                                                    <input type="text"
                                                           id="endOn"
                                                           ng-model="reports.schedule.endDate"
                                                           class="input-sm form-control timeframe" required="">
                                                    <i class="icon-calendar glyphicon pull-right"></i>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <span class="pull-right common-loading-btn" style="width:91px;" ng-show="loadingBtn"></span>
                        <button class="pull-right btn btn-primary {{generateBtnDisabled ?
                                    'disabled' :
                                    ''}}"
                                ng-click="scheduleReportAction();"
                                ng-bind-html="buttonLabel" ng-show="!loadingBtn" >
                        </button>

                        <button class="pull-right btn btn-default"
                                ng-click="resetMetricOptions();"
                                ng-bind-html="buttonResetCancel" ng-class="reportTypeSelect === 'Save' ? 'save_reset glyphicon glyphicon-repeat' : ''">
                        </button>

                        <!-- <div class="pull-right secondary_txt" ng-click="reset_metric_options()">
                            Reset
                        </div> -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Custom Report Response Page -->
        <div class="custom_response_screenshot_container">
            <div class="img_table_container">
				<span class="img_table_txt">
					Please select dimensions, timeframe and any additional <br> parameters to generate a report
				</span>
                <div class="img_table"></div>
            </div>
            <div class="custom_report_response_page" style="display:none;">
                <!-- generating report loader -->
                <div class="report-response-load"  style="display:none;">
                    Generating Report...
                </div>
                <!-- end of generating report loader -->
                <div class="report_response_and_tabs">
                    <!-- add  style="display:none;"  when tabs are not to be shown -->
                    <div ng-if="!hideReportsTabs"
                         class="clearfix custom_report_response_tabs">
                        <div class="each_tab active" ng-click="show_respective_table('delivery')" id="delivery_tab" ng-show="metricKeyArr.delivery_metrics">
                            <span>Delivery</span>
                        </div>
                        <!--<div class="each_tab" ng-click="show_respective_table('booked')" id="booked_tab">
                            <span>Booked</span>
                        </div>-->
                        <div class="each_tab" ng-click="show_respective_table('cost')" id="cost_tab" ng-show="showCost && metricKeyArr.cost_metrics.length">
                            <span>Cost</span>
                        </div>
                        <!--<div class="each_tab" ng-click="show_respective_table('engagement')" id="engagement_tab">
                            <span>Engagement</span>
                        </div>-->
                        <div class="each_tab" ng-click="show_respective_table('video')" id="video_tab" ng-show="metricKeyArr.video_metrics.length">
                            <span>Video</span>
                        </div>
                        <div class="each_tab" ng-click="show_respective_table('display_quality')" id="display_quality_tab" ng-show="metricKeyArr.display_quality_metrics.length">
                            <span>Quality Display</span>
                        </div>
                        <div class="each_tab" ng-click="show_respective_table('video_quality')" id="video_quality_tab" ng-show="metricKeyArr.video_quality_metrics.length">
                            <span>Quality Video</span>
                        </div>
                    </div>
                    <div class="custom_report_response_table" id="delivery_table" ng-show="metricKeyArr.delivery_metrics.length">
                        <!-- add vertical_scroll class when scrolled vertically -->
                        <div class="custom_report_scroll" style="height:0">
                            <div class="each_row heading_row">
                                <div class="inner_heading_row">
                                    <div class="each_col tree_dimension_col" ng-bind-html="reportTitle"></div>
                                    <div class="each_col_delivery" ng-class="addReqClassToSort(dm.key,sortType,sortReverse)" ng-click="clickToSort(dm.key);"
                                         ng-repeat="dm in metricKeyArr.delivery_metrics track by $index"
                                         ng-bind-html="dm.value">
                                    </div>
                                </div>
                            </div>
                            <div class="clearfix first_dimension_row_holder">
                                <div ng-if="reportDataLoading" class="common-load-more report-response-load">
                                    Generating Report...
                                </div>
                                <span ng-if="(!reportDataLoading && reportDataNotFound)"
                                      class="no-data-common"
                                      ng-bind-html="getMessageForDataNotAvailable()">
                                </span>
                                <div class="each_row reportData {{showhasBreakdown}}"
                                     data-result-row='{{customeReportData.idx}}'
                                     ng-repeat="customeReportData in metricValues.first_dimension.delivery_metrics | orderBy:sortType:sortReverse">
                                    <!-- add active when the next dimension is open -->
                                    <!-- add hasBreakdown when the next dimension is available -->
                                    <div ng-include="'customeReportTpl'" class="heading_first_dimension"></div>
                                    <!-- second dimension div-->
                                    <div ng-show='secondDimensionReportLoading["delivery_metrics"][customeReportData.idx]'
                                         class="common-load-more">
                                    </div>
                                    <div class="clearfix second_dimension_row_holder">
                                        <div ng-if='!secondDimensionReportLoading["delivery_metrics"][customeReportData.idx] &&
                                            metricValues.second_dimension[customeReportData.idx].delivery_metrics.length > 0'>
                                            <div class="second_dimension_row"
                                                 ng-repeat="customeReportData in
                                                    metricValues.second_dimension[customeReportData.idx].delivery_metrics | orderBy:sortType:sortReverse"
                                                 ng-include="'customeReportTpl'">
                                            </div>
                                            <!-- load more for second dimension -->
                                            <span class="sec_dimension_load_more"
                                                  ng-click="fetchMoreSecondDimensionData($event, metricValues.first_dimension.delivery_metrics[customeReportData.idx].value,customeReportData.idx, 1)"
                                                  ng-show="secDimensionLoadMore['delivery_metrics'][customeReportData.idx]"
                                                  style="" extFile="aaa">
												<a href="javascript:void(0);">Load more</a>
											</span>
                                            <span class="sec_dimension_loadingIcon common-loading-area" style="margin-left:465px;"
                                                 ng-show="secDimensionLoadIcon['delivery_metrics'][customeReportData.idx]"></span>
						                </div>

                                        <span ng-if="secondDimensionReportDataNotFound['delivery_metrics'][customeReportData.idx]"
                                              class="no-data-common"
                                              ng-bind-html="getMessageForDataNotAvailable()">
                                        </span>
                                        <!-- end of load more for second dimension -->
                                    </div>
                                    <!-- end of second dimension div-->
                                </div>
                            </div>
                        </div>
                        <div ng-if="fetching" class="common-load-more" style="margin-top: -40px"></div>
                    </div>
                    <div class="custom_report_response_table" id="cost_table" style="display:none;" ng-show="showCost && metricKeyArr.cost_metrics.length">
                        <div class="custom_report_scroll">
                            <div class="each_row heading_row">
                                <div class="inner_heading_row">
                                    <div class="each_col tree_dimension_col">{{reportTitle}}</div>
                                    <div class="each_col_cost" ng-class="addReqClassToSort(bm.key,sortType,sortReverse)" ng-click="clickToSort(bm.key);"
                                         ng-repeat="bm in metricKeyArr.cost_metrics track by $index"
                                         ng-bind="bm.value">
                                    </div>
                                </div>
                            </div>
                            <div class="clearfix first_dimension_row_holder">
                                <div ng-if="reportDataLoading" class="common-load-more report-response-load">
                                    Generating Report..
                                </div>
                                <span ng-if="(!reportDataLoading && reportDataNotFound)"
                                      class="no-data-common"
                                      ng-bind-html="getMessageForDataNotAvailable()">
                                </span>
                                <div class="each_row reportData {{showhasBreakdown}}"
                                     data-result-row='{{customeReportData.idx}}'
                                     ng-repeat="customeReportData in metricValues.first_dimension.cost_metrics | orderBy:sortType:sortReverse">
                                    <div ng-include="'customeReportTpl'" class="heading_first_dimension"></div>
                                    <!-- second dimension div-->
                                    <div ng-show='secondDimensionReportLoading["cost_metrics"][customeReportData.idx]'
                                         class="common-load-more">
                                    </div>
                                    <div class="clearfix second_dimension_row_holder">
                                        <div ng-if="!secondDimensionReportLoading['cost_metrics'][customeReportData.idx] &&
                                                metricValues.second_dimension[customeReportData.idx].cost_metrics.length > 0">
                                            <div class="second_dimension_row"
                                                 ng-repeat="customeReportData in
                                                    metricValues.second_dimension[customeReportData.idx].cost_metrics | orderBy:sortType:sortReverse"
                                                 ng-include="'customeReportTpl'">
                                            </div>
                                            <span class="sec_dimension_load_more"
                                                  ng-click="fetchMoreSecondDimensionData($event, metricValues.first_dimension.cost_metrics[customeReportData.idx].value,customeReportData.idx, 1)"
                                                  ng-show="secDimensionLoadMore['cost_metrics'][customeReportData.idx]"
                                                  style="">
												<a href="javascript:void(0);">Load more</a>
											</span>
                                            <span class="sec_dimension_loadingIcon common-loading-area" style="margin-left:465px;"
                                                 ng-show="secDimensionLoadIcon['cost_metrics'][customeReportData.idx]"></span>
                                        </div>

                                        <span ng-if="secondDimensionReportDataNotFound['cost_metrics'][customeReportData.idx]"
                                              class="no-data-common"
                                              ng-bind-html="getMessageForDataNotAvailable()">
                                        </span>
                                        <!-- end of load more for second dimension -->
                                    </div>
                                    <!-- end of second dimension div-->
                                </div>
                            </div>
                        </div>
                        <div ng-if="fetching" class="common-load-more" style="margin-top: -40px"></div>
                    </div>
                    <!-- <div class="custom_report_response_table" id="booked_table" style="display:none;">
                        <div class="custom_report_scroll">
                            <div class="each_row heading_row">
                                <div class="inner_heading_row">
                                    <div class="each_col tree_dimension_col">{{reportTitle}}</div>
                                    <div class="each_col" ng-repeat="bm in metricKeyArr.booked_metrics track by $index">
                                        {{bm.value}}
                                    </div>
                                </div>
                            </div>
                            <div class="clearfix first_dimension_row_holder">
                                <div ng-if="reportDataLoading" class="common-load-more report-response-load">Generating Report...</div>
                                <span ng-if="(!reportDataLoading && reportDataNotFound)" class="no-data-common"
                                ng-bind-html="getMessageForDataNotAvailable()"></span>
                                <div class="each_row reportData {{showhasBreakdown}}" data-result-row='{{customeReportData.idx}}'
                                ng-repeat="customeReportData in metricValues.first_dimension.booked_metrics track by $index">
                                    <div ng-include="'customeReportTpl'" class="heading_first_dimension"></div>
                                    <div ng-show='secondDimensionReportLoading["booked_metrics"][customeReportData.idx]'
                                    class="common-load-more"></div>
                                    <div class="clearfix second_dimension_row_holder">
                                        <div ng-if="!secondDimensionReportLoading['booked_metrics'][customeReportData.idx] &&
                                        metricValues.second_dimension[customeReportData.idx].booked_metrics.length> 0">
                                            <div class="second_dimension_row"  ng-repeat="customeReportData in metricValues
                                            .second_dimension[customeReportData.idx].booked_metrics track by $index"
                                            ng-include="'customeReportTpl'"></div>
                                            <span class="sec_dimension_load_more"  style="display:none;">
                                                <a href="javascript:void(0);">Load more</a>
                                            </span>
                                        </div>
                                        <span ng-if="secondDimensionReportDataNotFound['booked_metrics'][customeReportData.idx]"
                                        class="no-data-common" ng-bind-html="getMessageForDataNotAvailable()"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div ng-if="fetching" class="common-load-more"></div>
                    </div> -->
                    <div class="custom_report_response_table" id="engagement_table" style="display:none;" ng-show="metricKeyArr.engagement_metrics.length">
                        <div class="custom_report_scroll">
                            <div class="each_row heading_row">
                                <div class="inner_heading_row">
                                    <div class="each_col tree_dimension_col">{{reportTitle}}</div>
                                    <div class="each_col" ng-class="addReqClassToSort(em.key,sortType,sortReverse)" ng-click="clickToSort(em.key);"
                                         ng-repeat="em in metricKeyArr.engagement_metrics track by $index"
                                         ng-bind="em.value">
                                    </div>
                                </div>
                            </div>
                            <div class="clearfix first_dimension_row_holder">
                                <div ng-if="reportDataLoading" class="common-load-more report-response-load">
                                    Generating Report...
                                </div>
                                <span ng-if="(!reportDataLoading && reportDataNotFound)"
                                      class="no-data-common" ng-bind-html="getMessageForDataNotAvailable()">
                                </span>
                                <div class="each_row reportData {{showhasBreakdown}}"
                                     data-result-row='{{customeReportData.idx}}'
                                     ng-repeat="customeReportData in metricValues.first_dimension.engagement_metrics | orderBy:sortType:sortReverse">
                                    <div ng-include="'customeReportTpl'" class="heading_first_dimension"></div>
                                    <!-- second dimension div-->
                                    <div ng-show='secondDimensionReportLoading["engagement_metrics"][customeReportData.idx]'
                                         class="common-load-more"></div>
                                    <div class="clearfix second_dimension_row_holder">
                                        <div ng-if="!secondDimensionReportLoading['engagement_metrics'][customeReportData.idx] &&
                                                metricValues.second_dimension[customeReportData.idx].engagement_metrics.length >0">
                                            <div class="second_dimension_row"
                                                 ng-repeat="customeReportData in
                                                    metricValues.second_dimension[customeReportData.idx].engagement_metrics | orderBy:sortType:sortReverse"
                                                 ng-include="'customeReportTpl'">
                                            </div>
                                            <span class="sec_dimension_load_more"
                                                  ng-click="fetchMoreSecondDimensionData($event, metricValues.first_dimension.engagement_metrics[customeReportData.idx].value,customeReportData.idx, 1)"
                                                  ng-show="secDimensionLoadMore['engagement_metrics'][customeReportData.idx]"
                                                  style="">
												<a href="javascript:void(0);">Load more</a>
                                        </span>
                                            <span class="sec_dimension_loadingIcon common-loading-area" style="margin-left:465px;"
                                                 ng-show="secDimensionLoadIcon['engagement_metrics'][customeReportData.idx]"></span>
                                        </div>

                                        <span ng-if="secondDimensionReportDataNotFound['engagement_metrics'][customeReportData.idx]"
                                              class="no-data-common"
                                              ng-bind-html="getMessageForDataNotAvailable()">
                                        </span>
                                        <!-- end of load more for second dimension -->
                                    </div>
                                    <!-- end of second dimension div-->
                                </div>
                            </div>
                        </div>
                        <div ng-if="fetching" class="common-load-more" style="margin-top: -40px"></div>
                    </div>
                    <div class="custom_report_response_table" id="video_table" style="display:none;" ng-show="metricKeyArr.video_metrics.length">
                        <div class="custom_report_scroll">
                            <div class="each_row heading_row">
                                <div class="inner_heading_row">
                                    <div class="each_col tree_dimension_col">{{reportTitle}}</div>
                                    <div class="each_col" ng-class="addReqClassToSort(vm.key,sortType,sortReverse)" ng-click="clickToSort(vm.key);"
                                         ng-repeat="vm in metricKeyArr.video_metrics track by $index"
                                         ng-bind="vm.value">
                                    </div>
                                </div>
                            </div>
                            <div class="clearfix first_dimension_row_holder">
                                <div ng-if="reportDataLoading" class="common-load-more report-response-load">
                                    Generating Report...
                                </div>
                                <span ng-if="(!reportDataLoading && reportDataNotFound)"
                                      class="no-data-common"
                                      ng-bind-html="getMessageForDataNotAvailable()">
                                </span>
                                <div class="each_row reportData {{showhasBreakdown}}"
                                     data-result-row='{{customeReportData.idx}}'
                                     ng-repeat="customeReportData in metricValues.first_dimension.video_metrics | orderBy:sortType:sortReverse">
                                    <div ng-include="'customeReportTpl'" class="heading_first_dimension"></div>
                                    <!-- second dimension div-->
                                    <div ng-show='secondDimensionReportLoading["video_metrics"][customeReportData.idx]'
                                         class="common-load-more"></div>
                                    <div class="clearfix second_dimension_row_holder">
                                        <div ng-if="!secondDimensionReportLoading['video_metrics'][customeReportData.idx] &&
                                                metricValues.second_dimension[customeReportData.idx].video_metrics.length > 0">
                                            <div class="second_dimension_row"
                                                 ng-repeat="customeReportData in
                                                    metricValues.second_dimension[customeReportData.idx].video_metrics | orderBy:sortType:sortReverse"
                                                 ng-include="'customeReportTpl'">
                                            </div>
                                            <span class="sec_dimension_load_more"
                                                  ng-click="fetchMoreSecondDimensionData($event, metricValues.first_dimension.video_metrics[customeReportData.idx].value,customeReportData.idx, 1)"
                                                  ng-show="secDimensionLoadMore['video_metrics'][customeReportData.idx]"
                                                  style="">
												<a href="javascript:void(0);">Load more</a>
                                        </span>
                                            <span class="sec_dimension_loadingIcon common-loading-area" style="margin-left:465px;"
                                                 ng-show="secDimensionLoadIcon['video_metrics'][customeReportData.idx]"></span>
                                        </div>

                                        <span ng-if="secondDimensionReportDataNotFound['video_metrics'][customeReportData.idx]"
                                              class="no-data-common"
                                              ng-bind-html="getMessageForDataNotAvailable()">
                                        </span>
                                        <!-- end of load more for second dimension -->
                                    </div>
                                    <!-- end of second dimension div-->
                                </div>
                            </div>
                        </div>
                        <div ng-if="fetching" class="common-load-more" style="margin-top: -40px"></div>
                    </div>
                    <div class="custom_report_response_table" id="display_quality_table" style="display:none;" ng-show="metricKeyArr.display_quality_metrics.length">
                        <div class="custom_report_scroll">
                            <div class="each_row heading_row">
                                <div class="inner_heading_row">
                                    <div class="each_col tree_dimension_col">{{reportTitle}}</div>
                                    <div class="each_col" ng-class="addReqClassToSort(vm.key,sortType,sortReverse)" ng-click="clickToSort(vm.key);"
                                         ng-repeat="vm in metricKeyArr.display_quality_metrics track by $index"
                                         ng-bind="vm.value">
                                    </div>
                                </div>
                            </div>
                            <div class="clearfix first_dimension_row_holder">
                                <div ng-if="reportDataLoading" class="common-load-more report-response-load">
                                    Generating Report...
                                </div>
                                <span ng-if="(!reportDataLoading && reportDataNotFound)"
                                      class="no-data-common"
                                      ng-bind-html="getMessageForDataNotAvailable()">
                                </span>
                                <div class="each_row reportData {{showhasBreakdown}}"
                                     data-result-row='{{customeReportData.idx}}'
                                     ng-repeat="customeReportData in
                                        metricValues.first_dimension.display_quality_metrics | orderBy:sortType:sortReverse">
                                    <div ng-include="'customeReportTpl'" class="heading_first_dimension"></div>
                                    <!-- second dimension div-->
                                    <div ng-show='secondDimensionReportLoading["display_quality_metrics"][customeReportData.idx]'
                                         class="common-load-more"></div>
                                    <div class="clearfix second_dimension_row_holder">
                                        <div ng-if="!secondDimensionReportLoading['display_quality_metrics']
                                                [customeReportData.idx] && metricValues.second_dimension[customeReportData.idx]
                                                .display_quality_metrics.length > 0">
                                            <div class="second_dimension_row"
                                                 ng-repeat="customeReportData in
                                                    metricValues.second_dimension[customeReportData.idx].display_quality_metrics | orderBy:sortType:sortReverse"
                                                 ng-include="'customeReportTpl'">
                                            </div>
                                            <span class="sec_dimension_load_more"
                                                  ng-click="fetchMoreSecondDimensionData($event, metricValues.first_dimension.display_quality_metrics[customeReportData.idx].value,customeReportData.idx, 1)"
                                                  ng-show="secDimensionLoadMore['display_quality_metrics'][customeReportData.idx]"
                                                  style="">
												<a href="javascript:void(0);">Load more</a>
                                        </span>
                                            <span class="sec_dimension_loadingIcon common-loading-area" style="margin-left:465px;"
                                                 ng-show="secDimensionLoadIcon['display_quality_metrics'][customeReportData.idx]"></span>
                                        </div>
                                        <span ng-if="secondDimensionReportDataNotFound['display_quality_metrics']
                                                [customeReportData.idx]"
                                              class="no-data-common"
                                              ng-bind-html="getMessageForDataNotAvailable()">
                                        </span>
                                        <!-- end of load more for second dimension -->
                                    </div>
                                    <!-- end of second dimension div-->
                                </div>
                            </div>
                        </div>
                        <div ng-if="fetching" class="common-load-more" style="margin-top: -40px"></div>
                    </div>
                    <div class="custom_report_response_table" id="video_quality_table" style="display:none;" ng-show="metricKeyArr.video_quality_metrics.length">
                        <div class="custom_report_scroll">
                            <div class="each_row heading_row">
                                <div class="inner_heading_row">
                                    <div class="each_col tree_dimension_col">{{reportTitle}}</div>
                                    <div class="each_col" ng-class="addReqClassToSort(vm.key,sortType,sortReverse)" ng-click="clickToSort(vm.key);"
                                         ng-repeat="vm in metricKeyArr.video_quality_metrics track by $index"
                                         ng-bind="vm.value">
                                    </div>
                                </div>
                            </div>
                            <div class="clearfix first_dimension_row_holder">
                                <div ng-if="reportDataLoading" class="common-load-more report-response-load">
                                    Generating Report...
                                </div>
                                <span ng-if="(!reportDataLoading && reportDataNotFound)"
                                      class="no-data-common"
                                      ng-bind-html="getMessageForDataNotAvailable()">
                                </span>
                                <div class="each_row reportData {{showhasBreakdown}}"
                                     data-result-row='{{customeReportData.idx}}'
                                     ng-repeat="customeReportData in metricValues.first_dimension.video_quality_metrics | orderBy:sortType:sortReverse">
                                    <div ng-include="'customeReportTpl'" class="heading_first_dimension"></div>
                                    <!-- second dimension div-->
                                    <div ng-show='secondDimensionReportLoading["video_quality_metrics"]
                                            [customeReportData.idx]'
                                         class="common-load-more">
                                    </div>
                                    <div class="clearfix second_dimension_row_holder">
                                        <div ng-if="!secondDimensionReportLoading['video_quality_metrics']
                                                [customeReportData.idx] && metricValues.second_dimension[customeReportData.idx]
                                                .video_quality_metrics.length > 0">
                                            <div class="second_dimension_row"
                                                 ng-repeat="customeReportData in
                                                    metricValues.second_dimension[customeReportData.idx].video_quality_metrics | orderBy:sortType:sortReverse"  ng-include="'customeReportTpl'">
                                            </div>
                                            <span class="sec_dimension_load_more"
                                                  ng-click="fetchMoreSecondDimensionData($event, metricValues.first_dimension.video_quality_metrics[customeReportData.idx].value,customeReportData.idx, 1)"
                                                  ng-show="secDimensionLoadMore['video_quality_metrics'][customeReportData.idx]"
                                                  style="">
												<a href="javascript:void(0);">Load more</a>
                                        </span>
                                            <span class="sec_dimension_loadingIcon common-loading-area" style="margin-left:465px;"
                                                 ng-show="secDimensionLoadIcon['display_quality_metrics'][customeReportData.idx]"></span>
                                        </div>

                                        <span ng-if="secondDimensionReportDataNotFound['video_quality_metrics']
                                                [customeReportData.idx]"
                                              class="no-data-common"
                                              ng-bind-html="getMessageForDataNotAvailable()">
                                        </span>
                                        <!-- end of load more for second dimension -->
                                    </div>
                                    <!-- end of second dimension div-->
                                </div>
                            </div>
                        </div>
                        <div ng-if="fetching" class="common-load-more" style="margin-top: -40px"></div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End of Custom Report Response Page -->
    </div>

    <script type="text/ng-template" id="customeReportTpl">
        <div class="each_col {{customeReportData.level === 'first_dimension' ?
                'more_dimension_arrow' :
                'tree_string'}}"
             ng-click="showDataForClikedDimension($event, customeReportData.value, $index); $event.stopPropagation();">
        </div>

        <!---- Dimension report data ------------------------>
        <div class="each_col tree_dimension_col {{customeReportData.level === 'first_dimension' ?
                'more_dimension_col' :
                ' '}}">
            <span ng-click="showDataForClikedDimension($event, customeReportData.value, $index); $event.stopPropagation();"
                  ng-if="customeReportData.value"
                  ng-bind="customeReportData.value" tooltip="{{customeReportData.value}}"></span>
        </div>

        <!----- Delivery report data ------------------------>
        <div class="each_col_delivery" ng-if="customeReportData.impressions>=-1"
             ng-bind="customeReportData.impressions == -1 ? 'NA' : (customeReportData.impressions | number:0)"></div>
        <div class="each_col_delivery" ng-if="customeReportData.clicks>=-1"
             ng-bind="customeReportData.clicks == -1 ? 'NA' : (customeReportData.clicks | number:0)"></div>
        <div class="each_col_delivery" ng-if="customeReportData.ctr>=-1"
             ng-bind="customeReportData.ctr == -1 ? 'NA' : (customeReportData.ctr | kpiFormatter:'ctr')"></div>
        <div class="each_col_delivery" ng-if="customeReportData.post_imp>=-1"
             ng-bind="customeReportData.post_imp == -1 ? 'NA' : (customeReportData.post_imp | nrFormat)"></div>
        <div class="each_col_delivery" ng-if="customeReportData.post_click>=-1"
             ng-bind="customeReportData.post_click == -1 ? 'NA' : (customeReportData.post_click | nrFormat)"></div>
        <div class="each_col_delivery" ng-if="customeReportData.pccr>=-1"
             ng-bind="customeReportData.pccr == -1 ? 'NA' : (customeReportData.pccr | number:2)"></div>
        <div class="each_col_delivery" ng-if="customeReportData.actions>=-1"
             ng-bind="customeReportData.actions == -1 ? 'NA' : (customeReportData.actions | nrFormat)"></div>
        <div class="each_col_delivery" ng-if="customeReportData.pub_payout>=-1"
             ng-bind="customeReportData.pub_payout == -1 ? 'NA' : (customeReportData.pub_payout | nrFormat)"></div>


        <!----- Cost report data ------------------------>
        <div class="each_col_cost" ng-if="customeReportData.ad_servicing_cost>=-1"
             ng-bind="customeReportData.ad_servicing_cost == -1 ? 'NA' : (customeReportData.ad_servicing_cost | number:0)">
        </div>
        <div class="each_col_cost" ng-if="customeReportData.ad_vertification_cost>=-1"
             ng-bind="customeReportData.ad_vertification_cost == -1 ? 'NA' : (customeReportData.ad_vertification_cost | number:0)"></div>
        <div class="each_col_cost" ng-if="customeReportData.collective_cost>=-1"
             ng-bind="customeReportData.collective_cost == -1 ? 'NA' : (customeReportData.collective_cost | number:0)">
        </div>
        <div class="each_col_cost" ng-if="customeReportData.creative_cost>=-1"
        ng-bind="customeReportData.creative_cost == -1 ? 'NA' : (customeReportData.creative_cost | nrFormat)">
        </div>
        <div class="each_col_cost" ng-if="customeReportData.data_cost>=-1"
             ng-bind="customeReportData.data_cost == -1 ? 'NA' : (customeReportData.data_cost | number:0)">
        </div>
        <div class="each_col_cost" ng-if="customeReportData.inventory_cost>=-1"
             ng-bind="customeReportData.inventory_cost == -1 ? 'NA' : (customeReportData.inventory_cost | number:0)">
        </div>
        <div class="each_col_cost" ng-if="customeReportData.gross_ecpm>=-1"
             ng-bind="customeReportData.gross_ecpm == -1 ? 'NA' : (customeReportData.gross_ecpm | number:2)"></div>
        <div class="each_col_cost" ng-if="customeReportData.gross_ecpc>=-1"
             ng-bind="customeReportData.gross_ecpc == -1 ? 'NA' : (customeReportData.gross_ecpc | number:2)"></div>
        <div class="each_col_cost" ng-if="customeReportData.platform_cost>=-1"
             ng-bind="customeReportData.platform_cost == -1 ? 'NA' : (customeReportData.platform_cost | number:0)">
        </div>
        <div class="each_col_cost" ng-if="customeReportData.research_cost>=-1"
             ng-bind="customeReportData.research_cost == -1 ? 'NA' : (customeReportData.research_cost | nrFormat)">
        </div>


        <!----- booked report data ------------------------
        <div class="each_col" ng-if="customeReportData.ad_count>=0">{{customeReportData.ad_count}}</div>
        <div class="each_col" ng-if="customeReportData.ad_start">{{customeReportData.ad_start}}</div>
        <div class="each_col" ng-if="customeReportData.ad_end">{{customeReportData.ad_end}}</div>
        <div class="each_col" ng-if="customeReportData.ad_days>=0">{{customeReportData.ad_days}}</div>
        <div class="each_col" ng-if="customeReportData.booked_impressions>=0">
        {{customeReportData.booked_impressions |  nrFormat}}</div>
        <div class="each_col" ng-if="customeReportData.booked_actual_imps>=0">
        {{customeReportData.booked_actual_imps |  nrFormat}}</div>
        <div class="each_col" ng-if="customeReportData.diff_impressions>=0">{{customeReportData.diff_impressions |  nrFormat}}</div>
        <div class="each_col" ng-if="customeReportData.delivered_imps>=0">{{customeReportData.delivered_imps |  nrFormat}}</div>
        <div class="each_col" ng-if="customeReportData.booked_rev>=0">{{customeReportData.booked_rev |  nrFormat}}</div>
        <div class="each_col" ng-if="customeReportData.gross_rev>=0">{{customeReportData.gross_rev |  nrFormat}}</div>
        <div class="each_col" ng-if="customeReportData.diff_rev>=0">{{customeReportData.diff_rev |  nrFormat}}</div>
        <div class="each_col" ng-if="customeReportData.booked_ecpm>=0">{{customeReportData.booked_ecpm | number:2}}</div>
        <div class="each_col" ng-if="customeReportData.actual_ecpm>=0">{{customeReportData.actual_ecpm | number:2}}</div>
        <div class="each_col" ng-if="customeReportData.booked_diff_ecpm>=0">{{customeReportData.booked_diff_ecpm | number:2}}</div>
        --->

        <!----- engagement report data ------------------------>
        <!--<div class="each_col" ng-if="customeReportData.inter>=0">{{customeReportData.inter |  nrFormat }}</div>
        <div class="each_col" ng-if="customeReportData.avg_inter_time>=0">{{customeReportData.avg_inter_time |  nrFormat}}</div>
        <div class="each_col" ng-if="customeReportData.ir_perc>=0">{{customeReportData.ir_perc | number:2}}</div>
        <div class="each_col" ng-if="customeReportData.avg_view_time>=0">{{customeReportData.avg_view_time |  nrFormat}}</div>-->

        <!----- video report data ------------------------>
        <div class="each_col" ng-if="customeReportData.ad_starts>=-1"
             ng-bind="customeReportData.ad_starts == -1 ? 'NA' : (customeReportData.ad_starts | number:0)">
        </div>
        <div class="each_col" ng-if="customeReportData.completion_25>=-1"
             ng-bind="customeReportData.completion_25 == -1 ? 'NA' : (customeReportData.completion_25 | number:0)">
        </div>
        <div class="each_col" ng-if="customeReportData.completion_50>=-1"
             ng-bind="customeReportData.completion_50 == -1 ? 'NA' : (customeReportData.completion_50 | number:0)">
        </div>
        <div class="each_col" ng-if="customeReportData.completion_75>=-1"
             ng-bind="customeReportData.completion_75 == -1 ? 'NA' : (customeReportData.completion_75 | number:0)">
        </div>
        <div class="each_col" ng-if="customeReportData.completion_100>=-1"
             ng-bind="customeReportData.completion_100 == -1 ? 'NA' : (customeReportData.completion_100 | number:0)">
        </div>
        <div class="each_col" ng-if="customeReportData.completion_rate>=-1"
             ng-bind="customeReportData.completion_rate == -1 ? 'NA' : (customeReportData.completion_rate | number:2)">
        </div>
        <div class="each_col" ng-if="customeReportData.video_full_screen>=-1"
             ng-bind="customeReportData.video_full_screen == -1 ? 'NA' : (customeReportData.video_full_screen | nrFormat)">
        </div>
        <div class="each_col" ng-if="customeReportData.mutes>=-1"
             ng-bind="customeReportData.mutes == -1 ? 'NA' : (customeReportData.mutes | nrFormat)">
        </div>
        <div class="each_col" ng-if="customeReportData.pauses>=-1"
             ng-bind="customeReportData.pauses == -1 ? 'NA' : (customeReportData.pauses | number:0)">
        </div>
        <div class="each_col" ng-if="customeReportData.vast_redirect_errors>=-1"
             ng-bind="customeReportData.vast_redirect_errors == -1 ? 'NA' : (customeReportData.vast_redirect_errors | nrFormat)">
        </div>

        <!----- Quality Display report data ------------------------>
        <div class="each_col" ng-if="customeReportData.display_delivered_imps>=-1"
             ng-bind="customeReportData.display_delivered_imps == -1 ? 'NA' : (customeReportData.display_delivered_imps | number:0)">
        </div>
        <div class="each_col" ng-if="customeReportData.display_measurable_imps>=-1"
             ng-bind="customeReportData.display_measurable_imps == -1 ? 'NA' : (customeReportData.display_measurable_imps | number:0)">
        </div>
        <div class="each_col" ng-if="customeReportData.display_measurable_perc>=-1"
             data-ng-bind="customeReportData.display_measurable_perc == -1 ? 'NA' : (customeReportData.display_measurable_perc | number:0)+'%'">
        </div>
        <div class="each_col" ng-if="customeReportData.display_viewable_imps>=-1"
             ng-bind="customeReportData.display_viewable_imps == -1 ? 'NA' : (customeReportData.display_viewable_imps | number:0)">
        </div>
        <div class="each_col" ng-if="customeReportData.display_viewable_perc>=-1"
             data-ng-bind="customeReportData.display_viewable_perc == -1 ? 'NA' : (customeReportData.display_viewable_perc | number:0) + '%'">
        </div>
        <div class="each_col" ng-if="customeReportData.display_viewable_imps_5s>=-1"
             ng-bind="customeReportData.display_viewable_imps_5s == -1 ? 'NA' : (customeReportData.display_viewable_imps_5s | number:0)">
        </div>
        <div class="each_col" ng-if="customeReportData.display_viewable_imps_15s>=-1"
             ng-bind="customeReportData.display_viewable_imps_15s == -1 ? 'NA' : (customeReportData.display_viewable_imps_15s | number:0)">
        </div>
        <div class="each_col" ng-if="customeReportData.display_suspicious_imps>=-1"
             ng-bind="customeReportData.display_suspicious_imps | number:0">
        </div>
        <div class="each_col" ng-if="customeReportData.display_suspicious_act_perc>=-1"
             ng-bind="customeReportData.display_suspicious_act_perc == -1 ? 'NA' : (customeReportData.display_suspicious_act_perc | number:2)">
        </div>

        <!----- Quality Video report data ------------------------>
        <div class="each_col" ng-if="customeReportData.video_viewable_imps>=-1"
             ng-bind="customeReportData.video_viewable_imps == -1 ? 'NA' : (customeReportData.video_viewable_imps | number:0)">
        </div>
        <div class="each_col" ng-if="customeReportData.video_completion_25>=-1"
             ng-bind="customeReportData.video_completion_25 == -1 ? 'NA' : (customeReportData.video_completion_25 | number:0)">
        </div>
        <div class="each_col" ng-if="customeReportData.video_completion_50>=-1"
             ng-bind="customeReportData.video_completion_50 == -1 ? 'NA' : (customeReportData.video_completion_50 | number:0)">
        </div>
        <div class="each_col" ng-if="customeReportData.video_completion_75>=-1"
             ng-bind="customeReportData.video_completion_75 == -1 ? 'NA' : (customeReportData.video_completion_75 | number:0)">
        </div>
        <div class="each_col" ng-if="customeReportData.video_completion_100>=-1"
             ng-bind="customeReportData.video_completion_100 == -1 ? 'NA' : (customeReportData.video_completion_100 | number:0)">
        </div>
        <div class="each_col" ng-if="customeReportData.video_viewable_25>=-1"
             ng-bind="customeReportData.video_viewable_25 == -1 ? 'NA' : (customeReportData.video_viewable_25 | number:0)">
        </div>
        <div class="each_col" ng-if="customeReportData.video_viewable_50>=-1"
             ng-bind="customeReportData.video_viewable_50 == -1 ? 'NA' : (customeReportData.video_viewable_50 | number:0)">
        </div>
        <div class="each_col" ng-if="customeReportData.video_viewable_75>=-1"
             ng-bind="customeReportData.video_viewable_75 == -1 ? 'NA' : (customeReportData.video_viewable_75 | number:0)">
        </div>
        <div class="each_col" ng-if="customeReportData.video_viewable_100>=-1"
             ng-bind="customeReportData.video_viewable_100 == -1 ? 'NA' : (customeReportData.video_viewable_100 | number:0)">
        </div>
        <div class="each_col" ng-if="customeReportData.video_suspicious_imps>=-1"
             ng-bind="customeReportData.video_suspicious_imps == -1 ? 'NA' : (customeReportData.video_suspicious_imps |  number:0)">
        </div>
    </script>

    <div class="common-popup-container" ng-show="updateSchedule">
        <div class="popup">
            <div class="popup-header-body">
                <div class="clearfix">
                    <h1 ng-show="scheduleReportActive == false" class="pull-left" ng-bind="textConstants.SAVED_UPDATE" ></h1>
                    <h1 ng-show="scheduleReportActive === true" class="pull-left" ng-bind="textConstants.SCHEDULER_UPDATE"></h1>
                    <span class="close unselectable" aria-hidden="true" ng-click="updateSchedule=false">x</span>
                </div>
                <div class="popup-content" ng-bind="archiveMessage"></div>
            </div>
            <div class="clearfix popup-footer">
                <div type="button"
                     ng-click="updateReportAndRedirect('Yes')"
                     class="common_primary_btn pull-right">
                    Yes
                </div>
                <button type="button"
                        ng-click="updateReportAndRedirect('No')"
                        class="secondary_txt pull-right">
                    No
                </button>
            </div>
        </div>
    </div>
</div>
