<!-- tactics section started -->
<div class="endOfRow"></div>
<div id="tactics-accordion-{{strategy.id}}" class="tactics_outer_container">

  <div class="each_tactics_holder" ng-repeat="tactic in strategy.strategyTactics">

    <div class="clearfix each_tactics_container">
        <div  class="panel-collapse collapse in pull-right">
            <div class="panel-body row-fluid">
                <div class="col-md-12">
                    <div class="col-md-1">
                        <div>
                            <span class="{{tactic.status | toTitleCase}}"></span>
                            <div><span class="marg-10"> {{tactic.status | toTitleCase}}</span>
                            </div>
                        </div>
                        <div class="marg-top-style">
                            <span style="{{tactic.platform_icon | platformIconCss : assets.platform_icon}}"></span>
                            <div><span class="marg-10" ng-if="tactic.platform_name">{{tactic.platform_name}}</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <span class="campaign-name"> {{tactic.name | truncateString : 78}}</span>
                        <div class="inner-accordion-details">
                            <div>
                                <span class="audience-icon"></span>
                                <span> {{(tactic.audience_targeting? (tactic.audience_targeting | truncateString : 78) : '[...]')}}</span>
                            </div>
                            <div>
                                <span class="globe-icon"></span>
                                <span> {{(tactic.geo_targeting? (tactic.geo_targeting | truncateString : 78) : '[...]')}}</span>
                            </div>
                            <div>
                                <span class="location-icon"></span>
                                <span>{{(tactic.zip_targeting? (tactic.zip_targeting | truncateString : 65) : '[...]')}}</span>
                            </div>
                            <div class="duration">
                                <span class="device-icon"></span>
                                <span>{{(tactic.ad_size ? (tactic.ad_size | truncateString : 50) :'[...]')}}</span>
                            </div>
                        </div>
                        <div class="inner-accordion-duration">
                            <div class="duration">
                                <span class="date">
                                {{tactic.startDate | date :'d MMM y' }}
                                    -
                                {{tactic.endDate | date :'d MMM y' }}
                                </span>
                                <div class="duration-bar">
                                    <div class="progress">
                                        <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: {{campaigns.durationCompletion(tactic)}}%;">
                                        </div>
                                    </div>
                                    <div class="days-left" ng-switch on="campaigns.durationLeft(tactic)">
                                        <span ng-switch-when="0">Yet to start</span>
                                        <span ng-switch-when="-1">Ended</span>
                                    <span ng-switch-default>
                                      <span class="day-count bold">{{campaigns.durationLeft(tactic)}}</span> Days Left
                                    </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-7">
                        <div class="col-md-6">
                            <div class="row-fluid">
                                <div class="col-md-6 text_left">
                                    Spend
                                </div>
                                <div class="col-md-6">
                                    <div class="imps">Imps.</div>
                                    <div class="imps-count">{{tactic.totalImpressions | number}}</div>
                                </div>

                            </div>
                            <div class="row-fluid">
                                <div class="col-md-6">
                                    <div class="ctr-container {{$parent.getSpendClassForStrategy(tactic)}}">
                                        <div class="blue margin-twenty">
                                            ${{tactic.grossRev | number : 2}}
                                        </div>
                                        <div class="blue">
                                            {{$parent.getSpendDiffForStrategy(tactic)}}%
                                        </div>
                                        <div class="progress">
                                            <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: {{$parent.getSpendWidthForStrategy(tactic)}}%;">
                                                <span class="sr-only">100% Complete</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="marg-10">CTR</div>
                                    <div class="ctr-value"> {{tactic.ctr | roundThisOff : 2}}% </div>
                                </div>
                            </div>
                            <div class="row-fluid">
                                <div class="col-md-12">
                                    <div class="pull-right">
                                        Action Rate
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <span class="goal-image"></span>
                                    <span class="action-data">${{tactic.expectedMediaCost | number : 0}}</span>
                                </div>
                                <div class="col-md-6">
                                    <span class="action-data">{{tactic.actionRate | roundThisOff : 2}}%</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="row-fluid">
                                <div class="col-md-2 kpi-text-container">
                                    <span class="cpa-color">{{campaign.kpiType ? campaign.kpiType : 'NA'}}</span>
                                </div>
                                <div class="col-md-10 kpi-values">
                                    <span class="cumulative-text"> Cumulative Value </span>
                                    <span class="bold"> {{tactic.map[campaign.kpiType.toLowerCase()] | kpiFormatter:campaign.kpiType}}</span>
                                    <div>
                                        <span class="kpi-goal"></span>
                                        <span class="bold">{{campaign.kpiValue | kpiFormatter:campaign.kpiType}}</span>
                                    </div>
                                </div>
                            </div>
                            <div class="row-fluid">
                                <div class="col-md-12" style="padding: 0;">
                                    <div class="highcharts" ng-if="!tactic.chart || !campaign.kpiType">
                                        <span class="strategies-no-chart">Data Not Available</span>
                                    </div>
                                    <div class="highcharts" ng-if="tactic.chart && campaign.kpiType">
                                        <highchart id="highcharts-strategies" config="tactic.chart" chartTitle=""></highchart>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

  </div>
    <div ng-if='strategy.strategyTacticsLoadMore.length' class="load-more-strategies"><a ng-click="loadMoreTactics(strategy.id, campaign.orderId)"> Load More Tactics</a></div>
</div>

<!-- end of tactics section  -->
