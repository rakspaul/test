!!!
%html
  %head
    %meta{:charset => "utf-8"}
    %title= content_for?(:title) ? yield(:title) : "Reach UI"
    %meta{:content => "Collective Reach UI", :name => "description"}
    %meta{:content => "Collective", :name => "author"}

    = stylesheet_link_tag    "application", :media => "all"
    = javascript_include_tag "application"
    = csrf_meta_tags
    = yield(:head)
  %body
    .app_header#app_header
      .navbar
        .navbar-inner
          %a.brand{:href => "#"}
            = image_tag "cm_logo.jpg"

          %ul.nav
            - ApplicationHelper::APP_NAVIGATION_BAR.each do |key, value|
              %li{:class => ("active" if value[:controllers].include?(controller.class.name))}
                = link_to key, value[:path]

          %ul.nav.pull-right
            %li.user-info
              %span
                = current_network.name
                %br
                = current_user.first_name
                = current_user.last_name
                (
                = current_user.account_login
                )
            %li
              = link_to "Signout", signout_path
    .breadcrumbs#breadcrumbs
      = render_crumbs separator: "&nbsp;&nbsp;/&nbsp;&nbsp;".html_safe , last_crumb_linked: false

    .app_content
      = yield

:javascript
  $(document).ready(function() {
  // If application is loaded in IFrame then hide the header (Flex loads this application in IFrame).
    var isInIFrame = (window.location != window.parent.location) ? true : false;
    if(isInIFrame)
      $('#app_header').hide();
      $('#breadcrumbs').hide();
  });