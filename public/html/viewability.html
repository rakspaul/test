<div class="reports_main_page_holder">
<div class="reports_header_tabs_holder clearfix">
	<div class="pull-left breadcrumb_campaign"><a href="#/campaigns/{{selectedCampaign.id}}">Campaign Details</a></div>
    <div class="pull-left">
        <span ng-repeat="tab in filters.tabs" ng-class="{'active_tab': tab.href == filters.activeTab }"><a
                ng-href="#/{{tab.href}}" id="viewability_title_tab_{{tab.href}}" > {{tab.title}}</a></span>
    </div>
</div>

<div class="inventory_reports_container">

    <div class="clearfix inventory_header">
        <div class="pull-left dropdown dropdown_type1" id="viewability_camp_list_dd">
            <!--<large-list-search selected-obj=selectedCampaign></large-list-search>-->
            <campaign-drop-down selected-obj=selectedCampaign> </campaign-drop-down>
        </div>

        <div class="pull-right download_report">

            <div class="dropdown" id="viewability_filter_dd">
                    <span class="dropdown_ul_text " data-toggle="dropdown">
                        <a class="download_anchor" href="" id="viewability_download_btn">Download Report
                        </a>
                    </span>

                <ul class="dropdown_ul dropdown-menu" id="viewablity_download">

                    <li value="tactics"><a id="viewability_tactic" ng-if="download_urls.tactics" class="download_anchor"
                                           ng-click="downloadViewabilityReport(download_urls.tactics, 'by_tactic')">Viewability by Tactic</a></li>
                    <li value="domains"><a id="viewability_domain" ng-if="download_urls.domains" class="download_anchor"
                                           ng-click="downloadViewabilityReport(download_urls.domains, 'by_domain')">Viewability by Domain</a></li>
                    <li value="publishers"><a id="viewability_publisher" ng-if="download_urls.publishers" class="download_anchor"
                                              ng-click="downloadViewabilityReport(download_urls.publishers, 'by_publisher')">Viewability by Publisher</a></li>
                    <li value="exchanges"><a id="viewability_exchange" ng-if="download_urls.exchanges" class="download_anchor"
                                             ng-click="downloadViewabilityReport(download_urls.exchanges, 'by_exchange')">Viewability by Exchange</a></li>
                </ul>
            </div>

        </div>
        <!--<div class="pull-right dropdown dropdown_type3" id="viewability_lifetime_dd">-->
            <!--<report-filters selected-filter="selected_filters.time_filter_text" list-object="filters.duration"-->
                            <!--flag="duration"></report-filters>-->
        <!--</div>-->
    </div>
    <div id="viewability_strategies_dd">
        <strategy-drop-down selected-obj=selectedStrategy ></strategy-drop-down >
        <!--<strategy-list selected-obj=selectedStrategy list-columns="strategies"></strategy-list>-->
    </div>


    <div class="viewability_details_outer_container">
        <div class="viewability_header clearfix">
            <!-- <div class="each_col first_col">
                <span>Tactic</span>
            </div> -->
            <div class="each_col sec_col">
                <span>Impressions</span>

                <div class="sub_col">
                    <span>Delivered</span>
                    <!--<span>Total</span>-->
                </div>
            </div>
            <div class="each_col third_col">
                <span>Measurable</span>

                <div class="sub_col">
                    <span>Imps.</span>
                    <span>%</span>
                </div>
            </div>
            <div class="each_col forth_col">
                <span>Viewable</span>

                <div class="sub_col">
                    <span>Imps.</span>
                    <span class="tootip_holder">
                        %<sup>*</sup>
                        <div class="common_tooltip">Based only on Measurable Imps</div>
                    </span>
                </div>
            </div>
            <div class="each_col fifth_col">
                <span>Viewable %</span>

                <div class="sub_col">
                    <span>1s</span>
                    <span>5s</span>
                    <span>15s</span>
                </div>
            </div>
            <div class="each_col suspicious_col">
                <span> Suspicious Activity</span>
                <span>(%)</span>
            </div>
            <div class="each_col seventh_col">

                <div class="dropdown">
                    <kpi-drop-down selected-obj=selected_filters> </kpi-drop-down>
                    <!--<report-filters selected-filter="selected_filters" list-object="filters.kpiTypes"-->
                                    <!--flag="kpitypes"></report-filters>-->
                </div>


            </div>
        </div>
        <div >
          <div class="no_data_found" ng-if="(dataNotFound || !strategyFound) && !strategyBusy && !viewabilityBusy  ">
            Data Not Available
          </div>
        <div class="strategy_total_container " >
          <div class="common-load-icon_viewability" id="strategy_activityLoader" ng-show="strategyBusy || viewabilityBusy"></div>

          <div class="strategy_total_container_header clearfix"  ng-if=" !dataNotFound && strategyFound && viewData.view_metrics ">

                <div class="each_col first_col">
                    Strategy total:
                </div>

                <div class="each_col sec_col">
                                    <div class="sub_col">
                                        <span>{{viewData.view_metrics.delivered_imps | number:0}}</span>
                                    </div>
                </div>
                <div class="each_col third_col">
                    <div class="sub_col">
                        <span> {{viewData.view_metrics.measurable_imps | number:0}}</span>
                        <span>{{viewData.view_metrics.perc_measurable | number:0}}%</span>
                    </div>
                </div>
                <div class="each_col forth_col">
                    <div class="sub_col">
                        <span> {{viewData.view_metrics.viewable_imps | number:0}}</span>
                        <span>{{viewData.view_metrics.perc_viewable | number:0}}%</span>
                    </div>
                </div>
                <div class="each_col fifth_col">
                    <div class="sub_col">
                        <span>{{viewData.view_metrics.perc_viewable_imps_1s | number:0}}%</span>
                        <span>{{viewData.view_metrics.perc_viewable_imps_5s | number:0}}%</span>
                        <span>{{viewData.view_metrics.perc_viewable_imps_15s | number:0}}%</span>
                    </div>
                </div>
                <div class="each_col suspicious_col">
                    {{viewData.view_metrics.nht | number: number:2}}%
                </div>
                <div class="each_col seventh_col">
                    {{viewData.view_metrics[selected_filters.kpi_type.toLowerCase()] | appendDollor:
                    selected_filters.kpi_type}}
                </div>
            </div>
          <div class="common-load-icon_viewability" id="tactics_activityLoader" ng-show="tacticBusy"></div>
            <div class="all_strategies_holder">
                <div class="each_strategy_holder clearfix" ng-repeat="tactic in viewData.tacticsList">
                    <!-- <div class="linkage_lines">
                    </div> -->
                    <div class="each_strategy clearfix">
                        <div class="each_col first_col" title="{{tactic.tactic_name}}">
                            {{tactic.tactic_name}}
                            <!--<div class="campaign_spec">(18-23 y.o.)</div>-->
                        </div>
                        <div class="each_col sec_col">
                            <div class="sub_col">
                                <span>{{tactic.view_metrics.delivered_imps | number:0}}</span>
                                </div>
            <!--                <div class="graph_col">
                                <div class="full_graph_line">
                                    <div class="filled_graph_line fully_filled"
                                         style="width:{{ tactic.view_metrics.delivered_imps | calculatePerc : tactic.view_metrics.total_imps }}px;">
                                    </div>
                                </div>
                                <div class="clearfix graph_end_points">
                                    <span>{{tactic.view_metrics.delivered_imps | number:0}}</span>
                                    <span>{{tactic.view_metrics.total_imps| number:0}}</span>
                                </div>
                            </div>-->
                        </div>
                        <div class="each_col third_col">
                            <div class="sub_col">
                                <span> {{tactic.view_metrics.measurable_imps | number:0}}</span>
                                <span>{{tactic.view_metrics.perc_measurable| number:0}}%</span>
                            </div>
                        </div>
                        <div class="each_col forth_col">
                            <div class="sub_col">
                                <span> {{tactic.view_metrics.viewable_imps| number:0}}</span>
                                <span>{{tactic.view_metrics.perc_viewable | number:0}}%</span>
                            </div>
                        </div>
                        <div class="each_col fifth_col">
                            <div class="sub_col">
                                <span>{{tactic.view_metrics.perc_viewable_imps_1s | number:0}}%</span>
                                <span>{{tactic.view_metrics.perc_viewable_imps_5s | number:0}}%</span>
                                <span>{{tactic.view_metrics.perc_viewable_imps_15s | number:0}}%</span>
                            </div>
                        </div>
                        <div class="each_col suspicious_col">
                            {{tactic.view_metrics.nht | number: number:2}}%
                        </div>
                        <div class="each_col seventh_col">
                            {{tactic.view_metrics[selected_filters.kpi_type.toLowerCase()] | appendDollor:
                            selected_filters.kpi_type}}
                        </div>
                    </div>
                </div>
            </div>

        </div>
      </div>
    </div>
</div>
</div>
