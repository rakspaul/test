<div ng-repeat="strategy in campaign.campaignStrategies track by $index"  class="strategy_tactic_holder">
    <div class="clearfix each_campaign_list_container only_strategy_container">
	    <div class="each_campaign_section">
	       <div class="campaign_status_icon {{strategy.li_status.toLowerCase()}}_campaign_status_icon" tooltip-placement="left" tooltip="{{strategy.li_status.toLowerCase() | toCamelCase}}"></div>

        </div>
        <div class="each_campaign_section campaign_list_details">
            <div class="strategy_heading">Strategy</div>
            <div class="main_heading">
                <truncate-text-with-hover txt="{{strategy.name}}" txtlength="75"></truncate-text-with-hover>
                <!--<span dynamic-tooltip="{{strategy.name}}" tooltip-element="searchElement" txt="{{strategy.name}}" txtLength="75"></span>-->
            </div>
            <div class="heading">
                {{campaign.brandName}}
            </div>
            <div class="days_left_holder">
                <div class="total_days_holder">
                    
                    <div class="clearfix days_end_points">
                            <span class="start_end">{{strategy.startDate | date :'d MMM y' }}</span>
                            <span class="finish_end">{{strategy.endDate | date :'d MMM y' }}</span>
                    </div>
                    <div ng-init="duration_s = strategy.durationLeft()"></div>
                    <div class="days_over" ng-style="{'width':strategy.durationCompletion() +'%'};">
                        <span ng-if="duration_s == 'Yet to start'"  class="days_over_text start_text">Yet to start</span>
                        <span ng-if="duration_s == 'Ended'" class="days_over_text ended_text" >Ended</span>
                        <span ng-if="duration_s > 0"   class="days_over_text">{{duration_s}} Days Left</span>
                    </div>
                    <div ng-if="duration_s == 'Started today'" class="days_not_over_text start_text">Started today</div>
                    <div ng-if="duration_s == 'Ending today'" class="days_not_over_text ended_text" >Ending today</div>
                </div>
            </div>
            <div class="clearfix campaigns_list_buttons_holder">
                <div class="pull-left clearfix tactics_open_btn" ng-click="showTactics(strategy.id, strategy.tactics_count)">
                    <div class="pull-left open_icon">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                    <div class="pull-left">{{strategy.tactics_count}} {{(strategy.tactics_count == 0 || strategy.tactics_count > 1)? "Tactics" : "Tactic" }}</div>
                </div>
                <a ><!--  href="/#/performance" -->
                    <div class="campaign_btn reports_btn" ng-click="$parent.$parent.viewReports(campaign, strategy)">
                        View Report
                    </div>
                </a> 
                <a  ng-click="$parent.$parent.setActivityButtonData(campaign, strategy)" href="/#/optimization" >
                    <div class="campaign_btn actions_btn" >
                        <span>Activity</span>
                        <!--<span class="actions_done">10</span> -->
                    </div>
                </a>
            </div>
        </div>
        <div class="each_campaign_section metric_campaign_section">
            <div class="clearfix metric_graph_header">
                <span class="metric_title">Spend</span>
                <span class="metric_val">${{strategy.grossRev | number : 2}}</span>
            </div>
            <div class="metric_graph {{getSpendClassForStrategy(strategy)}}">
                  <div class="full_metric_graph">
                      <div class="selected_graph {{(getSpendWidthForStrategy(strategy) >= 100) ? 'completely_filled' : ''}} " ng-style="{'width':getSpendWidthForStrategy(strategy) +'%'};"> <!-- put completely_filled when 100% -->
                      </div>
                      <div class="graph_start_point {{(getSpendTickWidthForStrategy(strategy) <= 0) ? 'start_beginning' : ''}} {{(getSpendTickWidthForStrategy(strategy) >= 100) ? 'start_end_point' : ''}}" ng-style="{'left':getSpendTickWidthForStrategy(strategy) +'%'};"><!-- put start_beginning when at start -->
                          <div class="end_point_val">
                              <span class="icon_KPI"> ${{strategy.expectedMediaCost | number:2}}</span>
                              <div class="end_point_line"></div>
                          </div>
                      </div>
		      <div class="graph_end_point completed_end_point " ng-hide="strategy.expectedMediaCost == strategy.totalMediaCost">
			  <!-- put completed_end_point when at end -->
                          <div class="end_point_val">
                              <div class="end_point_line"></div>
                              <span>${{strategy.totalMediaCost | number:2}}</span>
                          </div>
                      </div>
                  </div>
              </div>
            <div class="clearfix metric_graph_details">
                <div class="each_metric_graph_details">
                    <span class="detail_val">{{strategy.totalImpressions | number}}</span>
                    <span>Imps.</span>
                </div>
                <div class="each_metric_graph_details">
                    <span class="detail_val">{{strategy.ctr | roundThisOff : 2}}% </span>
                    <span>CTR</span>
                </div>
                <div class="each_metric_graph_details">
                    <span class="detail_val">{{strategy.actionRate | roundThisOff : 2}}%</span>
                    <span>Action Rate</span>
                </div>
            </div>
        </div>
        <div class="each_campaign_section campaign_section_KPI">
            <div class="graph_details_KPI">
                <div class="clearfix details_KPI_row1">
                    <span class="details_KPI_title">{{campaign.kpiType!='null' ?  campaign.kpiType : 'NA' | toUpperCase}}</span>
                    <span class="cumulative_val">
                        Cumulative Value <span>{{strategy.map[campaign.kpiType.toLowerCase()] | kpiFormatter:campaign.kpiType:1}}</span>
                    </span>
                </div>
                <div class="clearfix details_KPI_row2" ng-if="campaign.kpiValue">
                    <span>{{campaign.kpiValue | kpiFormatter:campaign.kpiType}}</span>
                    <span class="icon_KPI"></span>
                </div>
                <div class="clearfix details_KPI_row2" ng-if="!campaign.kpiValue">
                    </br>
                </div>
            </div>
            <div class="graph_KPI_outer_holder">
              <span ng-switch="strategy.chart">
                <span ng-switch-when="true" class="no-chart load-more">&nbsp;</span>
                <span ng-switch-when="false" class="no-chart">{{getMessageForDataNotAvailable(campaign)}}</span>
                <span ng-switch-default>
                    <div ng-if="(strategy.chart && campaign.kpiType)" class="graph_KPI_holder" >
                        <highchart class="graph_KPI_holder" config="strategy.chart" chartTitle=""></highchart>
                    </div>
                    <div ng-if="!(strategy.chart && campaign.kpiType)" class="graph_KPI_holder">
                        {{getMessageForDataNotAvailable(campaign)}}
                    </div>

                </span>
              </span>
          </div>
        </div>
    </div>

    <!-- tactics section started  -reusing the campaign and tactics partial view -->
    <div campaign-tactics-card campaign="campaign" campaigns="campaigns" strategy="strategy"></div> 
     <!-- end of tactics -->

</div>
<div ng-if='campaign.campaignStrategiesLoadMore.length' class="load-more-strategies"><a ng-click="loadMoreStrategies(campaign.orderId)"> Load More Strategies</a></div>
