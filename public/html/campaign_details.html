<div class="main_container">

  <div id="campaignDetail" class="dashboard_outer_container campaign_details_page "> <!-- container -->
                  <div class="clearfix campaign_details_header">
                      <div class="pull-left campaign_name">
                         <truncate-text-with-hover txt="{{campaign.campaignTitle}}" txtlength="120"></truncate-text-with-hover>
                          <div class="sub_title"> 
                              {{campaign.brandName}}
                          </div>
                      </div>
                      <a  id="details_view_report" ng-click="setGraphData(campaign,'view_report')">
                        <div class="pull-right view_report">
                            {{textConstants.VIEW_REPORT}}
                        </div>
                      </a>
                  </div>

                <div ng-show="is_network_user">
                    <!-- action filter -->
                    <form  ng-controller="ActionsController" id="crActivityForm" >
                        <div class="action_filter_holder">
                            <div class="heading">
                                {{textConstants.CREATE_ACTIVITY}}
                            </div>
                            <span id="activityMessage" ng-style="action.disableTagButton">{{textConstants.ACTIVITY_CREATED_SUCCESSFULLY_VIEW_ACTIVITY_LOG}}</span>
                            <div class="clearfix filter_holder">
                                <div class="filter_dropdown">
                                     <multiselect class="input-xlarge" multiple="false"  class="myerror" multipleoption="false" acceptmultiple="0" defaultoption='- Action Type -'  ng-model="action.selectedType" options="type.name for type in action.types | orderBy:'name'" change="selected()" id="action_type_filter_dd" datashow="1" ng-click="resetValidation();" ng-change="getActionType()" ></multiselect>
                                    <div  ng-show="action.selectedTypeError" id="error_activity" class="error_message">{{ textConstants.SELECT_ITEM_IN_LIST }}</div>
                                    <div ng-show="enableSubTypePopup" id="error_subtype"  class="error_message">{{ textConstants.SELECT_ITEM_IN_LIST }}</div>
                               </div>
                                <div class="filter_dropdown select_all_filter_dropdown">
                                     <multiselect class="input-xlarge"  multiple="true"  multipleoption="true" acceptmultiple="1"  displaySelectAllOPtion="true" defaultoption='- Action Sub Type -' ng-model="action.selectedSubType" options="subType.name for subType in action.selectedType.subTypes | orderBy:'name'" change="selected()" id="action_sub_type_dd" datashow="2" ng-click="resetValidation();getSubType();showDropdownList()" maxcharacter="20"></multiselect>
                                      <div ng-show="action.selectedSubTypeError" id="error_subtype"  class="error_message">{{ textConstants.SELECT_ITEM_IN_LIST }}</div>
                               </div>
                                <div class="filter_dropdown select_all_filter_dropdown">
                                    <multiselect class="input-xlarge" multiple="true"  multipleoption="true" acceptmultiple="1"  defaultoption='- Tactic -'  ng-model="tactics.selected" options="tactic.name for tactic in tactics.all | orderBy:'name'" change="selected()" id="action_tactic_dd" datashow="3" ng-click="resetValidation();getTactic()" maxcharacter="20"></multiselect>
                                    <div ng-show="action.selectedTacticError" id="error_tactic" class="error_message">{{ textConstants.SELECT_ITEM_IN_LIST }}</div>
                                </div>
                                <div class="filter_dropdown metric_selected_filter_dropdown">
                                     <multiselect class="input-xlarge" multiple="false"    multipleoption="false" acceptmultiple="0"    defaultoption='- Metric Impacted -'  ng-model="metrics.selected" options="metric for metric in metrics.all" change="selected()" id="action_metric_dd" datashow="4" ng-click="resetValidation();" ></multiselect>

                                    <div ng-show="action.selectedMetricError" id="error_metric" class="error_message">{{ textConstants.SELECT_ITEM_IN_LIST }}</div>
                               </div>
                                <div class="pull-right external_chkbox">
                                    <div class="external_chkbox clearfix">
                                      <div class="squaredFour">
                                        <input type="checkbox" ng-model="action.external" class="squaredFourChkbox" id="details_squaredFour"  />
                                        <label for="details_squaredFour"></label>
                                      </div>
                                      <span class="squaredFourTxt">{{ textConstants.EXTERNAL }}</span>
                                    </div>
                                </div>
                            </div>
                            <div class="clearfix submit_activity_holder">
                                <div class="pull-left comment_area">
                                    <textarea  ng-model="action.name"   placeHolder="Leave a Comment" id="action_comment" ng-focus="resetValidation()" maxChar="160" maxLine="2"></textarea>


                                 <div ng-show="action.nameError" id="error_comment" class="error_message">{{ textConstants.PLEASE_FILL_OUT_FIELD }}</div>
                                 <div  id="error_more_comment" class="error_message"></div>
                                 </div>
                                <div class="pull-right submit_btn_holder">
                                    <input type="button" class="submit_btn" value="Submit" ng-disabled="action.submitBtnDisabled" id="action_submit_btn" ng-click="createAction()" >
                                </div>
                            </div>
                        </div>
                      </form>
                      <!-- end of action filter -->
                </div>
                

                <!--activity log-->
                <div class="clearfix activity_log_holder" ng-controller="editActionsController" >
                <!--edit popup-->
                <!-- edit activity log container -->
                <div ng-controller="editActionsController" class="edit_activity_log_holder" ng-show="showList.show">
                  <form ng-submit="editAction()" >
                    <div class="action_filter_holder" ng-click="$event.stopPropagation()">
                          <div class="heading">
                              {{ textConstants.EDIT_ACTIVITY }}<span style="color:red">{{editError}}</span>
                          </div>
                          <div class="clearfix filter_holder">
                              <div class="pull-left filter_dropdown_sel_list">
                                  <span class="filter_dropdown_sel_txt">
                                    <truncate-text-with-hover txt="{{showList.actionType}}" txtlength="30"> </truncate-text-with-hover>
                                  </span>
                                  <span class="filter_dropdown_sel_txt">
                                    <truncate-text-with-hover txt="{{showList.actionSubtype}}" txtlength="30"></truncate-text-with-hover>
                                  </span>
                                  <span class="filter_dropdown_sel_txt">
                                     <truncate-text-with-hover txt="{{showList.tactic}}" txtlength="30"></truncate-text-with-hover>
                                  </span>
                                  <span class="filter_dropdown_sel_txt">
                                    {{ textConstants.IMPACTS }}: <truncate-text-with-hover txt="{{showList.metricImpacted}}" txtlength="30"></truncate-text-with-hover>
                                  </span>
                              </div>
                              <div class="pull-right external_chkbox">
                                  <div class="external_chkbox clearfix">
                                    <div class="squaredFour">
                                      <input type="checkbox" ng-model="showList.makeExternal" class="squaredFourChkbox" id="edit_details_squaredFour"  onclick="updateSaveBtnStatus()" />
                                      <label for="edit_details_squaredFour"></label>
                                    </div>
                                    <span class="squaredFourTxt">{{ textConstants.EXTERNAL }}</span>
                                  </div>
                              </div>
                          </div>
                          <div class="clearfix submit_activity_holder">
                              <div class="pull-left comment_area">
                                  <textarea  ng-model="showList.name"  ng-bind-html="showList.name|removeSpecialCharacter"   placeHolder="Leave a Comment" id="edit_action_comment" maxChar="160" maxLine="2" ng-focus="resetEditActionValidation()"> </textarea>
                                  <div ng-show="commentError" id="edit_error_comment" class="error_message">{{ textConstants.PLEASE_FILL_OUT_FIELD }}</div>
                                  <div  id="error_edit_action_more_comment" class="error_message"></div>
                              </div>
                              <div class="pull-right submit_btn_holder clearfix">
                                  <span class="pull-left secondary_button" ng-click="closeEdit();">{{ textConstants.CANCEL }}</span>
                                  <input type="submit" class="pull-right submit_btn primary_button" value="Save" ng-disabled="saveBtnDisabled" id="action_save_btn">
                                  <input type="hidden" id="hidden_checkbox_status" ng-value="showList.hidden_checkboxStatus" />
                                  <input type="hidden" id="hidden_comments" ng-value="showList.hidden_name" >
                                  <input type="hidden" id="filterByActivityStatus" ng-model="activityLogFilterByStatus" />
                              </div>
                          </div>
                      </div>
                    </form>
                </div>
                <!-- end of edit activity log container -->

                  <div class="pull-left graph_activity_holder">
                      <div class="activity_log_header">
                               {{ textConstants.CAMPAIGN_PERFORMANCE }}
                      </div>
                      <div class="graph_activity">
                          <span ng-switch="details.actionChart">
                            <span ng-switch-when="true" class="no-chart load-more">&nbsp;</span>
                            <span ng-switch-when="false" class="no-data-available no-chart" ng-bind-html="getMessageForDataNotAvailable(campaign,'campaign')"></span>
                            <span ng-switch-default>
                                <div ng-if="details.actionChart && campaign.kpiType" class="highcharts" id="details_chart">
                                    <highchart id="highcharts" config="details.actionChart" chartTitle=""></highchart>
                                </div>
                                <div ng-if="!(details.actionChart && campaign.kpiType)" class="highcharts" id="details_chart" ng-bind-html="getMessageForDataNotAvailable(campaign,'campaign')">
                                </div>
                            </span>
                          </span>
                      </div>
                      <div class="clearfix common_graph_legend"  ng-show="is_network_user" >
                        <div class="clearfix graph_legends">
                         <span class="legend"></span>
                         <span class="legend_text">{{ textConstants.EXTERNAL }}</span>
                       </div>
                       <div class="clearfix graph_legends internal_legend">
                         <span class="legend"></span>
                         <span class="legend_text">{{ textConstants.INTERNAL }}</span>
                       </div>
                       
                     </div>
                  </div>
                  <div class="pull-right activity_log_list_container">
                      <div class="clearfix activity_log_header">
                          <div class="pull-left">
                              {{ textConstants.ACTIVITY_LOG }}
                          </div>
                          <div ng-show="is_network_user" class="pull-right activity_external_dd">
                                  <div class="dropdown" ng-init="actionsFilter = {make_external: true}" id="details_activity_external_dd">
                                        <span class="dropdown_ul_text" data-toggle="dropdown">
                                            <span class="dd_txt">{{ textConstants.EXTERNAL }}</span>
                                            <span class="arrow_img"></span>
                                        </span>
                                        <ul class="dropdown_ul dropdown-menu" >
                                            <li ng-click="actionsFilter = watchActionFilter(null, false)" >{{ textConstants.ALL }}</li>
                                            <li ng-click="actionsFilter = watchActionFilter({make_external: true}, true)">{{ textConstants.EXTERNAL }}</li>
                                        </ul>
                                  </div>

                          </div>
                      </div>

                      <div id="action-container" class="activity_log_list">
                        <div class="gradient_div"></div>
                        <!-- data-toggle="tooltip" data-placement="top" data-original-title="Click for detailed reports" -->
                          <div  ng-if="is_network_user" class="clearfix each_activity_log "  ng-if="(actionItems && activityLogFlag == true)" id="actionItem_{{action.ad_id}}{{action.id}}" ng-repeat="action in actionItems.data  | orderBy:'created_at':true | filter:actionsFilter  track by $index">


                              <div class="pull-left activity_points">
                                  <div class="{{action.make_external == true ? 'activity_point_ext':'activity_point_int'}}">
                                  </div>
                              </div>
                              <div class="pull-left activity_main_details">
                                  <div class="activity_main">
                                      {{action.created_by_name}}
                                  </div>
                                  <div class="activity_date">
                                      {{action.created_at | formatActionDate }}
                                  </div>
                              </div>
                              <div class="pull-left activity_other_details">
                                  <div class="clearfix other_details_txt">
                                      <span class="impacts_name_txt">
                                          {{ textConstants.IMPACTS }} {{action.metric_impacted}}
                                      </span>
                                      <span class="optimization_txt">
					  {{action.action_type_name}}: {{action.action_sub_type}}
                                      </span>
                                  </div>
                                 <div class="more_details" ng-bind-html="action.comment|removeSpecialCharacter|morelines|newlines">
                                  </div>
                              </div>



                              <div ng-show="is_network_user" class="pull-right activity_edit_holder">
                                  <div class="activity_edit" tooltip-placement="left" tooltip="Edit" ng-controller="editActionsController" ng-click="showEdit(action.id)" onclick="disableSaveButton()">
                                  </div>
                                  <div class="activity_report" tooltip-placement="left" tooltip="Open Report" ng-click="setOptimizationData(campaign,action,strategyByActionId)">
                                  </div>
                              </div>
                          </div>


                          <div ng-if="!is_network_user &&  activityLogFlag == true" ng-click="setOptimizationData(campaign,action,strategyByActionId)"  class="clearfix each_activity_log "  ng-if="actionItems"  data-container=".each_activity_log" id="actionItem_{{action.ad_id}}{{action.id}}" ng-repeat="action in actionItems.data  | orderBy:'created_at':true | filter:actionsFilter  track by $index" style="cursor:pointer">

                              <div class="activity_tooltip {{$index == 0 ? 'activity_tooltip_bottom':''}} " >{{ textConstants.CLICK_FOR_DETAILED_REPORTS }}</div>
                              <div class="pull-left activity_points">
                                  <div class="{{action.make_external == true ? 'activity_point_ext':'activity_point_int'}}">
                                      <span>
                                      </span>
                                  </div>
                              </div>
                              <div class="pull-left activity_main_details">
                                  <div class="activity_main">
                                      {{action.created_by_name}}
                                  </div>
                                  <div class="activity_date">
                                      {{action.created_at | formatActionDate }}
                                  </div>
                              </div>
                              <div class="pull-left activity_other_details">
                                  <div class="clearfix other_details_txt">
                                      <span class="impacts_name_txt">
                                          {{ textConstants.IMPACTS }} {{action.metric_impacted}}
                                      </span>
                                      <span class="optimization_txt">
            {{action.action_type_name}}: {{action.action_sub_type}}
                                      </span>
                                  </div>
                                 <div class="more_details" ng-bind-html="action.comment|removeSpecialCharacter|morelines|newlines">
                                  </div>
                              </div>
                      </div>
                          <div ng-if="(activityLogFlag == false)" class="load-more" style="">&nbsp;</div>
                          <div class="no_activity_class" ng-if="((!actionItems.data) || ((actionItems.data | filter: actionsFilter ).length==0)) && activityLogFlag == true" ng-bind-html="getMessageForDataNotAvailable(campaign,'activities')">
                          </div>

                  </div>
              </div>
            </div>
              <!--activity log ends-->

              <!-- graph holder-->
                <div class="clearfix campaign_details_graphs_holder">

                  <div class="clearfix ">
                        <div class="col-md-12">
                              <div class="carousel slide" id="myCarousel">
                                <div class="carousel-inner">

                                  <div class="item active" id="costWidget" ng-if="isCostModelTransparent">
                                    <div class="col-xs-3">
                                       <div ng-click="setGraphData(campaign,'cost')" tooltip-placement="top" tooltip="Click for detailed reports" class="each_section_graph_holder bar_section_graph_holder bar_section_graph_holder_cost">
                                            <div class="graph_heading">
                                                {{ textConstants.COST_BREAKDOWN }}
                                            </div>
                                             <div ng-show="loadingCostBreakdownFlag" class="load-more">&nbsp;</div>
                                             <div  ng-if="((details.totalCostBreakdown == 0 || !(details.totalCostBreakdown)) && loadingCostBreakdownFlag== false )" class="no-data-available" ng-bind-html="getMessageForDataNotAvailable(campaign,'costs')"></div>
                                            <div class="clearfix each_section_graph graph_holding_section" ng-if="(details.totalCostBreakdown > 0 )">
                                                <div class="pull-left section_graph">
                                                    <highchart ng-show= "details.pieChart" config="details.pieChart" chartTitle="" class="section_graph_highcharts"></highchart>
                                                </div>
                                                <div class="pull-right section_graph_details"  >
                                                    <div class="each_detail" ng-repeat="data in getCostBreakdownInfo track by $index |orderBy:'-value':reverse" ng-if="(data.value >= 0.5 &&  data.name !='Other') ">
                                                        <span class="graph_color {{data.className}}"></span>
                                                        {{data.name}}: {{data.value | formatCostData: '' : 0}}%
                                                    </div>
                                                     <div class="each_detail" ng-repeat="data in getCostBreakdownInfo track by $index |orderBy:'-value':reverse" ng-if="(data.value >= 0.5 && data.name =='Other')">
                                                        <span class="graph_color {{data.className}}"></span>
                                                        {{data.name}}: {{data.value | formatCostData: '' : 0}}%
                                                    </div>
                                                </div>
                                                <div class="top_layer_graph"></div>
                                            </div>
                                            <div class="graph_summary" ng-if="(details.totalCostBreakdown > 0)">
                                                Total <span class="graph_val">{{details.totalCostBreakdown | formatCostData : '$' : 0}} </span>
                                            </div>
                                        </div>
                                    </div>
                                  </div>
                                  <div class="item active">
                                        <div class="col-xs-3">
                                            <!-- Platform Widget Starts Here -->
                                            <div ng-click="setGraphData(campaign,'platform')" tooltip-placement="{{ textConstants.TOP }}" tooltip="{{ textConstants.CLICK_FOR_DETAILED_REPORTS }}" class="each_section_graph_holder bar_section_graph_holder bar_section_graph_holder_platform" >
                                                <div class="graph_heading">
                                                    {{ textConstants.PLATFORM }}  ({{(campaign.kpiType)!='null' ? campaign.kpiType :'NA'}})
                                                </div>
                                                <div ng-show="loadingPlatformFlag" class="load-more" >&nbsp;</div>
                                                <div  ng-if="((chartData && chartData.length === 0) || campaign.kpiType =='null' ) && loadingPlatformFlag == false" class="no-data-available" ng-bind-html="getMessageForDataNotAvailable(campaign,'platform')"></div>
                                                <div class="clearfix each_section_graph" >
                                                    <div class="platform_number" ng-if="campaign.kpiType !='null' && chartData && chartData.length>0">
                                                        <span ng-style="disableLabel"> {{ textConstants.TOP_THREE }}</span>
                                                    </div>
                                                    <div class="dataPlatformIconsText" ng-if="campaign.kpiType !='null' && chartData && chartData.length>0">
                                                        <div class="widgetPlatformString" ng-repeat="pdata in chartDataPlatform track by $index" >
                                                            <div class="imgContainer"><img ng-src="{{pdata.icon_url==='Unknown' ? '/assets/images/platform_logos/platform_logo.png':pdata.icon_url}}" height='15'/></div>
                                                            <span>{{pdata.platform}}</span>
                                                            <span>&nbsp;{{pdata.value |kpiFormatter:campaign.kpiType }}</span>
                                                        </div>
                                                    </div>
                                                    <div id="platformWidget"></div>
                                                </div>
                                                <!-- Platform Widget Ends Here -->
                                            </div>
                                        </div>
                                    </div>
                                <div class="item active">
                                    <div class="col-xs-3">

                                      <div ng-click="setGraphData(campaign,'screens')" tooltip-placement="top" tooltip="Click for detailed reports" class="each_section_graph_holder bar_section_graph_holder bar_section_graph_holder_screen">
                                          <div class="graph_heading">
                                              Screens ({{(campaign.kpiType)!='null' ? campaign.kpiType :'NA'}})
                                          </div>
                                          <div class="clearfix each_section_graph format_section_graph dataScreenIconsText"  ng-if="(details.screens.length > 0 &&  campaign.kpiType !='null' && screenTotal > 0 )">
                                              <div ng-repeat="screen in details.screens track by $index" class="each_bar_section_holder {{screen.icon}}">
                                                <div ng-if="(screen.dimension == 'Smartphone' || screen.dimension == 'Tablet' || screen.dimension == 'Desktop')">{{screen.dimension}}{{(screen[details.kpiType] | kpiFormatter : campaign.kpiType) !='NA' ? ':':'' }} {{(screen[details.kpiType] | kpiFormatter : campaign.kpiType) !='NA' ? (screen[details.kpiType] | kpiFormatter : campaign.kpiType):'' }}</div>
                                                <!--
                                                <div ng-if="(screen.dimension == 'Smartphone' || screen.dimension == 'Tablet' || screen.dimension == 'Desktop')" class="each_bar_graph {{(screen[details.kpiType] | kpiFormatter : campaign.kpiType) =='NA' ? 'each_bar_graph_na':'' }} " ng-style="{'width':100-((details.screenTop-screen[details.kpiType])*100/details.screenTop) +'%'};">
                                                </div>
                                                -->
                                              </div>
                                          </div>
                                           <div id="screenWidget"></div>

                                           <div ng-show="loadingScreenFlag" class="load-more">&nbsp;</div>
                                           <div  ng-if="(( screenTotal == 0 || details.screens.length == 0 || campaign.kpiType =='null' || !(details.screens) ) && loadingScreenFlag == false)" class="no-data-available" ng-bind-html="getMessageForDataNotAvailable(campaign,'screens')"></div>
                                      </div>

                                    </div>
                                  </div>
                                  <div class="item {{isCostModelTransparent ? '' : 'active'}}">
                                        <div class="col-xs-3">
                                            <div ng-click="setGraphData(campaign,'inventory')" tooltip-placement="top" tooltip="Click for detailed reports" class="each_section_graph_holder bar_section_graph_holder bar_section_graph_holder_inventory" >
                                                <div class="graph_heading">
                                                    {{ textConstants.INVENTORY }} ({{(campaign.kpiType)!='null' ? campaign.kpiType :'NA'}})
                                                </div>
                                                <div ng-show="loadingInventoryFlag" class="load-more" >&nbsp;</div>
                                                <div  ng-if="((details.inventory.length == 0 || !(details.inventory)) && loadingInventoryFlag == false)" class="no-data-available" ng-bind-html="getMessageForDataNotAvailable(campaign,'inventory')"></div>
                                                <div class="clearfix each_section_graph " ng-if="(details.inventory.length > 0)">
                                                    <div class="inventory_number">
                                                        {{ textConstants.TOP }} {{details.inventory.length}}
                                                    </div>
                                                    <div ng-repeat="data in details.inventory track by $index" class="each_bar_section_holder">
                                                        <div>{{data.domain_data}}: {{data.kpi_value | kpiFormatter:campaign.kpiType}}</div>
                                                        <div class="each_bar_graph" ng-style="{'width':100-((details.inventoryTop.kpi_value-data.kpi_value)*100/details.inventoryTop.kpi_value) +'%'};"></div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                   <div class="item active">
                                    <div class="col-xs-3">
                                      <div ng-click="setGraphData(campaign,'viewability')" tooltip-placement="top" tooltip="Click for detailed reports" class="each_section_graph_holder" >
                                            <div class="graph_heading">
                                                Viewability
                                            </div>
                                            <div ng-show="loadingViewabilityFlag" class="load-more">&nbsp;</div>
                                            <div ng-if="((!(details.getCostViewability) || (campaign.kpiType =='null') ) && getCostViewabilityFlag == 1) " class="no-data-available"  ng-bind-html="getMessageForDataNotAvailable(campaign,'viewability')"></div>
                                            <div class="clearfix each_section_graph graph_holding_section">
                                                <div class="pull-left section_graph">
                                                    <highchart id="costViewability" ng-show="details.solidGaugeChart" config="details.solidGaugeChart" class="section_graph_highcharts"></highchart>
                                                </div>
                                                <div class="pull-right section_graph_details"  ng-if="(details.getCostViewability)">
                                                    <div class="each_detail" ng-if="(details.getCostViewability.pct_1s >=0 )"><span class="graph_color color2"></span>> 1s: {{details.getCostViewability.pct_1s  | formatCostData: '' : 0}}% </div>
                                                    <div class="each_detail" ng-if="(details.getCostViewability.pct_5s >=0 )"><span class="graph_color color3"></span>> 5s: {{details.getCostViewability.pct_5s  | formatCostData: '' : 0}}%</div>
                                                    <div class="each_detail" ng-if="(details.getCostViewability.pct_15s >=0 )"><span class="graph_color color1"></span>> 15s: {{details.getCostViewability.pct_15s  | formatCostData: '' : 0}}%</div>
                                                </div>
                                                <div class="top_layer_graph"></div>
                                            </div>
                                            <div class="graph_summary"  ng-if="(details.getCostViewability)">
                                                Imps. <span class="graph_val">{{details.getCostViewability.total  | formatCostData: '' : 0}}<!-- </span><span> --> ({{details.getCostViewability.pct_total  | formatCostData: '' : 0}}%)</span>
                                            </div>
                                        </div>
                                    </div>
                                  </div>               
                                </div>
                                <a class="left carousel-control" href="#myCarousel" data-slide="prev"><i class="glyphicon glyphicon-chevron-left"></i></a>
                                <a class="right carousel-control" href="#myCarousel" ng-show="isCostModelTransparent" data-slide="next"><i class="glyphicon glyphicon-chevron-right"></i></a>
        
                              </div> <!-- mycarousel ends -->
                        </div>                  
                  </div>
                </div>

                <!--graph holder ends-->

    <br><!--TODO - remove break and add spacing-->
    <div id="detailedPage" class="campaigns_details_holder">

          <!--date holder-->
          <div class="clearfix flight_dates_holder">
                <div class="clearfix campaign_overview_details">
                    <div class="pull-left campaign_overview_details_title">
                         {{ textConstants.CAMPAIGN_OVERVIEW }}
                    </div>
                    <div class="pull-right campaign_overview_details_categories">
                        <div class="each_col col_sec">
                            <div class="col_heading">{{ textConstants.KPI }}</div>
                            <div class="col_val">
                                 <span ng-if="(campaign.kpiValue > 0)"> {{campaign.kpiValue | kpiFormatter:campaign.kpiType}} </span>{{campaign.kpiType !='null' ? campaign.kpiType : 'NA' | toUpperCase}}
                            </div>
                        </div>
                        <div class="each_col col_third">
                            <div class="col_heading">{{ textConstants.IMP_WITH_DOT }}</div>
                            <div class="col_val">
                                {{campaigns.cdbDataMap[campaign.orderId].impressions | number}}
                            </div>
                        </div>
                        <div class="each_col col_forth">
                            <div class="col_heading">{{ textConstants.CTR }}</div>
                            <div class="col_val">
                                {{campaigns.cdbDataMap[campaign.orderId].ctr*100 | number:2}}%
                            </div>
                        </div>
                        <div class="each_col col_fifth" ng-if="!campaigns.cdbDataMap[campaign.orderId].hasVTCMetric || campaigns.cdbDataMap[campaign.orderId].video_metrics.vtc_rate === 0">
                            <div class="col_heading">{{ textConstants.ACTION_RATE }}</div>
                            <div class="col_val">
                                {{campaigns.cdbDataMap[campaign.orderId].action_rate*100 | number:2}}%
                            </div>
                        </div>

                        <div class="each_col col_fifth" ng-if="campaigns.cdbDataMap[campaign.orderId].hasVTCMetric && campaigns.cdbDataMap[campaign.orderId].video_metrics.vtc_rate >0">
                            <div class="col_heading">{{ textConstants.VTC }}</div>
                            <div class="col_val">
                                {{campaigns.cdbDataMap[campaign.orderId].video_metrics.vtc_rate | number : 2}}%
                            </div>
                        </div>
                    </div>
                </div>
                <!-- add campaign_overview_graphs_with_vtc when vtc is present -->
                <div class="campaign_overview_graphs {{campaigns.cdbDataMap[campaign.orderId].hasVTCMetric && campaigns.cdbDataMap[campaign.orderId].video_metrics.vtc_rate >0 ? 'campaign_overview_graphs_with_vtc' : ''}}">
                    <div class="each_col col_first">
                        <div class="col_heading"></div>
                        <div class="days_left_holder">
                            <div class="total_days_holder">

                                <div class="clearfix days_end_points">
                                    <span class="start_end">{{campaign.startDate | date :'d MMM y' }}</span>
                                    <span class="finish_end">{{campaign.endDate | date :'d MMM y' }}</span>
                                </div>
                                <div class="days_over" ng-style="{'width':campaign.durationCompletion() +'%'};">
                                  <span ng-if="campaign.durationLeft() == 'Yet to start'"  class="days_over_text start_text">{{ textConstants.YET_TO_START }}</span>
                                  <span ng-if="campaign.durationLeft() == 'Ended'" class="days_over_text ended_text" >{{ textConstants.ENDED }}</span>
                                  <span ng-if="campaign.durationLeft() > 0"   class="days_over_text">{{campaign.durationLeft()}} {{ textConstants.DAYS_LEFT }}</span>
                                </div>
                                <div ng-if="campaign.durationLeft() == 'Started today'" class="days_not_over_text start_text">{{ textConstants.STARTED_TODAY }}</div>
                                <div ng-if="campaign.durationLeft() == 'Ending today'" class="days_not_over_text ended_text" >{{ textConstants.ENDING_TODAY }}</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="each_col col_spend">
                        <div class="col_heading clearfix">{{ textConstants.SPEND }}
                            <span class="metric_val">${{campaigns.cdbDataMap[campaign.orderId].getGrossRev() | number}}</span>
                        </div>
                        <div class="metric_graph {{getSpendClass(campaign)}}">
                                <div class="full_metric_graph">
                                    <div class="selected_graph {{(getSpendWidth(campaign) >= 100) ? 'completely_filled' : ''}} " ng-style="{'width': getSpendWidth(campaign) +'%'};"> <!-- put completely_filled when 100% -->
                                    </div>
                                    <div class="graph_start_point {{(getSpendTickWidth(campaign) <= 0) ? 'start_beginning' : ''}} {{(getSpendTickWidth(campaign) >= 70) ? 'start_end_point' : ''}}" ng-style="{'left': getSpendTickWidth(campaign) +'%'};"><!-- put start_beginning when at start -->
                                        <div class="end_point_val">
                                            <span class="icon_KPI"> ${{campaign.expectedMediaCost | number:2}}</span>
                                            <div class="end_point_line"></div>
                                        </div>
                                    </div>
                                    <div class="graph_end_point completed_end_point budget_graph_val" ng-hide="campaign.expectedMediaCost == campaign.totalMediaCost"><!-- put completed_end_point when at end -->
                                        <div class="end_point_val">
                                            <div class="end_point_line"></div>
                                            <span>{{ textConstants.BUDGET }}: ${{campaign.totalMediaCost | number:2}}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                    </div>
                    <div class="each_col col_vtc" ng-if="campaigns.cdbDataMap[campaign.orderId].hasVTCMetric && campaigns.cdbDataMap[campaign.orderId].video_metrics.vtc_rate >0">
                        <div class="col_heading clearfix">{{ textConstants.QUARTILE_DETAILS }}
                        </div>
                        <div class="quartile_details_graph" width='365' height='74' quartiles-graph chart-data="{{campaigns.cdbDataMap[campaign.orderId].video_metrics}}"></div>
                    </div>
                </div>
          </div>
          <!--date holder ends-->

        <div class="row-fluid">
            <!--Directive for Campaign sort -->
            <span ng-if="campaign.campaignStrategies.length===0" class="no-data-common">{{ textConstants.NO_LINKED_STRATEGIES }}</span>
            <div campaign-sort campaigns="campaigns" ng-show="campaign.campaignStrategies.length>0"></div>
                <div class="total_campaign_list_holder">
                    <!--reusing the campaign and strategy partial view -->
                    <div campaign-strategy-card campaign="campaign" campaigns="campaigns"></div>
                </div>
        </div>
        <campaign-drop-down selected-obj=selectedCampaign style="visibility: hidden"> </campaign-drop-down>
    </div>
  </div>
</div>
<script type="text/javascript">

  $(document).ready(function() {

      $('.carousel a.left').hide();
    
      $('.carousel a.right').click(function(){
        $('.carousel .item').first().removeClass('active');
        $('.carousel .item').next().addClass('active');
        $('.carousel a.right').hide();
        $('.carousel a.left').show();
      });
      $('.carousel a.left').click(function(){
        $('.carousel .item').last().removeClass('active');
        $('.carousel .item').first().addClass('active');
        $('.carousel a.right').show();
        $('.carousel a.left').hide();
      });


      window.scrollTo(0, 0);
      $("#error_more_comment,#error_edit_action_more_comment").hide();
      $( ".dropdown_ul_text" ).click(function() {
          $( ".dropdown_ul" ).toggle();
       });
      $(".dropdown_ul li").click( function() {
        $(this).closest(".dropdown").find(".dd_txt").text($(this).text()) ;
      }) ;
      $( document ).click(function() {
          if($(".dropdown_ul").is(':visible')) {
              $(".dropdown_ul").hide();
          }
      });
      setTimeout(function() {
        $('[data-toggle="tooltip"]').tooltip(); 
      },5000);
      $('#action_submit_btn,#action_comment').bind("click focus", function() {
          var txt = $.trim(jQuery("#action_comment").val());
          jQuery("#action_comment").val(txt);
         
      });
      $('#action_comment,#action_submit_btn').bind("change keyup keydown click", function() {
          CommentValidation('action_comment','error_more_comment');

      });
       $('#action_comment').bind("blur", function() {
          $("#error_more_comment").hide();
       });

       //Edit actions
       
       $('#action_save_btn,#edit_action_comment').bind("click focus", function() {
          var txt = $.trim(jQuery("#edit_action_comment").val());
          jQuery("#edit_action_comment").val(txt);
         
      });
       $('#edit_action_comment').bind("change keyup keydown click", function() {
          CommentValidation('edit_action_comment','error_edit_action_more_comment');
          //enable save Button
          updateSaveBtnStatus();
         
      });
       $('#edit_action_comment').bind("blur", function() {
          $("#error_edit_action_more_comment").hide();
       });
       //Anywhere click close the error message tooltip while create activity
        $('body').click(function(evt){    
             if(evt.target.id == "crActivityForm")
                return;
             if($(evt.target).closest('#crActivityForm').length)
                return;
              $("#error_activity,#error_subtype,#error_tactic,#error_metric,#error_comment,#edit_error_comment").hide();
        });
        $("#action_submit_btn").click(function(){
           $("#error_activity,#error_subtype,#error_tactic,#error_metric,#error_comment").show();
        });
        $("#action_save_btn").click(function(){
           $("#edit_error_comment").show();
        });

        $('.activity_log_list').bind('scroll', function(e) {
            var elem = $(e.currentTarget);
            if (elem[0].scrollHeight - elem.scrollTop() + 1 == elem.outerHeight()) 
            {
                $(".gradient_div").hide() ;
            } else {
                $(".gradient_div").show() ;
            }
        });

  });
    var updateSaveBtnStatus = function(){
    var txt = (jQuery("#edit_action_comment").val()).replace(/\n/g, '').replace('\\n', '');
    var hidden_txt = jQuery("#hidden_comments").val().replace(/\n/g, '').replace('\\n', '');
    var hidden_checkbox = jQuery("#hidden_checkbox_status").val().toString();
    var edit_checkbox =jQuery("#edit_details_squaredFour").prop( "checked").toString();
    if((hidden_txt == txt) && (hidden_checkbox == edit_checkbox )){
      jQuery("#action_save_btn").attr('disabled','disabled');
    }else{
      jQuery("#action_save_btn").removeAttr('disabled');
    }
  }
  var disableSaveButton = function(){
    jQuery("#action_save_btn").attr('disabled','disabled');
  }
  var CommentValidation = function(boxId,errMsgId){
    var txtBoxId ="#"+boxId;
    var errorMsgId="#"+errMsgId;
    var txt = (jQuery(txtBoxId).val());
    var max_length = $(txtBoxId).attr("maxChar");
          var max_line = $(txtBoxId).attr("maxLine");
          var txt_data = '';
          var txtlength = txt.length;
          var line = txt;
          var split = line.split("\n");
          var splitlength = split.length;
          if(splitlength > max_line){
            for(i=0; i< max_line;i++){
              if(i == (parseInt(max_line)) - 1) {
                txt_data += split[i]; 

              }
              else{
                  txt_data += split[i] + '\n'; 
              }
              
            }
            $(errorMsgId).show();
            $(errorMsgId).html('You cannot enter more than '+max_line + ' lines ');
            $(txtBoxId).val(txt_data);
            //check Limited characters
            if(txt.length > max_length ){
              $(errorMsgId).show();
              $(errorMsgId).html('You cannot enter more than '+max_length + ' characters ');
              var limited_txt = txt_data.substring(0, max_length );
              $(txtBoxId).val(limited_txt);
            }
            else{
               //$(errorMsgId).hide();
            }
          }else {
            if(txt.length > max_length ){
              $(errorMsgId).show();
              $(errorMsgId).html('You cannot enter more than '+max_length + ' characters ');
              var limited_txt = txt.substring(0, max_length );
              $(txtBoxId).val(limited_txt);
            }
            else{
               $(errorMsgId).hide();
            }
          }
  }
</script>
