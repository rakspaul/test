<popup-msg ng-show="flashMessage" ng-controller="popUpMsgCtr"
		   ng-init="init('flashMessage','WF_CAMPAIGN_ARCHIVE_FAILURE')"></popup-msg>

<!--<div class="workflowPreloader">
    <img src="/assets/images/workflow/newPreloader.gif" alt="Loading..."/>
    <span class="adSavePre">Saving Campaign</span>
</div>-->

<div id="campaignCreate">
	<div class="firstWrapper">
		<div class="masterContainer">
			<!-- Header Starts -->
			<div class="clearfix left_column_nav campaign-create-left-nav" style="border-width: 0;">
				<div class="campaign_name_holder">
					<h1 class="campaign_name">{{textConstants.MP_TITLE}}</h1>
					<ul class="stepCompLabel nav nav-tabs" id="mediaTab">
						<li class="active eachStepCompLabel">
							<a class="leftNavLink selected" data-target="#settings" data-toggle="tab">1. {{ textConstants.WF_SETTINGS}}</a>
							<div class="statusLabel" ng-hide="selectedCampaign.goal.name || selectedCampaign.startTime || selectedCampaign.budget">
								<div class="col-md-12">
									<span>{{textConstants.WF_NOT_SET}}</span>
								</div>
							</div>
							<div class="statusLabel each-setting" ng-if="brand.length>0">
								<div class="col-md-12">
									<div class="pull-left">
										<span class="statusIcon icon-brand"></span>
									</div>
									<div class="pull-left">
										<div class="clearfix"><span class="icon_txt">Branding</span> <span class="grey_txt">(Objective)</span> </div>
										<div ng-repeat="letter in brand track by $index">{{letter}}</div>
									</div>
								</div>
							</div>
							<div class="statusLabel each-setting" ng-if="performance.length>0">
								<div class="col-md-12">
									<div class="pull-left">
										<span class="statusIcon icon-performance"></span>
									</div>
									<div class="pull-left">
										<div class="clearfix"><span class="icon_txt">Performance</span> <span class="grey_txt">(Objective)</span> </div>
										<div ng-repeat="letter in performance track by $index">{{letter}}</div>
									</div>
								</div>
							</div>
							<div class="statusLabel each-setting">
								<div class="col-md-12">
									<div class="pull-left">
										<span class="statusIcon icon-image"></span>
									</div>
									<div class="pull-left">
										<div class="clearfix"><span class="icon_txt">{{selectedChannel | toTitleCase}}</span> <span class="grey_txt">(Channel)</span> </div>
									</div>
								</div>
							</div>
							<div class="statusLabel" ng-if="selectedCampaign.startTime">
								<div class="col-md-12">
									<!--<span class="glyphicon glyphicon-calendar" aria-hidden="true"></span>-->
									<div class="statusIcon icon-calendar"></div>
									<span class="">{{selectedCampaign.startTime}}</span>  <span class="" ng-if="selectedCampaign.endTime"> - {{selectedCampaign.endTime}}</span></span>
									<span>(Flight)</span>
								</div>
							</div>
							<div class="statusLabel" ng-if="selectedCampaign.budget">
								<div class="col-md-12">
									<span class="statusIcon" style="width: 12px; text-align: right; display: inline-table;">{{ locale.NUMBER_FORMATS.CURRENCY_SYM}}</span>
									<span id="budgetAmount"  class="">{{selectedCampaign.budget | number}}</span>
									<span>(Budget)</span>
								</div>
							</div>
						</li>
						<li class="clearfix eachStepCompLabel" >
							<a class="leftNavLink budget-page-trigger" data-target="#budget" data-toggle="tab">2. {{textConstants.MP_BUDGET}}</a>
							<!--<div class="statusLabel " ng-hide="isPrimarySelected || Campaign.totalBudget || Campaign.deliveryBudget">-->
							<div class="statusLabel " ng-hide="Campaign.totalBudget || Campaign.deliveryBudget">
								<div class="col-md-12">
									<span>{{textConstants.WF_NOT_SET}}</span>
								</div>
							</div>
							<div class="statusLabel" ng-if="Campaign.totalBudget">
								<div class="col-md-12">
									<!--<span class="glyphicon glyphicon-calendar" aria-hidden="true"></span>-->
									<div class="statusIcon icon-usd"></div>
									<span class="">{{locale.NUMBER_FORMATS.CURRENCY_SYM}}{{Campaign.totalBudget}}</span>
									<span>(Total Budget)</span>
								</div>
							</div>
							<div class="statusLabel" ng-if="Campaign.deliveryBudget">
								<div class="col-md-12">
									<!--<span class="glyphicon glyphicon-calendar" aria-hidden="true"></span>-->
									<div class="statusIcon icon-usd"></div>
									<span class="">{{locale.NUMBER_FORMATS.CURRENCY_SYM}}{{Campaign.deliveryBudget}}</span>
									<span>(Delivery Budget)</span>
								</div>
							</div>
							<div class="statusLabel" ng-if="PrimaryImpressions>0">
								<div class="col-md-12">
									<!--<span class="glyphicon glyphicon-calendar" aria-hidden="true"></span>-->
									<div class="statusIcon icon-goal"></div>
									<span class="">{{PrimaryImpressions}}</span>
									<span>(Primary KPI)</span>
								</div>
							</div>
						</li>
						<li class="clearfix eachStepCompLabel" >
							<a class="leftNavLink" data-target="#contacts" data-toggle="tab">3. {{textConstants.MP_CONTACTS}} ({{textConstants.MP_OPTIONAL}})</a>
							<div class="statusLabel disabled">
								<div class="col-md-12">
									<span>{{textConstants.WF_NOT_SET}}</span>
								</div>
							</div>
						</li>
					</ul>
				</div>
			</div>
			<!-- Header Ends -->

			<!-- Settings Start -->
			<div class="settingWrap">
				<form class="form-horizontal ng-scope ng-pristine ng-valid" id="createCampaignForm" role="form" name="createCampaignForm" action="#"  novalidate>
					<div class="collapseHeader">
						<div class="col-md-6 zeroPadding">
							<h2>{{ textConstants.WF_SETTINGS }}</h2>
						</div>
						<div class="col-md-6 zeroPadding">
							<div class="zeroPadding dropdown-workflow pull-right" style="margin-left: 10px;" ng-hide="(mode!='edit')">
								<div class="dropdown">
									<button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" style="margin: 0; padding: 10px 15px;">
										<span class="icon-more-options"></span>
									</button>
									<ul class="dropdown-menu" id="moreOptions" style="right: 0; left: initial;">
										<li class="disabled"><a>{{textConstants.WF_PAUSE}}</a></li>
										<li class="disabled"><a>{{textConstants.WF_RESUME}}</a></li>
										<li><a class="available" id="archiveAdbtn" ng-hide="(mode!='edit')" ng-click="cancelArchiveCampaign()">{{textConstants.WF_ARCHIVE}}</a></li>
									</ul>
								</div>
							</div>
							<a href="#" class="btn btn-primary pull-right" role="button" ng-click="saveCampaign()">{{textConstants.MP_SAVE}}</a>
							<div ng-hide="(mode!='edit')">
								<a ng-href="/mediaplan/{{editCampaignData.id}}/overview" class="btn btn-link pull-right" role="button">{{textConstants.MP_CANCEL}}</a>
							</div>
							<div ng-show="(mode!='edit')">
								<a href="/mediaplans" class="btn btn-link pull-right" role="button">{{textConstants.MP_CANCEL}}</a>
							</div>
						</div>
					</div>

					<div class="tab-content">

						<div class="isCollapsed tab-pane fade in active" id="settings">
							<!--==== Row 1 ====-->
							<div class="col-md-12 zeroPadding">
								<label for="nameTitleCampaign" class="col-sm-12  labelQuestTxt" style="margin-bottom: 5px;">{{textConstants.WF_NAME_CAMPAIGN_TXT}}</label>
								<div ng-if=(mode=='edit') class="form-group col-sm-9 zeroPadding" show-errors='{showSuccess: true}'  style="margin-top: 15px;">
									<input type="text" class="form-control" id="nameTitleCampaign" remove-special-character ='remove-special-character' name="campaignName" ng-model="editCampaignData.name"  ng-value="editCampaignData.name" maxlength="250" ng-maxlength="250" required/>
									<label ng-if="createCampaignForm.campaignName.$error.required" class="col-sm-12  greyTxt errorLabel">{{textConstants.WF_ENTER_NAME_CAMPAIGN}}</label>
								</div>
								<div ng-if=(mode!='edit') class="form-group col-sm-9 zeroPadding" show-errors='{showSuccess: true}'  style="margin-top: 15px;">
									<input type="text" class="form-control" id="nameTitleCampaign" remove-special-character ='remove-special-character' name="campaignName" ng-model="selectedCampaign.campaignName"  maxlength="250" ng-maxlength="250" autofocus placeholder="Max 250 characters. No symbols or punctuation" required/>
									<label ng-if="createCampaignForm.campaignName.$error.required" class="col-sm-12  greyTxt errorLabel">{{textConstants.WF_ENTER_NAME_CAMPAIGN}}</label>
								</div>
							</div>

							<div class="col-md-12 spacingInput"><!-- SPACING --></div>
							<!--==== Row 2 ====-->
							<div class="col-md-12 zeroPadding">
								<label for="nameTitleCampaign" class="col-sm-12 labelQuestTxt">{{textConstants.WF_CAMPAIGN_FOR}}</label>
								<div class="form-group col-sm-3" show-errors='{showSuccess: true}' style="padding-left: 0;">
									<label for="advertiserDDL" class="col-sm-12  greyTxt miniLabels">{{ textConstants.ADVERTISERS }}</label>
									<div class="col-md-12 zeroPadding dropdown-workflow">
										<div class="dropdown">
											<button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
												<span class="text">{{mode == 'edit' ? editCampaignData.advertiserName : 'Select Advertiser' }}</span>
												<span class="icon-arrow-down"></span>
											</button>
											<ul class="dropdown-menu" aria-labelledby="advertiserDDL"  id="advertiserDDL" ng-if="mode !== 'edit'">
												<li ng-repeat="advertiser in workflowData.advertisers track by advertiser.id" class="available"><a ng-click="selectHandler('advertiser', advertiser)">{{advertiser.name}}</a></li>
											</ul>
											<input type="hidden" name="advertiserId" ng-model="selectedCampaign.advertiserId" ng-update-hidden required/>
										</div>
									</div>
									<label ng-if="createCampaignForm.advertiserId.$error.required" class="col-sm-12 greyTxt errorLabel">Please select the Advertiser.</label>
								</div>
								<div class="form-group col-sm-3" style="padding-left: 0;">
									<label for="brandDDL" class="col-sm-12  greyTxt miniLabels">{{ textConstants.BRAND }}</label>
									<div class="col-md-12 zeroPadding dropdown-workflow">
										<div class="dropdown">
											<button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
												<span class="text">{{mode == 'edit' ? editCampaignData.brandName : 'Select Brand' }}</span>
												<span class="icon-arrow-down"></span>
											</button>
											<ul class="dropdown-menu" aria-labelledby="brandDDL"  id="brandDDL">
												<li ng-repeat="brand in workflowData.brands track by brand.id" class="available"><a ng-click="selectHandler('brand', brand)">{{brand.name}}</a></li>
											</ul>
											<input type="hidden" name="brandId" ng-model="selectedCampaign.brandId" ng-update-hidden/>
										</div>
									</div>
								</div>
							</div>

							<div class="col-md-12 spacingInput"><!-- SPACING --></div>

							<div class="col-md-12 zeroPadding">
								<div class="form-group col-sm-3" style="padding-left: 0;">
									<label for="campObj" class="col-sm-12 greyTxt miniLabels">{{textConstants.WF_CAMPAIGN_OBJECTIVES}}</label>
									<div class="col-md-12 zeroPadding dropdown-workflow">
										<div class="dropdown" id="campObjClick">
											<button class="btn btn-default dropdown-toggle" type="button" aria-haspopup="true" aria-expanded="true" ng-click="open_multiselect_dropdown($event);">
												<span class="text" ng-bind="objectiveSet"></span>
												<span class="icon-arrow-down"></span>
											</button>
											<ul class="dropdown-menu multiSelectDDL" aria-labelledby="campObj"  id="campObj">
												<li class="headerDDL"><span class="icon-brand"></span><span class="greyTxt" style="padding-left: 7px !important;">BRANDING</span></li>
												<li ng-repeat="brand in workflowData.branding"><span><input type="checkbox" name="checkbox" value="brand.campaignObjectiveTypeId" ng-click="onObjectiveSelected(brand,'brand')" ng-checked="brand.isChecked">{{brand.subObjective}}</span></li>
												<li class="headerDDL"><span class="icon-performance"></span><span class="greyTxt" style="padding-left: 7px !important;">PERFORMANCE</span></li>
												<li ng-repeat="performance in workflowData.performance"><span><input type="checkbox" name="checkbox" value="performance.campaignObjectiveTypeId" ng-click="onObjectiveSelected(performance,'performance')" ng-checked="performance.isChecked">{{performance.subObjective}}</span></li>
											</ul>
										</div>
									</div>
								</div>
							</div>

							<div class="col-md-12 spacingInput"><!-- SPACING --></div>

							<!--==== Row 4 ====-->
							<div class="col-md-12 zeroPadding">
								<label for="nameTitleCampaign" class="col-sm-12  labelQuestTxt">What type of Media Plan are you running?</label>
								<div class="form-group col-sm-12 zeroPadding goalBtnGroupTabs">
									<!-- TOGGLE BTN FOR Demographic Type -->
									<label for="demoType" class="col-sm-12 greyTxt miniLabels"></label>
									<div class="col-md-12 btn-group goalBtnGroup zeroPadding">
										<label ng-if="mode !=='edit'" class="btn btn-primary first active">
											<input type="radio" name="demoType" autocomplete="off" name="campaignType" ng-click="channelSelected($event,'Display')" value="Display" >
											<div class="hideRadioBtn" style="margin-top: -18px;">
												<div class="icon-image"></div>
												<span>Display</span>
											</div>
										</label>
										<label ng-if="mode ==='edit'" class="btn btn-primary first " ng-class="selectedChannel==='DISPLAY'? 'active':''">
											<input type="radio" name="demoType" autocomplete="off" name="campaignType" ng-click="channelSelected($event,'Display')" value="Display" >
											<div class="hideRadioBtn" style="margin-top: -18px;">
												<div class="icon-image"></div>
												<span>Display</span>
											</div>
										</label>
										<label ng-if="mode !=='edit'" class="btn btn-primary">
											<input type="radio" name="demoType" autocomplete="off" name="campaignType" ng-click="channelSelected($event,'Video')" value="Video" >
											<div class="hideRadioBtn" style="margin-top: -18px;">
												<div class="icon-video"></div>
												<span>Video</span>
											</div>
										</label>
										<label ng-if="mode ==='edit'" class="btn btn-primary" ng-class="selectedChannel==='VIDEO'? 'active':''">
											<input type="radio" name="demoType" autocomplete="off" name="campaignType" ng-click="channelSelected($event,'Video')" value="Video" >
											<div class="hideRadioBtn" style="margin-top: -18px;">
												<div class="icon-video"></div>
												<span>Video</span>
											</div>
										</label>
										<label ng-if="mode !=='edit'" class="btn btn-primary">
											<input type="radio" name="demoType" autocomplete="off" name="campaignType" ng-click="channelSelected($event,'Mobile')" value="Mobile" >
											<div class="hideRadioBtn" style="margin-top: -18px;">
												<div class="icon-mobile"></div>
												<span>Mobile</span>
											</div>
										</label>
										<label ng-if="mode ==='edit'" class="btn btn-primary" ng-class="selectedChannel==='MOBILE' ? 'active' :''">
											<input type="radio" name="demoType" autocomplete="off" name="campaignType" ng-click="channelSelected($event,'Mobile')" value="Mobile" >
											<div class="hideRadioBtn" style="margin-top: -18px;">
												<div class="icon-mobile"></div>
												<span>Mobile</span>
											</div>
										</label>
										<label class="btn btn-primary disabled" aria-disabled="true">
											<input type="radio" name="demoType" autocomplete="off" value="Social" disabled>
											<div class="hideRadioBtn" style="margin-top: -18px;">
												<div class="icon-social"></div>
												<span>Social</span>
											</div>
										</label>
										<label class="btn btn-primary disabled" aria-disabled="true">
											<input type="radio" name="demoType" autocomplete="off" value="Search" disabled>
											<div class="hideRadioBtn" style="margin-top: -18px;">
												<div class="icon-search"></div>
												<span>Search</span>
											</div>
										</label>
										<label class="btn btn-primary last disabled" aria-disabled="true">
											<input type="radio" name="demoType" autocomplete="off" value="TV" disabled>
											<div class="hideRadioBtn" style="margin-top: -18px;">
												<div class="icon-tv"></div>
												<span>TV</span>
											</div>
										</label>
									</div>
								</div>
							</div>

							<div class="col-md-12 spacingInput"><!-- SPACING --></div>

							<!--==== Row 4 ====-->
							<div class="col-md-12 zeroPadding">
								<label for="nameTitleCampaign" class="col-sm-12  labelQuestTxt">When would you like your Media Plan to run?</label>
								<div class="span4 col-md-12 input-daterange input-group date pull-left" id="datepicker">

									<div class="col-md-12 dateWrapper form-group" show-errors='{showSuccess: true}'>
										<div class="dateContainer">
											<label class="col-sm-12  greyTxt miniLabels">{{ textConstants.START_DATE }}</label>
											<input type="text" id="startDateInput" placeholder="MM/DD/YYYY" class="form-control" readonly name="startTime" ng-model="selectedCampaign.startTime" ng-change=" handleFlightDate(selectedCampaign)" required />
										</div>
										<div class="dateContainer" style="padding-left: 10px;">
											<label class="col-sm-12  greyTxt miniLabels">{{ textConstants.END_DATE }}</label>
											<input type="text" id="endDateInput" placeholder="MM/DD/YYYY" class="form-control" readonly name="endTime" ng-model="selectedCampaign.endTime"  required/>
										</div>
										<label ng-if="createCampaignForm.startTime.$error.required" class="col-sm-12  greyTxt errorLabel">{{textConstants.STARTDATE_REQUIRED}}.</label>
									</div>
									<span class="col-md-12 input-group-addon">
										<div class="calenderIcon">
											<span class="icon-calendar"></span>
										</div>
										<div class="calenderIcon">
											<span class="icon-calendar"></span>
										</div>
									</span>
								</div>
							</div>

							<div class="col-md-12 spacingInput"><!-- SPACING --></div>

							<!--=== Next Step Panel ===-->
							<a href="#budget" data-toggle="tab" role="tab" class="nextWrapper leftNavLink budget">
								<span class="btn btn-default" ng-click="highlightLeftNav(1)">Save & Continue</span>
							</a>
						</div>
						<!--PAGE2-->
						<div class="tab-pane fade" id="budget">
							<h3 class="col-md-6 adName" tooltip="{{adData.adName}}">
								{{selectedCampaign.campaignName.length>0 ? (selectedCampaign.campaignName | textEllipsis: 40 ) : editCampaignData.name}}
							</h3>
							<!--==== Row 1 ====-->
							<div class="col-md-12 zeroPadding">
								<label for="nameTitleCampaign" class="col-sm-12 labelQuestTxt" style="margin-bottom: 5px;">Display - Set up how you want to Budget and Measure</label>
								<div class="col-md-12 zeroPadding marginCal">
									<div class="calTable form-group" show-errors='{showSuccess: true}'>
										<h3>Total Budget</h3>
										<div class="symbol-input">
											<span class="symbol">{{locale.NUMBER_FORMATS.CURRENCY_SYM}}</span>
											<input type="text"  ng-model="Campaign.totalBudget" name="totalBudget" class="form-control col-sm-8" ng-keyup="ComputeCost()" whole-number-only="whole-number-only" required/>
										</div>
										<label ng-if="createCampaignForm.totalBudget.$error.required" class="col-sm-12  greyTxt errorLabel" style="margin-left:35px;">{{textConstants.TOTAL_BUDGET_REQUIRED}}</label>
										<label ng-if="Campaign.totalBudget<=0" class="col-sm-12  greyTxt " style="margin-left:35px; color:#F24444 !important;">{{textConstants.TOTAL_BUDGET_GREATER_THAN_ZERO}}</label>
									</div>
									<div class="calTable">
										<h3>Margin</h3>
										<div class="symbol-input">
											<span class="symbol" style="left: initial; right: 50px;">{{textConstants.SYMBOL_PERCENT}}</span>
											<input type="text" ng-model="Campaign.marginPercent" class="form-control col-sm-8" ng-keyup="ComputeCost()" style="text-align: center; padding-left: 10px;" whole-number-only="whole-number-only"/>
										</div>
									</div>
									<div class="calTable">
										<h3>Est. Non-Inventory Cost</h3>
										<div class="symbol-input">
											<span class="symbol">{{locale.NUMBER_FORMATS.CURRENCY_SYM}}</span>
											<input type="text" ng-style="inventoryExceeds ? {'color':'#F9B537'}:''" ng-model="Campaign.nonInventoryCost" class="form-control col-sm-8" disabled/>
										</div>
										<label ng-if="Campaign.nonInventoryCost>Campaign.totalBudget" class="col-sm-12  greyTxt " style="margin-left:35px; color:#F24444 !important;">{{textConstants.NON_INVENTORY_COST_GREATER_THAN_ZERO}}</label>
									</div>
									<div class="calTable">
										<h3>Delivery Budget</h3>
										<div class="symbol-input">
											<span class="symbol">{{locale.NUMBER_FORMATS.CURRENCY_SYM}}</span>
											<input type="text" ng-style="deliveryBudgetNegative ? {'color':'#F9B537'}:''" ng-model="Campaign.deliveryBudget" class="form-control col-sm-8" disabled/>
										</div>
										<label ng-if="deliveryLesserBookedspend" class="col-sm-12  greyTxt " style="margin-left:35px; color:#F24444 !important;">{{textConstants.DELIVERY_BUDGET_BOOKEDSPEND}}({{editCampaignData.bookedSpend}})</label>
										<label ng-if="Campaign.deliveryBudget<0" class="col-sm-12  greyTxt " style="margin-left:35px; color:#F24444 !important;">{{textConstants.DELIVERY_BUDGET_GREATER_THAN_ZERO}}</label>
									</div>
									<div class="calTable">
										<h3>Effective {{primaryType ? primaryType:'CPM'}}</h3>
										<div class="symbol-input">
											<span class="symbol">{{locale.NUMBER_FORMATS.CURRENCY_SYM}}</span>
											<input type="text" ng-style="effectiveNegative ? {'color':'#F9B537'}:''" ng-model="Campaign.effectiveCPM" class="form-control col-sm-8" disabled/>
										</div>
									</div>
									<div class="calTable">
										<!--<input type="checkbox" />-->
										<!--<span>Calculate Budget for me</span>-->
										<a class="btn btn-default pull-left" role="button" ng-click="ComputeCost()" style="margin-top: 38px;">
											<div class="glyphicon glyphicon-refresh pull-left" aria-hidden="true"></div> <span style="padding-top: 2px;">Calculate</span>
										</a>
									</div>
								</div>
							</div>

							<!--==== Row 2 ====-->
							<div class="col-md-12 zeroPadding">
								<label for="nameTitleCampaign" class="col-sm-12 labelQuestTxt" style="margin-bottom: 5px;"><span class="pull-left">{{textConstants.SELECT_KPIS}}</span><span ng-if="!isPrimarySelected" class="pull-left errorLabel show" style="margin-left: 115px;">You must select Primary KPI.</span></label>
								<div class="col-md-12 zeroPadding">
									<div class="col-md-3 zeroPadding kpiTable">
										<h3>KPI</h3>
										<label for="primaryKPI" class="col-sm-12 greyTxt miniLabels">{{textConstants.SELECT_ONE_YOU_MAY_ADD}}</label>
									</div>
									<div class="col-md-2 zeroPadding kpiTable">
										<h3>Primary KPI</h3>
										<label for="primaryKPI" class="col-sm-12 greyTxt miniLabels">{{textConstants.ONE_PRIMARY}}</label>
									</div>
									<div class="col-md-3 zeroPadding kpiTable">
										<h3>Vendor</h3>
										<label for="primaryKPI" class="col-sm-12 greyTxt miniLabels">{{textConstants.SELECT_ONE}}</label>
									</div>
									<div class="col-md-2 zeroPadding kpiTable">
										<h3>Target</h3>
										<label for="primaryKPI" class="col-sm-12 greyTxt miniLabels">{{textConstants.ENTER_VALUE}}</label>
									</div>
									<div class="col-md-2 zeroPadding kpiTable">
										<h3>Use for Billing</h3>
										<label for="primaryKPI" class="col-sm-12 greyTxt miniLabels">{{textConstants.KPI_BILLING}}</label>
									</div>
								</div>
								<div class="col-md-12 zeroPadding" ng-repeat="kpiObj in Campaign.kpiArr track by $index" style="margin-bottom:10px;">

									<div class="col-md-3 zeroPadding kpiTable">
										<div class="col-md-12 zeroPadding dropdown-workflow">
											<div class="dropdown">
												<button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" ng-bind="Campaign.kpiArr[$index]['kpiType'] | displayToCamelCase">
													<!--<span class="text">{{Campaign.kpiArr[$index]['kpiType'] | toCamelCase}}</span>-->
													<span class="icon-arrow-down" ></span>
												</button>
												<ul class="dropdown-menu" aria-labelledby="selectKPI"  id="selectKPI">
													<li class="kpi.active?available:''" ng-class="{disabled : !kpi.active, available : kpi.active}" ng-repeat="kpi in workflowData.Kpi" ng-click="kpi.active ? selectedKpi($parent.$index,kpi): ''" >
														<a>{{kpi.name}}</a>
													</li>
												</ul>
												<input type="hidden" name="kpi"  ng-model="Campaign.kpiArr[$index]['kpiType']" ng-value="{{kpi.name}}" field="kpiType" index="{{$index}}" required hiddenkpi>
												<!--<input type="hidden" name="kpi" ng-init="Campaign.kpiArr[$index]['kpiType']='Select from list';" ng-model="Campaign.kpiArr[$index]['kpiId']" ng-value="{{kpi.id}}" field="kpiId" index="{{$index}}" required hiddenkpi>-->
											</div>
										</div>
									</div>

									<div class="col-md-2 zeroPadding kpiTable">


										<div class="col-md-12 btn-group goalBtnGroup zeroPadding">
											<label class="btn btn-primary first " ng-class="Campaign.kpiArr[$index]['isPrimary']=='true' ?'active':''">
												<input type="radio" name="demoType" autocomplete="off" ng-click="primaryKpiSelected($event,$index,true);" ng-model="Campaign.kpiArr[$index]['isPrimary']" ng-value=true field="isPrimary" index="{{$index}}" hiddenKpi>
												<div class="hideRadioBtn" style="margin-top: -18px;">
													<span style="margin: 0;">Yes</span>
												</div>
											</label>
											<label class="btn btn-primary last" ng-class="Campaign.kpiArr[$index]['isPrimary']==false ?'active':''">
												<input type="radio" name="demoType" autocomplete="off" ng-click="primaryKpiSelected($event,$index,false);" ng-model="Campaign.kpiArr[$index]['isPrimary']" ng-value=false field="isPrimary" index="{{$index}}" hiddenKpi>
												<div class="hideRadioBtn" style="margin-top: -18px;">
													<span style="margin: 0;">No</span>
												</div>
											</label>
										</div>
									</div>

									<div class="col-md-3 zeroPadding kpiTable">

										<div class="col-md-12 zeroPadding dropdown-workflow">
											<div class="dropdown">
												<button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" ng-bind="Campaign.kpiArr[$index]['vendorName']">
													<span class="icon-arrow-down"></span>
												</button>
												<ul class="dropdown-menu" aria-labelledby="selectKPI"  id="selectKPI">
													<li ng-repeat="vendor in workflowData.vendor" ng-click="selectedVendor($parent.$index,vendor)" class="available"><a>{{vendor.name}}</a></li>
												</ul>
												<input ng-if="mode!=='edit'" type="hidden" name="vendor" ng-init="Campaign.kpiArr[$index]['vendorName']='Select from list';"  ng-model="Campaign.kpiArr[$index]['vendorId']" ng-value="{{vendor.id}}" field="vendorId" index="{{$index}}" hiddenkpi>
												<input ng-if="mode==='edit'"type="hidden" name="vendor" ng-model="Campaign.kpiArr[$index]['vendorId']"  ng-value="{{vendor.id}}" field="vendorId" index="{{$index}}" hiddenkpi>
											</div>
										</div>
									</div>

									<div class="col-md-2 zeroPadding kpiTable symbol-input">

										<span class="symbol">#</span>
										<input type="text" class="col-md-12" ng-model="Campaign.kpiArr[$index]['kpiValue']" ng-keyup="setLeftNavPrimaryKpi($index); ComputeCost()" field="kpiValue"  whole-number-only="whole-number-only" index="{{$index}}"/>
									</div>

									<div class="col-md-2 zeroPadding kpiTable">


										<div class="col-md-12 btn-group goalBtnGroup zeroPadding">
											<label class="btn btn-primary first" ng-class="Campaign.kpiArr[$index]['isBillable']=='true' ?'active':''">
												<input type="radio" name="demoType" autocomplete="off" ng-click="kpiBilling($event,$index,true);" ng-model="Campaign.kpiArr[$index]['isBillable']" ng-value=true field="isBillable" index="{{$index}}" hiddenKpi>
												<div class="hideRadioBtn" style="margin-top: -18px;">
													<span style="margin: 0;">Yes</span>
												</div>
											</label>
											<label class="btn btn-primary last" ng-class="(Campaign.kpiArr[$index]['isBillable']==false && Campaign.kpiArr[$index]['isBillable'] !== '' ) ?'active':''">
												<input type="radio" name="demoType" autocomplete="off" ng-click="kpiBilling($event,$index,false);" ng-model="Campaign.kpiArr[$index]['isBillable']" ng-value=false field="isBillable" index="{{$index}}" hiddenKpi >
												<div class="hideRadioBtn" style="margin-top: -18px;">
													<span style="margin: 0;">No</span>
												</div>
											</label>
										</div>
									</div>
									<!--<span class="remove-row selectkpiObj">-->
                                <span class="remove-row" ng-if="$index>0">
                                <!--<span class="remove-row">-->
                                    <span class="icon-clear" index="{{$index}}" clearkpirow></span>
                                </span>

								</div>
								<div class="col-md-12 zeroPadding">
									<a class="btn btn-link pull-left addRowMedia" ng-click="addMoreKpi()"><span class="icon-plus"></span><span>Add another KPI</span></a>
								</div>
							</div>

							<!--==== Row 3 ====-->
							<div class="col-md-12 zeroPadding">
								<label for="nameTitleCampaign" class="col-sm-12 labelQuestTxt" style="margin-bottom: 5px;">{{textConstants.ADD_COST}}</label>
								<div class="col-md-12 zeroPadding" >
									<div class="col-md-3 zeroPadding kpiTable" style="width: 340px;">
										<h3>Cost Category</h3>
										<label for="primaryKPI" class="col-sm-12 greyTxt miniLabels">{{textConstants.ADD_COST}}</label>
									</div>
									<div class="col-md-1 zeroPadding kpiTable" style="width: 98px;">
										<h3>Calculation</h3>
										<label for="primaryKPI" class="col-sm-12 greyTxt miniLabels">{{textConstants.SELECT_ONE}}</label>
									</div>
									<div class="col-md-2 zeroPadding kpiTable" style="width: 153px;">
										<h3>Vendor</h3>
										<label for="primaryKPI" class="col-sm-12 greyTxt miniLabels">{{textConstants.SELECT_ONE}}</label>
									</div>
									<div class="col-md-1 zeroPadding kpiTable">
										<h3>Rate</h3>
										<label for="primaryKPI" class="col-sm-12 greyTxt miniLabels">{{textConstants.VALUE}}</label>
									</div>
									<div class="col-md-1 zeroPadding kpiTable" style="width: 86px;">
										<h3>% of Target</h3>
										<label for="primaryKPI" class="col-sm-12 greyTxt miniLabels">{{textConstants.ENTER_VALUE}}</label>
									</div>

									<div class="col-md-1 zeroPadding kpiTable" style="padding: 0 !important; width: 145px;">
										<h3>Description</h3>
										<label for="primaryKPI" class="col-sm-12 greyTxt miniLabels">{{textConstants.VALUE_IN_REPORTING}}</label>
									</div>
								</div>
							</div>

							<div class="col-md-12 zeroPadding" ng-repeat="costObj in Campaign.costArr track by $index" style="margin-bottom:10px;">
								<div class="col-md-6 zeroPadding kpiTable" style="width: 340px;">

									<div class="col-md-12 zeroPadding">
										<div class="col-md-6 zeroPadding dropdown-workflow">
											<div class="dropdown">
												<button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" ng-bind="Campaign.costArr[$index]['costCategoryName']">
													<span class="icon-arrow-down"></span>
												</button>
												<ul class="dropdown-menu" aria-labelledby="selectKPI"  id="selectKPI">
													<li ng-repeat="cost in workflowData.costCategory" ng-click="selectedCostCategory($parent.$index,cost)" ng-value="cost.id" class="available"><a>{{cost.description}}</a></li>
												</ul>
												<input ng-if="mode!=='edit'" type="hidden" name="costCategory" ng-init="Campaign.costArr[$index]['costCategoryName']='Select from list'" ng-model="Campaign.costArr[$index]['costCategoryId']" ng-value="{{cost.id}}" field="costCategoryId" index="{{$index}}"  hiddencost>
												<input ng-if="mode==='edit'" type="hidden" name="costCategory"  ng-model="Campaign.costArr[$index]['costCategoryId']" ng-value="{{cost.id}}" field="costCategoryId" index="{{$index}}"  hiddencost>
											</div>
										</div>
										<div class="col-md-6 zeroPadding kpiTable" style="width: 150px; max-width: none; margin-left: 10px; padding-right: 0px !important;">
											<div class="col-md-12 btn-group goalBtnGroup zeroPadding">
												<label class="btn btn-primary first " ng-class="Campaign.costArr[$index]['type']==='fixed'?'active':''">
													<input type="radio" name="demoType" autocomplete="off" ng-click="rateTypeSelected($event,$index,'fixed');" ng-model="Campaign.costArr[$index]['type']" ng-value="fixed" field="type" index="{{$index}}" hiddencost>
													<div class="hideRadioBtn" style="margin-top: -18px;">
														<span style="margin: 0;">Fixed</span>
													</div>
												</label>
												<label class="btn btn-primary last " ng-class="Campaign.costArr[$index]['type']==='variable'?'active':''">
													<input type="radio" name="demoType" autocomplete="off" ng-click="rateTypeSelected($event,$index,'variable');" ng-model="Campaign.costArr[$index]['type']" ng-value="variable" field="type" index="{{$index}}" hiddencost>
													<div class="hideRadioBtn" style="margin-top: -18px;">
														<span style="margin: 0;">Variable</span>
													</div>
												</label>
											</div>
										</div>
									</div>
								</div>

								<div class="col-md-1 zeroPadding kpiTable" style="width: 98px;">

									<div class="col-md-12 zeroPadding dropdown-workflow">
										<div class="dropdown">
											<button class="btn btn-default dropdown-toggle" ng-class="Campaign.costArr[$index]['type']!='fixed'?'':'disabled'" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" ng-bind="Campaign.costArr[$index]['rateTypeName']">
												<!--<span class="text">Select</span>-->
												<span class="icon-arrow-down"></span>
											</button>
											<ul class="dropdown-menu" aria-labelledby="selectKPI"  id="selectKPI" style="overflow:visible;">
												<li class="calculation.active?available:''" ng-class="{disabled : !calculation.active, available : calculation.active}"   tooltip-placement="{{!calculation.active ? 'right':''}}" tooltip="{{!calculation.active ? 'Not Available for KPI selected.':''}}" ng-repeat="calculation in workflowData.calculation" ng-click="calculation.active?selectedCalculation($parent.$index,calculation):''" ng-value="calculation.id" ><a>{{calculation.name}}</a></li>
											</ul>
											<input ng-if="mode!=='edit'" type="hidden" name="costcalculation" ng-init="Campaign.costArr[$index]['rateTypeName']='Select'" ng-model="Campaign.costArr[$index]['rateTypeId']" ng-value="{{calculation.id}}" field="rateTypeId" index="{{$index}}"  hiddencost>
											<input ng-if="mode==='edit'" type="hidden" name="costcalculation" ng-model="Campaign.costArr[$index]['rateTypeId']" ng-value="{{calculation.id}}" field="rateTypeId" index="{{$index}}"  hiddencost>
										</div>
										<!--<label ng-if="createCampaignForm.costcalculation.$error.required" class="col-sm-12  greyTxt errorLabel">Select Calculation Type</label>-->

									</div>
								</div>

								<div class="col-md-2 zeroPadding kpiTable" style="width: 153px;">

									<div class="col-md-12 zeroPadding dropdown-workflow">
										<div class="dropdown">
											<button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" ng-bind="Campaign.costArr[$index]['vendorName']">
												<span class="icon-arrow-down"></span>
											</button>
											<ul class="dropdown-menu" aria-labelledby="selectKPI"  id="selectKPI">
												<li class="available" ng-click="selectedVendorRate($parent.$index,vendorItem)" ng-repeat="vendorItem in vendorRateData[$index]"><a>{{vendorItem.name}}</a></li>
												<!--<li class="available" ng-click="selectedVendorRate($parent.$index,vendorItem)" ng-repeat="vendorItem in vendorRateData[$index]['vendors']"><a>{{vendorItem.name}}</a></li>-->
											</ul>
											<input ng-if="mode!=='edit'" type="hidden" name="costvendor" ng-init="Campaign.costArr[$index]['vendorName']='Select from list';" ng-model="Campaign.costArr[$index]['vendorId']" ng-value="{{vendorItem.id}}" field="vendorId" index="{{$index}}"  hiddencost>
											<input ng-if="mode==='edit'"type="hidden" name="costvendor"  ng-model="Campaign.costArr[$index]['vendorId']" ng-value="{{vendorItem.id}}" field="vendorId" index="{{$index}}"  hiddencost>
										</div>
										<!--<label ng-if="createCampaignForm.costvendor.$error.required" class="col-sm-12  greyTxt errorLabel">Select Vendor</label>-->
									</div>
								</div>

								<div class="col-md-1 zeroPadding kpiTable symbol-input">
									<span class="symbol">{{locale.NUMBER_FORMATS.CURRENCY_SYM}}</span>
									<input type="text" class="col-md-12" ng-model="Campaign.costArr[$index]['rateValue']" fraction-numbers="fraction-numbers" ng-keyup="ComputeCost()" field="rateValue"  index="{{$index}}"/>
								</div>

								<div class="col-md-1 zeroPadding kpiTable symbol-input" style="width: 86px;">
									<span class="symbol" style="left: initial; right: 25px;">{{textConstants.SYMBOL_PERCENT}}</span>
									<input type="number" class="col-md-12" style="text-align: center; padding-left: 10px;" ng-model="Campaign.costArr[$index]['targetPercentage']" ng-keyup="ComputeCost()" whole-number-only="whole-number-only" max="100"  field="targetPercentage" index="{{$index}}" />
								</div>

								<div class="col-md-1 zeroPadding kpiTable" style="padding: 0 !important; width: 145px;">

									<input type="text" class="col-md-12" ng-model="Campaign.costArr[$index]['description']" field="description" index="{{$index}}"/>
								</div>
								<!--<span class="remove-row ">-->
                            <span class="remove-row" ng-if="$index>0">
                                <span class="icon-clear" index="{{$index}}" clearcostrow></span>
                            </span>


							</div>

							<div class="col-md-12 zeroPadding">
								<a class="btn btn-link pull-left addRowMedia" ng-click="addMoreCost();"><span class="icon-plus"></span><span>Add another Cost</span></a>
							</div>


							<!--==== Row 4 ====-->
							<div class="col-md-12 zeroPadding">
								<label for="nameTitleCampaign" class="col-sm-12 labelQuestTxt" style="margin-bottom: 5px;">Preferred Execution Platforms</label>
								<div class="col-md-12 zeroPadding kpiTable">
									<h3>Integrated Platforms</h3>
									<label for="primaryKPI" class="col-sm-12 greyTxt miniLabels">Select as many as you require</label>
									<input type="text" class="col-md-12 keyword-txt" ng-keyup="showKeywords(keywordText)" ng-model="keywordText"/>
									<label class="keywordWrap" ng-repeat="key in selectedKeywords">{{key.displayName}} <span class="icon-close" ng-click="removeKeyword(key);"></span></label>
									<ul ng-if="platformKeywords.length>0" class="dropdown-menu" role="menu" id="keywordsList" ng-style="dropdownCss">
										<li ng-repeat="keyword in platformKeywords | filter:keywordText" ng-click="selectKeyword(keyword)">
											<a>
												<span class="tick"></span>
												<span class="menuItemText ng-binding" >{{keyword.displayName}}</span>
											</a>
										</li>
									</ul>
								</div>
							</div>
							<a href="#contacts" data-toggle="tab" role="tab" class="nextWrapper leftNavLink contacts">
								<span class="btn btn-default" ng-click="highlightLeftNav(2)">Save & Continue</span>
							</a>
						</div>

						<div class="tab-pane fade" id="contacts">
							<h3 class="col-md-6 adName" tooltip="{{adData.adName}}">
								{{selectedCampaign.campaignName.length>0 ? (selectedCampaign.campaignName | textEllipsis: 40 ) :textConstants.WF_UNTITLED_MEDIA}}
							</h3>
							<div class="col-md-12 zeroPadding">
								<label for="nameTitleCampaign" class="col-sm-12 labelQuestTxt" style="margin-bottom: 5px;">Contacts - Coming Soon</label>
							</div>
						</div>
					</div>
				</form>
			</div>
			<!-- Settings End -->

			<!-- Message Pop Starts -->
			<div class="popMess succesfulPopMess" style="display:none;">
				<span>Media Plan has been successfully saved.</span>
			</div>
			<!-- Modal Start -->
			<div class="common-popup-container" ng-show="repushCampaignEdit">
				<div class="popup">
					<div class="popup-header-body">
						<div class="clearfix">
							<h1 class="pull-left">Media Plan Update</h1>
							<span class="close unselectable" aria-hidden="true" ng-click="cancelRepushCampaign()" >x</span>
						</div>
						<div class="popup-content">
							Save changes to Media Plan set-up and repush to execution <br> platform(s)?
						</div>
					</div>
					<div class="clearfix popup-footer" >
						<button type="button" ng-click="repushCampaign()" class="common_primary_btn pull-right" >Save & Push</button>
						<button type="button" ng-click="cancelRepushCampaign()"class="secondary_txt pull-right" >Cancel</button>
					</div>

				</div>
			</div>

			<!-- Modal End -->
			<!--<div class="popMess errorPopMess">
                <span>Please correct the {{errorAmount}} error(s) to continue.</span>
            </div>-->
			<!-- Message Pop End -->
			<div class="common-popup-container" ng-show="campaignArchive">
				<div class="popup">
					<div class="popup-header-body">
						<div class="clearfix">
							<h1 class="pull-left">Media Plan Update</h1>
							<span class="close unselectable" aria-hidden="true" ng-click="cancelArchiveCampaign()" >x</span>
						</div>
						<div class="popup-content">
							{{textConstants.CAMPAIGN_ARCHIVE_MESSAGES}}
						</div>
					</div>
					<div class="clearfix popup-footer" >
						<button type="button" ng-click="archiveCampaign($event)" class="common_primary_btn pull-right" ng-hide="deleteCampaignFailed">Archive</button>
						<button type="button" ng-click="cancelArchiveCampaign()"class="secondary_txt pull-right" >Cancel</button>
					</div>

				</div>
			</div>

		</div>
	</div>
</div>
