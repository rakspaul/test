<div class="col-md-7 zeroPadding">
    <h2 class="col-md-12 zeroPadding marginBottom">Set Targeting</h2>
    <a href="javascript:void(0);" class="helpLink" style="margin-top: 10px; display: inline-block;">Which target audience should I choose for my ad?</a>
</div>
<!-- <div class="col-md-12 zeroPadding">
    <a href="" class="addTargetBtn"><img ng-src="/assets/images/workflow/icon_add.svg" alt="" height="16" style="margin: -3px 3px 0 0;"/> Add Targeting</a>
</div> -->

<!--=== Targeting Type ===-->
<div class="col-md-12 zeroPadding dropdown-workflow">
    <div class="col-md-3 zeroPadding">
        <div class="dropdown ddlSetTarget msgPopupHolder">
            <div class="msgPopup" ng-show="!$parent.isPlatformSelected">
                <div class="msg">
                    To enable Targeting for this ad, you must first set a Buying Platform. Select one now?
                </div>
                <div class="btn-holder">
                    <a href="#buying" data-toggle="tab" class="pull-right common_primary_btn leftNavLink">Select Platform</a>
                </div>
            </div>
            <!-- <button class="btn btn-default dropdown-toggle" type="button" ng-disabled="!$parent.isPlatformSelected" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                <span class="pull-left">{{textConstants.WF_ADD_TARGETING_LABEL}}</span>
                <span class="icon-arrow-down"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                <li ng-repeat="geoTarget in geoTargetArr" ng-class = "{'disabled' : !geoTarget.enable,  'active' : adData.geoTargetName === geoTarget.name}" ng-click="selectGeoTarget(geoTarget.name)">
                    <a>{{geoTarget.name}} <span ng-if="adData.geoTargetName === geoTarget.name"> (Added)</span></a>
                </li>
            </ul> -->
        </div>
    </div>
</div>
<div class="col-md-12 zeroPadding">
    <!--Audience Targeting Card-->
    <div class="col-md-6 cardSelectHolder" ng-class="{true: 'active'}[selectedTargeting['audience']]">
        <span ng-if="selectedAudience && selectedAudience.length > 0" class="icon-inline-edit" ng-style="(selectedAudience.length >0)?{'display':'block'}:{'display':'none'}"></span>
        <div class="icon-audience"></div>
        <p>Audience Segments</p>
        <div ng-if="!selectedAudience || selectedAudience.length == 0">
            <span>Reach the right audience by selecting focus segments</span>
            <p style="margin: 0px;"><span>All Audience (default)</span></p>
        </div>
        <div class="targetDataSaved" ng-if="selectedAudience && selectedAudience.length > 0">
            <div class="targetDataSavedTop">
                <div class="icon-target"></div>
                <span>Selected</span>
                <div class="badge">{{selectedAudience.length}}</div>
            </div>
            <span class="targetListItem" ng-if="selectedAudience.length >= 1">{{selectedAudience[0].name | limitTo: 30}}{{selectedAudience[0].name.length > 30 ? '...' : ''}}</span>
            <span class="targetListItem" ng-if="selectedAudience.length >= 2">{{selectedAudience[1].name | limitTo: 30}}{{selectedAudience[1].name.length > 30 ? '...' : ''}}</span>
            <span class="targetListItem" ng-if="selectedAudience.length >= 3">{{selectedAudience[2].name | limitTo: 30}}{{selectedAudience[2].name.length > 30 ? '...' : ''}}</span>
            <span class="targetListItemMore" ng-if="selectedAudience.length > 3">+{{selectedAudience.length - 3}} more</span>
        </div>
        <span  ng-if="$parent.isPlatformSelected" class="onSelectBtn btn btn-default active" ng-click="selectAudTarget()"></span>
        <input ng-if="!selectedAudience || selectedAudience.length ==0" type="button" name="platform" value="Create" ng-disabled="!$parent.isPlatformSelected" class="btn btn-default" ng-click="selectAudTarget()">
    </div>
    <!--Geo Targeting Card-->
    <div class="col-md-6 cardSelectHolder" ng-class="{true: 'active'}[selectedTargeting['geography']]">
        <span ng-if="adData.geoTargetingData" class="icon-inline-edit" ng-style="(geoTargetingData.selected.previewData.include.regions.length > 0 || geoTargetingData.selected.previewData.include.cities.length > 0 || geoTargetingData.selected.previewData.include.zipCodes[0].values.length > 0)?{'display':'block'}:{'display':'none'}"></span>
        <div class="icon-location"></div>
        <p>Geography <span>(US Only)</span></p>
        <div ng-if="!geoTargetingData.selected.previewData.include && !geoTargetingData.selected.previewData.exclude ">
            <span>Target your audience by location</span>
            <p style="margin: 0px;"><span>All US (default)</span></p>
        </div>
        <div class="targetDataSaved" ng-if="geoTargetingData.selected.previewData.include || geoTargetingData.selected.previewData.exclude ">
            <div class="targetDataSavedTop">
                <div class="icon-target"></div>
                <span>Included</span>
                <div class="badge">
                    {{geoTargetingData.selected.previewData.include.regions.length + geoTargetingData.selected.previewData.include.cities.length + geoTargetingData.selected.previewData.include.zipCodes[0].values.length}}
                </div>
            </div>
            <span class="targetListItem">
                {{geoTargetingData.selected.previewData.include.regions.length}} Regions,
                {{geoTargetingData.selected.previewData.include.cities.length}} City,
                {{geoTargetingData.selected.previewData.include.zipCodes[0].values.length}} Postal codes</span>
            <div class="targetDataSavedTop" style="padding-top: 20px;" ng-if="geoTargetingData.selected.previewData.exclude.cities.length > 0">
                <div class="icon-exclude"></div>
                <span>Excluded</span>
                <div class="badge">{{geoTargetingData.selected.previewData.exclude.cities.length}}</div>
            </div>
            <span class="targetListItem">{{geoTargetingData.selected.previewData.exclude.cities.length}} Cities</span>
        </div>
        <span ng-if="adData.geoTargetingData" class="onSelectBtn btn btn-default active" ng-click="mode == 'edit' ? updateGeoTargets() : selectGeoTarget()"></span>
        <input ng-if="!geoTargetingData.selected.previewData.include && !geoTargetingData.selected.previewData.exclude " type="button" name="platform" value="Create" ng-disabled="!$parent.isPlatformSelected" class="btn btn-default" ng-click="selectGeoTarget()">
    </div>
    <!--Daypart Targeting Card-->
    <div class="col-md-6 cardSelectHolder" ng-class="{true: 'active'}[selectedTargeting['daily']]">
        <span ng-if="selectedDayParts['data'].length  > 0" class="icon-inline-edit" ng-style="(selectedDayParts['data'].length >0)?{'display':'block'}:{'display':'none'}"></span>
        <div class="icon-activity"></div>
        <p>Daypart </p>
        <div ng-if="!selectedDayParts['data'] || selectedDayParts['data'].length  == 0">
            <span>Select when to show your Ad by restricting day and time</span>
            <p style="margin: 0px;"><span>All Days & Times (default)</span></p>
        </div>
        <div class="targetDataSaved" ng-if="selectedDayParts['data'] && selectedDayParts['data'].length  > 0">
            <div class="targetDataSavedTop">
                <div class="icon-target"></div>
                <span>Included</span>
                <div class="badge">{{getSelectedDays()}}</div>
            </div>
            <span class="targetListItem" ng-if="selectedDayParts['selected'] != 'Custom schedule'">{{selectedDayParts['selected']}}</span>
            <span class="targetListItem" ng-if="selectedDayParts['data'].length >= 1 && selectedDayParts['selected'] == 'Custom schedule'">{{selectedDayParts['data'][0].day}} {{(selectedDayParts['data'][0].startTime)?selectedDayParts['data'][0].startTime:""}} {{(selectedDayParts['data'][0].endTime)?selectedDayParts['data'][0].endTime:""}}</span>
            <span class="targetListItem" ng-if="selectedDayParts['data'].length >= 2 && selectedDayParts['selected'] == 'Custom schedule'" >{{selectedDayParts['data'][1].day}} {{(selectedDayParts['data'][1].startTime)?selectedDayParts['data'][1].startTime:""}} {{(selectedDayParts['data'][0].endTime)?selectedDayParts['data'][0].endTime:""}}</span>
            <span class="targetListItem" ng-if="selectedDayParts['data'].length >= 3 && selectedDayParts['selected'] == 'Custom schedule'">{{selectedDayParts['data'][2].day}} {{(selectedDayParts['data'][2].startTime)?selectedDayParts['data'][2].startTime:""}} {{(selectedDayParts['data'][0].endTime)?selectedDayParts['data'][0].endTime:""}}</span>
            <span class="targetListItemMore" ng-if="selectedDayParts['data'].length > 3 && selectedDayParts['selected'] == 'Custom schedule'">+{{selectedDayParts['data'].length - 3}} more</span>
        </div>
        <span ng-if="$parent.isPlatformSelected" class="onSelectBtn btn btn-default active" ng-click="selectDayTarget()"></span>
        <input ng-if="!selectedDayParts['data'] || selectedDayParts['data'].length  == 0" type="button" name="platform" value="Create" ng-disabled="!$parent.isPlatformSelected" class="btn btn-default" ng-click="selectDayTarget()">
    </div>
</div>





<!--=== Audience Targeting ===-->
<div class="col-md-12 targetingSlide" id="audienceTargeting" ng-include="'/assets/html/workflow/partials/targetings/audience_targeting.html'" ng-controller="AudienceTargettingController"></div>

<div class="col-md-12 targetingSlide" id="geographyTargeting" ng-include="'/assets/html/workflow/partials/targetings/geography_targeting.html'" ></div>

<div class="col-md-12 targetingSlide" id="dayTargeting" ng-include="'/assets/html/workflow/partials/targetings/day_targeting.html'" ng-controller="daypartController"></div>



<!--=== Next Step Panel ===-->
<span class="nextWrapper leftNavLink">
    <a href="#inventoryView" data-toggle="tab"  class="btn btn-default">{{textConstants.WF_AD_SAVE_CONTINUE}}</a>
</span>

<div class="msgPopupHolder" id="confirmBox" ng-show="showConfirmBox">
    <div class="msgPopup">
        <div>
            <div class="msg pull-left" style="padding-top: 10px;">
                Are you sure?
            </div>
            <div class="clearfix btn-holder" style="margin: 0;">
                <div class="pull-right common_primary_btn" ng-click="removeSelectedList(boxType, boxsubType);">Yes</div>
                <div class="pull-right secondary_txt"  ng-click="hideConfirmBox()">No</div>
            </div>
        </div>
    </div>
</div>
