<div class="col-md-7 zeroPadding">
    <span class="col-md-12 zeroPadding adName" tooltip="{{adData.adName}}">{{adData.adName | textEllipsis: 55}}</span>
    <h2 class="col-md-12 zeroPadding marginBottom">Select Your Target Audience <a>or Choose a saved preset</a></h2>
    <a href="javascript:void(0);">Which target audience should I choose for my ad?</a>
</div>
<!-- <div class="col-md-12 zeroPadding">
    <a href="" class="addTargetBtn"><img ng-src="/assets/images/workflow/icon_add.svg" alt="" height="16" style="margin: -3px 3px 0 0;"/> Add Targeting</a>
</div> -->

<!--=== Targeting Type ===-->
<div class="col-md-12 zeroPadding">
    <div class="dropdown ddlSetTarget msgPopupHolder">
        <div class="msgPopup" ng-show="!$parent.isPlatformSelected">
            <div class="msg">
                To enable Targeting for this ad, you must first set a Buying Platform. Select one now?
            </div>
            <div class="btn-holder">
                <a href="#buying" data-toggle="tab" class="pull-right common_primary_btn leftNavLink">Select Platform</a>
            </div>
        </div>
        <button class="btn btn-default dropdown-toggle" type="button" ng-disabled="!$parent.isPlatformSelected" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
            {{geoTargetName ? geoTargetName : 'Add Targeting'}}
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
            <!--Abi to disable something in the DDL just add (class="disabled") to the li elements-->
            <li ng-repeat="geoTarget in geoTargetArr" ng-class = "{'disabled' : !geoTarget.enable}">
                <a ng-href="javascript:void(0);" ng-click="selectGeoTarget(geoTarget.name)">{{geoTarget.name}}</a>
            </li>
        </ul>
    </div>
</div>


<!--=== Targeting Form ===-->
<div class="col-md-12 zeroPadding targettingFormWrap" ng-if="geoTargetName">
    <div class="col-md-7 zeroPadding tabbable" style="padding-right: 10px !important;">
        <h2>{{geoTargetName}} <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span><span>(US only)</span></h2>

        <div class="tooltipWrap zipCodeTooltip" ng-show="enableZipCode">
            <span>Including zip / postal codes is going to limit your geographic targeting significantly.</span>
            <a ng-href="javascript:void(0);" class="btn btn-default pull-right" ng-click="showGeographyTabsBox(null, 'zip', false); enableZipCode = false;" role="button">Continue</a>
            <a href="javascript:void(0);" ng-click="enableZipCode = false;" class="btn btn-link pull-right"  role="button">Cancel</a>
        </div>

        <ul class="nav nav-tabs">
          <li class="active"><a ng-click="showGeographyTabsBox($event, 'regions')" ng-href="javascript:void(0);" >REGION & CITY</a></li>
          <li><a ng-href="javascript:void(0);" ng-click="showGeographyTabsBox($event, 'dmas')" >DMA</a></li>
          <li><a  id="zipCodeTab" ng-href="javascript:void(0);" ng-click="showGeographyTabsBox($event, 'zip', true); enableZipCode = true;">ZIP / POSTAL CODE</a></li>
        </ul>
      
        <div class="tab-content">
            <!---- start region and city Container ---------->
            <!--Search Input-->
                <div class="col-md-12 searchInput radioBtnToggle">
                    <div class="input-group">
                      <input type="text" class="form-control disabled searchBox" data-searchfield= "{{selectedTab}}" ng-keyup="search($event)" placeholder="Search for regions or cities">
                      <span class="input-group-btn">
                        <button class="btn btn-default disabled" type="button"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></button>
                      </span>
                    </div>

                    <div class="col-md-12 zeroPadding">
                        <div class="pull-left zeroPadding regionCityTab" ng-show="selectedTab !== 'dmas'">
                            <ul class="nav nav-tabs">
                                <li class="active"><!-- add tooltip_holder when you want the tooltip to be visible -->
                                    <a href="#region"  id="tab_region"  data-toggle="tab" ng-click="listRegions();">Region</a>
                                    <span class="common_tooltip" style="display:none;">Once you include or exclude a city, regions are not available for further inclusion or exclusion.</span>
                                </li>
                                <li ng-show="showCitiesTab"><a href="#city" ng-click ="listCities();" data-toggle="tab">City</a></li>
                            </ul>
                        </div>
                        <div class="col-md-4 zeroPadding switchWrap" ng-show="selectedTab !== 'dmas'">
                            <span ng-show="selectedTab === 'regions'"><img ng-src="/assets/images/workflow/{{regionsIncludeSwitchLabel? 'icon_target' : 'icon_exclude'}}.svg" alt="" height="15"/> {{regionsIncludeSwitchLabel? 'Include' : 'Exclude'}}</span>
                            <span ng-show="selectedTab === 'cities'"><img ng-src="/assets/images/workflow/{{citiesIncludeSwitchLabel? 'icon_target' : 'icon_exclude'}}.svg" alt="" height="15"/> {{citiesIncludeSwitchLabel? 'Include' : 'Exclude'}}</span>
                            <div class="btn-group btn-ani-toggle pull-right regions" ng-show="showSwitch" ng-click="switchInclude()">
                                <button class="btn btn-xs btn-success active"></button>
                                <div class="togBtnBg"></div>
                            </div>
                        </div>
                        <div class="col-md-4 zeroPadding switchWrap " ng-show="selectedTab === 'dmas'">
                            <span><img ng-src="/assets/images/workflow/{{dmasIncludeSwitchLabel? 'icon_target' : 'icon_exclude'}}.svg" alt="" height="15"/> {{dmasIncludeSwitchLabel? 'Include' : 'Exclude'}}</span>
                            <div class="btn-group btn-ani-toggle pull-right dmas" ng-click="switchInclude()">
                                <button class="btn btn-xs btn-success active"></button>
                                <div class="togBtnBg"></div>
                            </div>
                        </div>
                    </div>
                
                    <div class="clearfix list_head">
                        <div ng-show="selectedTab !=='regions'" class="pull-left list_val_col">City</div>
                        <div class="pull-left list_val_col"><!-- add "sort-icon-holder" always after implementing sorting--> <!-- add "active" when selected -->
                            <span class="pull-left">Region</span>
                            <span class="common-sort-icon" style="display:none;"></span> <!-- add "descending" or "ascending" whenever sorted  and remove display:none -->
                        </div>
                    </div>
                </div>
            <div id="regions" class="tab-pane active contentBox">
                <div class="tab-content">
                    <!-- --- start region block ----------------- -->
                    <div id="region" class="tab-pane active">
                        <div>
                            <div class="list_holder">
                                
                                <div class="list_row_holder"  lr-infinite-scroll="loadMoreRegions" time-threshold="100">
                                    <div class="clearfix list_row" ng-repeat="region in geoTargetingData.regions">
                                        <div class="pull-left list_row_chkbox"><input name="regionchkbox" id="{{region.id}}" ng-model="bool" ng-click="sync(bool, region, 'regions')" ng-checked="isChecked(region.id, 'regions')" type="checkbox" value="" /></div>
                                        <div class="pull-left list_val_col">{{region.name}}</div>
                                    </div>
                                    <div ng-if="regionFetching" class="common-load-more"></div>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                    <!-- --- end region block ----------------- -->
    
                    <!-- --- start city block ----------------- -->
                    <div id="city" class="tab-pane"  >
                        <div>
                            <div class="list_holder">
                                
                                <div class="list_row_holder" lr-infinite-scroll="loadMoreCities" time-threshold="100">
                                    <div class="clearfix list_row" ng-repeat="city in geoTargetingData.cities track by $index">
                                        <div class="pull-left list_row_chkbox"><input name="regionchkbox" id="{{city.id}}" ng-model="bool" ng-click="sync(bool, city, 'cities')" ng-checked="isChecked(city.id, 'cities')" type="checkbox" value="" /></div>
                                        <div class="pull-left list_val_col">{{city.name}}</div>
                                        <div class="pull-left list_val_col">{{city.parent.name}}</div>
                                    </div>
                                    <div ng-if="cityFetching" class="common-load-more"></div>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                    <!----- end city block ------------------->
                </div>
            </div>
            <!---- end region and city block ---------->

            <!---- start DMA container -------->
            <div id="dmas" class="tab-pane contentBox">
                <!-- <div class="col-md-12 searchInput radioBtnToggle">
                    <div class="col-md-12 zeroPadding">
                        <div class="col-md-4 zeroPadding switchWrap">
                            <span id="switchLabel1"><img ng-src="/assets/images/workflow/icon_target.svg" alt="" height="15"/> Include</span>
                            <span id="switchLabel2"><img ng-src="/assets/images/workflow/icon_exclude.svg" alt="" height="15"/> Exclude</span>

                            <div class="btn-group btn-ani-toggle pull-right"  ng-click="switchInclude()">
                                <button class="btn btn-xs btn-success active"></button>
                                <div class="togBtnBg"></div>
                            </div>
                        </div>
                    </div>
                </div> -->
                <div  >
                    <div class="list_holder">
                       
                        <div class="list_row_holder" lr-infinite-scroll="loadMoreDmas" time-threshold="100">
                            <div class="clearfix list_row" ng-repeat="dma in geoTargetingData.dmas">
                                <div class="pull-left list_row_chkbox"><input id="{{dma.id}}" type="checkbox" ng-model="bool" ng-click="sync(bool, dma, 'dmas')" ng-checked="isChecked(dma.id, 'dmas')" value="" /></div>
                                <div class="pull-left list_val_col">{{dma.dmaName}}</div>
                                <div class="pull-left list_val_col">{{dma.parent.name}}</div>
                            </div>
                            <div ng-show="dmasFetching" class="loading-icon"></div>
                        </div>
                    </div>
                </div>
                
            </div>
            <!----- end DMA container ----------->

            <!---- start Zip Container ---------->
            <div id="zip" class="tab-pane contentBox">
                <textarea class="form-control" id="zipCodes" name="zipCodes" ng-model="adData.zipCodes" rows="3" placeholder="Separate zip / postal codes by comma. Use hyphens to denote ranges."></textarea>
                <div class="col-md-12 zeroPadding">
                    <button type="button" ng-click="addZipCode()" ng-disabled="!adData.zipCodes" class="btn btn-default pull-right">
                        <img ng-src="/assets/images/workflow/icon_target.svg" alt="" height="15" /> Include
                    </button>
                </div>
                <div class="clearfix message">
                        <span class="info" ng-if="zipCodesObj.info.length > 0">{{zipCodesObj.info[0]}}</span>
                        <span class="error" ng-if="zipCodesObj.error.length > 0">{{zipCodesObj.error[0]}}</span>
                </div>

            </div>
            <!---- end Zip Container ---------->


        </div>
    </div>
    <div class="col-md-5 zeroPadding selectedTables">
        <div class="col-md-12">
            <h2>Selected</h2>
        </div>
        <div class="col-md-12" ng-if="geoTargetingData.selected.regions.length >0 || geoTargetingData.selected.cities.length >0 || geoTargetingData.selected.dmas.length >0 || geoTargetingData.selected.zip.length >0">
            <div class="table regionTable" ng-if="geoTargetingData.selected.regions.length >0 || geoTargetingData.selected.cities.length >0">
                <div>
                    <div class="clearfix each-row" >
                        <div class="pull-left">Regions & Cities</div>
                        <div class="pull-right removeAll">
                            <a ng-href="#" ng-click="showRemoveConfirmBox($event, 'regions', 'cities');">Remove All</a>
                        </div>
                    </div>
                </div>
                <div class="values-table">
                    <div class="clearfix each-row"  ng-repeat="region in geoTargetingData.selected.regions">
                        <div class="pull-left"><img ng-src="/assets/images/workflow/{{region.regionsIncluded ? 'icon_target' : 'icon_exclude'}}.svg" alt="" height="15"/> {{region.name}}</div>
                        <div class="pull-right cancel"><img ng-src="/assets/images/workflow/icon_small_remove.svg" alt="" height="9" class="removeItem" ng-click="removeItem(region, 'regions')" /></div>
                        <div class="group">
                            <div ng-repeat="city in region.cities">
                                <div class="pull-left"><img ng-src="/assets/images/workflow/{{city.citiesIncluded ? 'icon_target' : 'icon_exclude'}}.svg" alt="" height="15"/> {{city.name}}</div>
                                <div class="pull-right cancel"><img ng-src="/assets/images/workflow/icon_small_remove.svg" alt="" height="9" class="removeItem" ng-click="removeItem(city, 'regions')" /></div>
                            </div>
                        </div>
                    </div>
                    <div ng-if="showCitiesOnly" class="clearfix each-row"  ng-repeat="city in geoTargetingData.selected.cities">
                        <div class="pull-left"><img ng-src="/assets/images/workflow/{{city.citiesIncluded ? 'icon_target' : 'icon_exclude'}}.svg" alt="" height="15"/> {{city.name}}({{city.parent.name}})</div>
                        <div class="pull-right cancel"><img ng-src="/assets/images/workflow/icon_small_remove.svg" alt="" height="9" class="removeItem" ng-click="removeItem(city, 'cities')" /></div>
                    </div>
                    <div ng-if="geoTargetingData.selected.regions.length === 0 && geoTargetingData.selected.cities.length  === 0">
                        <div class="emptyTableLabel">Not Set</div>
                    </div>
                </div>
            </div>
            <div class="table dmaTable" ng-if="geoTargetingData.selected.dmas.length >0">
                <div>
                    <div class="clearfix each-row" >
                        <div class="pull-left">DMAs</div>
                        <div class="pull-right removeAll">
                            <a ng-href="#" ng-click="showRemoveConfirmBox($event, 'dmas');">Remove All</a>
                        </div>
                    </div>
                </div>
                <div class="values-table">
                    <div class="clearfix each-row"  ng-repeat="dma in geoTargetingData.selected.dmas">
                        <div class="pull-left"><img ng-src="/assets/images/workflow/{{dma.dmasIncluded ? 'icon_target' : 'icon_exclude'}}.svg" alt="" height="15"/>{{dma.name}}</div>
                        <div class="pull-right cancel"><img ng-src="/assets/images/workflow/icon_small_remove.svg" alt="" height="9" class="removeItem" ng-click="removeItem(dma, 'dmas')" /></div>
                    </div>
                    <div ng-if="geoTargetingData.selected.dmas.length === 0">
                        <div class="emptyTableLabel">Not Set</div>
                    </div>
                </div>
            </div>
            <div class="table zipTable" ng-if="geoTargetingData.selected.zip.length >0">
                <div>
                    <div class="clearfix each-row" >
                        <div class="pull-left">Zip / Postal Codes</div>
                        <div class="pull-right removeAll">
                            <a ng-href="#" ng-click="showRemoveConfirmBox($event, 'zip');">Remove All</a>
                        </div>
                    </div>
                </div>
                <div class="values-table">
                    <div ng-repeat="zipCodeList in geoTargetingData.selected.zip">
                        <div class="clearfix each-row" ng-repeat="zipCode in zipCodeList.added">
                            <div class="pull-left"><img ng-src="/assets/images/workflow/icon_target.svg" alt="" height="15"/> {{zipCode}}</div>
                            <div class="pull-right cancel"><img ng-src="/assets/images/workflow/icon_small_remove.svg" alt="" height="9" class="removeItem" ng-click="removeItem(zipCode, 'zip')"></div>
                        </div>
                        <div ng-if="geoTargetingData.selected.zip.length === 0">
                            <div class="emptyTableLabel">Not Set</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div ng-if="geoTargetingData.selected.regions.length === 0 && geoTargetingData.selected.cities.length ===0 && geoTargetingData.selected.dmas.length === 0 && geoTargetingData.selected.zip.length === 0" class="emptyTableLabel">Not Set</div>

    </div>
    <div class="col-md-12 zeroPadding">
        <button ng-disabled="!(geoTargetingData.selected.regions.length >0 || geoTargetingData.selected.cities.length>0 || geoTargetingData.selected.dmas.length>0 || geoTargetingData.selected.zip.length>0)" class="pull-right common_primary_btn" ng-click="saveGeography()">Save Geography</button>
        <a href="javascript:void(0);" class="pull-right secondary_txt" >Cancel</a>
    </div>
</div>

<!--=== Selected Targeting ===-->
<div class="col-md-12 targettingSelected" style="display:none;">
    <div class="col-md-12 tsHeader">
        <h2>Geography <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span><span>(US only)</span></h2>
        <a href="javascript:void(0);" ng-click="deleteGeography()"><img ng-src="/assets/images/workflow/icon_trash.svg" alt="" height="15"/></a>
        <a href="javascript:void(0);" ng-click="editGeography()"><img ng-src="/assets/images/workflow/icon_pencil.svg" alt="" height="15"/></a>
        <div class="col-md-6 zeroPadding" style="clear: left;">
            <span><img ng-src="/assets/images/workflow/icon_target.svg" alt="" height="15"/> Include</span>
        </div>
        <div class="col-md-6 zeroPadding">
            <span><img ng-src="/assets/images/workflow/icon_exclude.svg" alt="" height="15"/> Exclude</span>
        </div>
    </div>

    <div class="col-md-12 tsBody">
        <div class="col-md-6 zeroPadding">
            <div class="regioncity" ng-if="geoTargetingData.selected.previewData.include.regions.length>0 || geoTargetingData.selected.previewData.include.cities.length>0">
                <h5>Regions & Cities</h5>
                <span ng-repeat="regioncity in geoTargetingData.selected.previewData.include.regions" >{{regioncity.name}}</span>
                <span ng-repeat="regioncity in geoTargetingData.selected.previewData.include.cities">{{regioncity.parent.name}}, {{regioncity.name}}</span>
            </div>
            <br/>
            <div class="zipCode" ng-if="geoTargetingData.selected.previewData.include.zipCodes[0].values.length>0">
                <h5>Zip / Postal Codes</h5>
                <span ng-repeat="zipCode in geoTargetingData.selected.previewData.include.zipCodes[0].values">{{zipCode}}</span>
            </div>
            <br/>
            <div class="dmas" ng-if="geoTargetingData.selected.previewData.include.dmas.length>0">
                <h5>DMAs</h5>
                <span ng-repeat="dma in geoTargetingData.selected.previewData.include.dmas" >{{dma.name}}</span>
            </div>
        </div>
        <div class="col-md-6 zeroPadding">
            <div class="regioncity" ng-if="geoTargetingData.selected.previewData.exclude.regions.length>0 || geoTargetingData.selected.previewData.exclude.cities.length>0">
                <h5>Regions & Cities</h5>
                <span ng-repeat="regioncity in geoTargetingData.selected.previewData.exclude.regions" >{{regioncity.name}}</span>
                <span ng-repeat="regioncity in geoTargetingData.selected.previewData.exclude.cities">{{regioncity.parent.name}}, {{regioncity.name}}</span>
            </div>
            <br/>
            <div class="dmas" ng-if="geoTargetingData.selected.previewData.exclude.dmas.length>0">
                <h5>DMAs</h5>
                <span ng-repeat="dma in geoTargetingData.selected.previewData.exclude.dmas" >{{dma.name}}</span>
            </div>
        </div>
    </div>    
</div>

<!--=== Next Step Panel ===-->
<a href="#inventoryView" data-toggle="tab" class="nextWrapper leftNavLink">
    <img src="/assets/images/cdesk/arrow_down.png" alt=""/>
</a>

<div class="msgPopupHolder" id="confirmBox" ng-show="showConfirmBox">
    <div class="msgPopup">
        <div>
            <div class="msg">
                Are you sure?
            </div>
            <div class="clearfix btn-holder">
                <div class="pull-right common_primary_btn" ng-click="removeSelectedList(boxType, boxsubType);">Yes</div>
                <div class="pull-right secondary_txt"  ng-click="hideConfirmBox()">No</div>
            </div>
        </div>
    </div>
</div>