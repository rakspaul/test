<div class="reports_main_page_holder">
    <div class="reports_header_tabs_holder clearfix">
        <report-tabs></report-tabs>
    </div>
    <div class="inventory_reports_container" >
        <div class="clearfix inventory_header">
            <div class="pull-left dropdown dropdown_type1"  id="performance_camp_list_dd">
                <campaign-drop-down selected-obj=selectedCampaign> </campaign-drop-down>
            </div>
            <div class="pull-right download_report">
                <download-report></download-report>
            </div>
        </div>

        <div id="performance_strategies_dd" ng-show="isStrategyDropDownShow">
            <strategy-drop-down selected-obj=selectedStrategy ></strategy-drop-down >
        </div>

        <div class="common-load-icon_viewability" ng-show="strategyLoading"></div>
    </div>

    <div class="platform_container" ng-hide="strategyLoading">
            <div class="no_data_found" ng-if="!strategyFound" ng-bind-html="getMessageForDataNotAvailable('strategy')"></div>
            <div class="reports_tabs_content_container" ng-show="strategyFound">
                <div class="reports_tabs_content_container">
                    <!-- -------START :  Platform Tabs ------------------------ -->
                    <div class="clearfix">
                        <div class="clearfix reports_tabs_holder">
                            <div class="each_tab cost_tab active " id="platform_performance">
                                <div class="each_tab_text">
                                    Performance
                                </div>
                            </div>
                            <div class="each_tab " id="platform_cost" ng-show="isAgencyCostModelTransparent">
                                <div class="each_tab_text">
                                    Cost
                                </div>
                            </div>
                            <div class="each_tab cost_tab " id="platform_viewablity">
                                <div class="each_tab_text">
                                    Viewability
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- -------END :  Platform Tabs ------------------------ -->

                    <!-- -------START :  Performance Block ------------------------ -->
                    <div class="reports_block" id="reports_platform_performance_block">
                        <div class="no_data_found" ng-if="dataNotFoundForPerformance" ng-bind-html="getMessageForDataNotAvailable('performance')"></div>
                        <div class="reports_details_outer_container" ng-show="!dataNotFoundForPerformance" >
                            <div class="clearfix reports_platform_header">
                                <performance-header></performance-header>
                            </div>
                            <div class="strategy_total_container ">
                                <div class="strategy_total_container_header clearfix">
                                    <div class="each_col first_col">
                                        {{strategyHeading}}:
                                    </div>
                                    <div class="row_list_holder">
                                        <div class="common-load-icon" ng-show="performanceBusy"></div>
                                        <div class="clearfix each_row_list expandRow" ng-repeat="performanceData in strategyDataByPerformance.platform_metrics.performance track by $index" ng-include="'performanceTpl'"></div>
                                    </div>
                                </div>
                                <div class="all_strategies_holder">
                                    <div class="each_strategy_holder clearfix" ng-repeat="tactic in strategyDataByPerformance.tactics track by $index" ng-if="tactic.platform_metrics.performance">
                                        <div class="linkage_bar"></div>
                                        <div class="each_strategy clearfix">
                                            <div class="each_col first_col">
                                                {{tactic.name}}
                                            </div>
                                            <div class="row_list_holder">
                                                <div class="clearfix each_row_list expandRow" ng-repeat="performanceData in tactic.platform_metrics.performance track by $index" ng-include="'performanceTpl'"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- -------END :  Performance Block ------------------------ -->

                    <!-- -------START :  Cost Block ----------------------------- -->

                    <div class="reports_block" id="reports_platform_cost_block" style="display:none;">
                        <div class="no_data_found" ng-if="isCostModelTransparent && dataNotFoundForCost" ng-bind-html="getMessageForDataNotAvailable('cost')"></div>
                        <div class="cost_opaque_msg" ng-if="!isCostModelTransparent">
                            <span class="cost_opaque_txt">You don't have the access to cost data for <b>{{brandName}}</b>, please contact your account manager.</span>
                        </div>

                        <div class="reports_details_outer_container" ng-show="!dataNotFoundForCost && isCostModelTransparent">
                            <div class="clearfix reports_platform_header">
                                <cost-header></cost-header>
                            </div>

                            <div class="strategy_total_container ">
                                <div class="strategy_total_container_header clearfix">
                                    <div class="each_cost_heading">
                                        {{strategyHeading}}:
                                    </div>
                                    <div class="row_list_holder">
                                        <div class="common-load-icon" ng-show="costBusy"></div>
                                        <div class="clearfix each_row_list expandRow" ng-repeat="costData in strategyDataByCost.platform_metrics.cost track by $index" ng-include="'costTpl'"></div>
                                    </div>
                                </div>
                                <div class="all_strategies_holder">
                                    <div class="each_strategy_holder clearfix" ng-repeat="tactic in strategyDataByCost.tactics track by $index" ng-if="tactic.platform_metrics.cost">
                                        <div class="linkage_bar"></div>
                                        <div class="each_strategy clearfix">
                                            <div class="each_col first_col">
                                                {{tactic.name}}
                                            </div>
                                            <div class="row_list_holder">
                                                <div class="clearfix each_row_list expandRow" ng-repeat="costData in tactic.platform_metrics.cost track by $index" ng-include="'costTpl'"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- -------END :  Cost Block ----------------------------- -->

                    <!-- -------START :  Viewablity Block ----------------------------- -->
                    <div class="reports_block" id="reports_platform_viewablity_block" style="display:none;">
                        <div class="no_data_found" ng-if="dataNotFoundForViewablity" ng-bind-html="getMessageForDataNotAvailable('viewablity')"></div>
                        <div class="reports_details_outer_container" ng-show="!dataNotFoundForViewablity">
                            <div class="clearfix reports_platform_header">
                                <viewablity-header></viewablity-header>
                            </div>
                            <div class="strategy_total_container ">
                                <div class="strategy_total_container_header clearfix">
                                    <div class="each_col first_col">
                                        {{strategyHeading}}:
                                    </div>
                                    <div class="row_list_holder">
                                        <div class="common-load-icon" ng-show="viewablityBusy"></div>
                                        <div class="clearfix each_row_list expandRow" ng-repeat="ViewablityData in strategyDataByViewablity.platform_metrics.viewability track by $index" ng-include="'viewablityTpl'"></div>
                                    </div>
                                </div>
                                <div class="all_strategies_holder">
                                    <div class="each_strategy_holder clearfix" ng-repeat="tactic in strategyDataByViewablity.tactics track by $index" ng-if="tactic.platform_metrics.viewability">
                                        <div class="linkage_bar"></div>
                                        <div class="each_strategy clearfix">
                                            <div class="each_col first_col">
                                                {{tactic.name}}
                                            </div>
                                            <div class="row_list_holder">
                                                <div class="clearfix each_row_list expandRow" ng-repeat="ViewablityData in tactic.platform_metrics.viewability track by $index" ng-include="'viewablityTpl'"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- -------END :  Viewablity Block ----------------------------- -->
                </div>
            </div>
    </div>
</div>

<script type="text/ng-template" id="performanceTpl">
    <div class="platform_aggregation_row" ng-click="togglePlatformRow($event)">
        <div class="each_col sec_col">
            {{performanceData.platform_type}}
        </div>
        <div class="each_col third_col">
            {{performanceData.platformType_aggregation.impressions |  nrFormat}}
        </div>
        <div class="each_col forth_col">
                {{performanceData.platformType_aggregation.ctr*100 | number:2}}%
        </div>
        <div class="each_col fifth_col">
                {{performanceData.platformType_aggregation.action_rate*100 | number:2}}%
        </div>
        <div class="each_col sixth_col">
        ${{performanceData.platformType_aggregation.cpa | number:2}}
        </div>
        <div class="each_col seventh_col">
        ${{performanceData.platformType_aggregation.cpc | number:2}}
        </div>
        <div class="each_col eight_col">
        ${{performanceData.platformType_aggregation.cpm | number:2}}
        </div>
    </div>

    <div class="platform_row" ng-repeat="platform in performanceData.platforms track by $index">
        <div class="each_col sec_col platform_logo" >
            <span class="platform_logo_img">
                <img ng-src="{{platform.icon_url==='Unknown'?'assets/images/platform_logos/platform_logo.png':platform.icon_url}}" />
            </span>
            <span class="plat_name" title="{{platform.platform}}">{{platform.platform}}</span>
        </div>
        <div class="each_col third_col">
            {{platform.impressions |  nrFormat}}
        </div>
        <div class="each_col forth_col">
            {{platform.ctr*100 | number:2}}%
        </div>
        <div class="each_col fifth_col">
            {{platform.action_rate*100 | number:2}}%
        </div>
        <div class="each_col sixth_col">
            ${{platform.cpa | number:2}}
        </div>
        <div class="each_col seventh_col">
            ${{platform.cpc | number:2}}
        </div>
        <div class="each_col eight_col">
            ${{platform.cpm | number:2}}
        </div>
    </div>
</script>

<script type="text/ng-template" id="costTpl">
    <div class="platform_aggregation_row" ng-click="togglePlatformRow($event)">
        <div class="each_cost_col first_col">{{costData.platform_type}}</div>
        <div class="each_cost_col second_col">{{costData.platformType_aggregation.impressions | nrFormat}}</div>
        <div class="each_cost_col third_col">{{costData.platformType_aggregation[selected_filters.kpi_type.toLowerCase()] | appendDollor : selected_filters.kpi_type.toLowerCase() }}</div>
        <div class="each_cost_col fourth_col">${{costData.platformType_aggregation.inventory_cost | number:0}}</div>
        <div class="each_cost_col fifth_col">${{costData.platformType_aggregation.data_cost | number:0}}</div>
        <div class="each_cost_col sixth_col">${{costData.platformType_aggregation.ad_serving_cost | number:0}}</div>
        <div class="each_cost_col seventh_col">${{costData.platformType_aggregation.rich_media_cost | number:0}}</div>
        <div class="each_cost_col eigth_col">${{costData.platformType_aggregation.research_cost | number:0}}</div>
        <div class="each_cost_col ninth_col">${{costData.platformType_aggregation.ad_verification_cost | number:0}}</div>
        <div class="each_cost_col tenth_col total_cost">${{costData.platformType_aggregation.total_spend | number:0}}</div>
    </div>

    <div class="platform_row" ng-repeat="platform in costData.platforms track by $index">
        <div class="each_cost_col first_col platform_logo" >
            <span class="platform_logo_img">
                <img ng-src="{{platform.icon_url==='Unknown'?'assets/images/platform_logos/platform_logo.png':platform.icon_url}}" />
            </span>
            <span class="plat_name" title="{{platform.platform}}">{{platform.platform}}</span>
        </div>
        <div class="each_cost_col second_col">{{platform.impressions | nrFormat}}</div>
        <div class="each_cost_col third_col">{{platform[selected_filters.kpi_type.toLowerCase()] | appendDollor : selected_filters.kpi_type.toLowerCase() }}</div>
        <div class="each_cost_col fourth_col">${{platform.inventory_cost | number:0}}</div>
        <div class="each_cost_col fifth_col">${{platform.data_cost | number:0}}</div>
        <div class="each_cost_col sixth_col">${{platform.ad_serving_cost | number:0}}</div>
        <div class="each_cost_col seventh_col">${{platform.rich_media_cost | number:0}}</div>
        <div class="each_cost_col eigth_col">${{platform.research_cost | number:0}}</div>
        <div class="each_cost_col ninth_col">${{platform.ad_verification_cost | number:0}}</div>
        <div class="each_cost_col tenth_col total_cost">${{platform.total_spend | number:0}}</div>
    </div>
</script>

<script type="text/ng-template" id="viewablityTpl">
    <div class="platform_aggregation_row" ng-click="togglePlatformRow($event)">
        <div class="each_col platform_name_col">
            {{ViewablityData.platform_type}}
        </div>
        <div class="each_col third_col">
            <div class="sub_col">
                <span>{{ViewablityData.platformType_aggregation.ias_imps_delivered | nrFormat}}</span>
                <span>{{ViewablityData.platformType_aggregation.total_imps | nrFormat}}</span>
            </div>
        </div>
        <div class="each_col third_col">
            <div class="sub_col">
                <span> {{ViewablityData.platformType_aggregation.ias_measurable_imps | nrFormat}}</span>
                <span>{{ViewablityData.platformType_aggregation.measurable_imps_perc | number:2}}%</span>
            </div>
        </div>
        <div class="each_col forth_col">
            <div class="sub_col">
                <span> {{ViewablityData.platformType_aggregation.ias_viewable_imps | nrFormat}}</span>
                <span>{{ViewablityData.platformType_aggregation.viewable_imps_perc | number:2}}%</span>
            </div>
        </div>
        <div class="each_col suspicious_col">
            {{ViewablityData.platformType_aggregation.susp_activity_perc | number:2}}%
        </div>
        <div class="each_col seventh_col">
            {{ViewablityData.platformType_aggregation[selected_filters.kpi_type.toLowerCase()] | appendDollor: selected_filters.kpi_type}}
        </div>

    </div>

    <div class="platform_row" ng-repeat="platform in ViewablityData.platforms track by $index">
        <div class="each_col platform_name_col platform_logo" >
            <span class="platform_logo_img">
                <img ng-src="{{platform.icon_url==='Unknown'?'assets/images/platform_logos/platform_logo.png':platform.icon_url}}" />
            </span>
            <span class="plat_name" title="{{platform.platform}}" >{{platform.platform}}</span>
        </div>

        <!-- <div class="each_col platform_name_col">
            {{platform.platform_type}}
        </div> -->

        <div class="each_col third_col">
            <div class="sub_col">
                <span>{{platform.ias_imps_delivered | nrFormat}}</span>
                <span>{{platform.total_imps | nrFormat }}</span>
            </div>
        </div>
        <div class="each_col third_col">
            <div class="sub_col">
                <span> {{platform.ias_measurable_imps | nrFormat}}</span>
                <span>{{platform.measurable_imps_perc | number:2}}%</span>
            </div>
        </div>
        <div class="each_col forth_col">
            <div class="sub_col">
                <span> {{platform.ias_viewable_imps | nrFormat}}</span>
                <span>{{platform.viewable_imps_perc | number:2}}%</span>
            </div>
        </div>
        <div class="each_col suspicious_col">
            {{platform.susp_activity_perc | number:2}}%
        </div>
        <div class="each_col seventh_col">
            {{platform[selected_filters.kpi_type.toLowerCase()] | appendDollor: selected_filters.kpi_type}}
        </div>
    </div>
</script>