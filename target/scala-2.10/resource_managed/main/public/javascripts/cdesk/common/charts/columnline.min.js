(function(){commonModule.factory("columnline",function($timeout,utils){var getRepString=function(x){var y=Math.abs(x);if(y<9999)return x;if(y<1E6)return Math.round(x/1E3)+"K";if(y<1E7)return(x/1E6).toFixed(2)+"M";if(y<1E9)return Math.round(x/1E6)+"M";if(y<1E12)return Math.round(x/1E9)+"B";return"1T+"};var columnChart=function(chartData,kpIType){var xData=[];var impLine=[];var kpiColumn=[];for(var i=0;i<chartData.length;i++){var kpi_value=chartData[i].kpi_value;if(kpIType.toLowerCase()==="ctr"||kpIType.toLowerCase()===
"action_rate"||kpIType.toLowerCase()==="action rate"||kpIType.toLowerCase()==="vtc")kpi_value=parseFloat((kpi_value*100).toFixed(4));xData.push({custom:i,y:chartData[i].domain_data});impLine.push(chartData[i].impressions);kpiColumn.push(kpi_value)}return{options:{chart:{type:"column",width:450,height:260,margin:[20,80,30,85]},plotOptions:{column:{colorByPoint:true}},colors:["#0D6DCC","#2078CB","#348DDF","#62AFF1","#79C1FD"],credits:{enabled:false},legend:{enabled:false},tooltip:{shared:false,useHTML:true,
formatter:function(){if(this.key){var yVal=this.y;var return_val={};if(this.series.name!=="Series 1"){yVal=Highcharts.numberFormat(Math.round(this.y),0);return_val=this.key.y+" : "+yVal}else return_val=kpIType==="CTR"||kpIType==="action_rate"||kpIType.toLowerCase()==="action rate"||kpIType.toLowerCase()==="vtc"?this.key.y+" : "+yVal+"%":this.key.y+" : "+"$"+yVal;return"\x3cdiv id\x3d'inventory_tooltip' class\x3d'inventory-tool-tip'\x3e"+return_val+"\x3c/div\x3e"}else return""},style:{padding:10,fontWeight:"bold"}},
xAxis:{categories:xData,lineWidth:1,minorGridLineWidth:0,gridLineWidth:0,lineColor:"#0D6DCC",tickWidth:0,labels:{enabled:true,distance:10,style:{color:"#FEFFFE",fontWeight:"bold"},y:-10,formatter:function(){if(this)return parseInt(this.value.custom+1);else return""}},title:{align:"high",offset:5,text:"",rotation:0,y:-5}},yAxis:[{labels:{enabled:true,style:{color:"#181B20"},formatter:function(){return getRepString(this.value)}},tickWidth:1,tickColor:"#181B20",lineWidth:1,gridLineWidth:0,lineColor:"#181B20",
minorGridLineWidth:0,opposite:true,title:{align:"high",offset:5,style:{color:"#181B20"},text:"Imps",rotation:0,y:-10,x:33}},{title:{align:"high",offset:5,text:kpIType,style:{color:"#0D6DCC"},rotation:0,y:-10,x:-10},labels:{enabled:true,style:{color:"#0D6DCC"},formatter:function(){var currency=kpIType==="CTR"?"":"$";var $returnLabel=currency+Highcharts.numberFormat(this.value,2);return $returnLabel}},lineWidth:1,tickWidth:1,tickColor:"#0D6DCC",lineColor:"#0D6DCC",gridLineWidth:0,minorGridLineWidth:0,
opposite:false}],title:{text:" "}},series:[{name:"",type:"column",yAxis:1,data:kpiColumn,events:{mouseOut:function(){$("#inventory_tooltip").hide();$(".highcharts-tooltip").hide()},mouseOver:function(){$("#inventory_tooltip").show();$(".highcharts-tooltip").show()}},tooltip:{enabled:false}},{name:"",type:"line",data:impLine,events:{mouseOut:function(){$(".highcharts-tooltip").hide()},mouseOver:function(){$(".highcharts-tooltip").show()}},tooltip:{enabled:false},color:"#181B20",marker:{enabled:true,
fillColor:"#181B20"},states:{hover:{enabled:false}}}],loading:false,useHighStocks:false,func:function(chart){$timeout(function(){if(utils.allValuesSame(impLine))if(chart!==undefined&&chart.xAxis!==undefined){var extremesX=chart.yAxis[0].getExtremes();chart.yAxis[0].setExtremes(0,extremesX.max*2)}},1E3)}}};return{highChart:columnChart}})})();